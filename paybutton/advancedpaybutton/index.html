<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-paybutton docs-doc-id-advancedpaybutton">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Advanced Pay Button Integration | Handpoint</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://developer-ecomm.handpoint.io/paybutton/advancedpaybutton"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-paybutton-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-paybutton-current"><meta data-rh="true" property="og:title" content="Advanced Pay Button Integration | Handpoint"><meta data-rh="true" name="description" content="Creating a custom pay button allows you to have full control over what information is passed to the Handpoint gateway. You can leverage any of the hosted integration fields as part of the pay button integration."><meta data-rh="true" property="og:description" content="Creating a custom pay button allows you to have full control over what information is passed to the Handpoint gateway. You can leverage any of the hosted integration fields as part of the pay button integration."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://developer-ecomm.handpoint.io/paybutton/advancedpaybutton"><link data-rh="true" rel="alternate" href="https://developer-ecomm.handpoint.io/paybutton/advancedpaybutton" hreflang="en"><link data-rh="true" rel="alternate" href="https://developer-ecomm.handpoint.io/paybutton/advancedpaybutton" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-RNDFP191TE"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-RNDFP191TE",{anonymize_ip:!0})</script>









<script src="https:////js-eu1.hs-scripts.com/25846579.js"></script><link rel="stylesheet" href="/assets/css/styles.423f145a.css">
<link rel="preload" href="/assets/js/runtime~main.b8ec260b.js" as="script">
<link rel="preload" href="/assets/js/main.4cacc470.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://developer.handpoint.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/handpoint-logo-hvitt.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA" width="75"><img src="/img/handpoint-logo-hvitt.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU" width="75"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/cnpdocs">Getting Started</a><a class="navbar__item navbar__link" href="/docs/overview">Hosted Payment Page</a><a class="navbar__item navbar__link" href="/hostedpaymentfields/overview">Hosted Payment Fields</a><a class="navbar__item navbar__link" href="/directintegration/overview">Direct Integration</a><a class="navbar__item navbar__link" href="/batchintegration/overview">Batch Integration</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/paybutton/basicpaybutton">Pay By Link</a><a class="navbar__item navbar__link" href="/shoppingcarts/shoppingcarts">Shopping Carts</a><a class="navbar__item navbar__link" href="/mobilesdks/mobilesdks">Mobile SDKs</a></div><div class="navbar__items navbar__items--right"><a href="https://status.handpoint.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-statuspage-icon" aria-label="Status Page"></a><a href="https://github.com/handpoint" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/paybutton/basicpaybutton">Basic Pay Button Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/paybutton/advancedpaybutton">Advanced Pay Button Integration</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Advanced Pay Button Integration</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Advanced Pay Button Integration</h1><p>Creating a custom pay button allows you to have full control over what information is passed to the Handpoint gateway. You can leverage any of the <a href="/docs/transactiontypes#transactionRequest">hosted integration fields</a> as part of the pay button integration.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pre-requisites">Pre-Requisites<a class="hash-link" href="#pre-requisites" title="Direct link to heading">​</a></h2><table><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td>Merchant Account ID</td><td>Your unique Merchant Account ID. You should have received these details when your account was set up.</td></tr><tr><td>Hosted Integration URL</td><td>Your unique URL to use the Hosted Integration.</td></tr><tr><td>Signature</td><td>Hash used to sign the transaction request. See the <a href="/docs/samplecode#signatureCalculation">signature calculation</a> section for information on how to create the hash.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="gateway-request">Gateway Request<a class="hash-link" href="#gateway-request" title="Direct link to heading">​</a></h2><p>To create the button the details should be URL encoded Name=Value fields separated by ‘&amp;’ characters (refer to RFC 1738 and the application/x-wwwform- urlencoded media type).</p><p>This is then base64 encoded with all padding characters (=) stripped and the following characters +, / replaced with – and _ respectively.</p><p>This string is then appended to the gateway URL via a GET parameter called fields to give the final link replacing the {base 64 encoded string} above.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="request-fields">Request Fields<a class="hash-link" href="#request-fields" title="Direct link to heading">​</a></h2><table><thead><tr><th>Field</th><th>Mandatory</th><th>Description</th></tr></thead><tbody><tr><td>merchantID</td><td><span class="badge badge--primary">Yes</span></td><td>The six-digit id provided to you during set-up, e.g. <code>123456</code> For testing, please use ‘TEST’</td></tr><tr><td>amount</td><td><span class="badge badge--primary">Yes</span></td><td>The amount of the transaction in minor currency. For the UK this is in pence, e.g. £10.99 is sent as 1099. Numeric values only – no decimal points or currency symbols.</td></tr><tr><td>action</td><td><span class="badge badge--primary">Yes</span></td><td>The action of the transaction. Values are: <a href="/docs/transactiontypes#sale">SALE</a>, <a href="/docs/transactiontypes#verify">VERIFY</a> and <a href="/docs/transactiontypes#preauth">PREAUTH</a>.</td></tr><tr><td>type</td><td><span class="badge badge--primary">Yes</span></td><td>The type of transaction. Passed as a single digit. Possible values are: <br> <strong>1</strong> – E-commerce (ECOM)<br> <strong>2</strong> - Mail Order/Telephone Order (MOTO)</td></tr><tr><td>redirectURL</td><td><span class="badge badge--primary">Yes</span></td><td>The URL to which the customer will be redirected after the transaction with the transaction result sent via POST. We recommend the integration also contain a <strong>callbackURL</strong> to ensure the transaction details are sent to the website in case the cardholder’s browser fails to redirect them.</td></tr><tr><td>countrycode</td><td><span class="badge badge--primary">Yes</span></td><td>Merchant&#x27;s Location. Valid ISO-3166 alpha or numeric code, e.g. 826 for U.K.</td></tr><tr><td>currencyCode</td><td><span class="badge badge--primary">Yes</span></td><td>Transaction Currency. Valid ISO-3166 alpha or numeric code, e.g. 826 for U.K.</td></tr><tr><td>signature</td><td><span class="badge badge--primary">Yes</span></td><td>A hashed string of the request containing the signature key unique to the merchant ID. More details on message signing can be found in our annex <a href="/docs/samplecode#signatureCalculation">Signature Calculation</a></td></tr><tr><td>redirectURLFail</td><td>No</td><td>The URL to which the customer will be redirected and the transaction result will be POSTed if the transaction fails.If left blank, the <strong>redirectURL</strong> will be used.</td></tr><tr><td>formAmountEditable</td><td>No</td><td>Accepts the following value: <br> ‘<strong>Y</strong>’ – Allows the cardholder to enter the amount to pay in the hosted form and is useful for donations. <br> Note: Passing ‘<strong>N</strong>’, or null to this field causes the amount in the hosted form to act as default, i.e. A static value the user can’t change.</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sample-code-request">Sample Code (Request)<a class="hash-link" href="#sample-code-request" title="Direct link to heading">​</a></h2><p>The following is an example test request built in PHP.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token php language-php delimiter important">&lt;?php</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php comment" style="color:rgb(98, 114, 164)">//Gateway URL</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$url</span><span class="token php language-php"> </span><span class="token php language-php operator">=</span><span class="token php language-php"> </span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;https://commerce-api.handpoint.com/button/&#x27;</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php comment" style="color:rgb(98, 114, 164)">//Merchant signature key. It will be provided by the Handpoint support team</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$sigKey</span><span class="token php language-php"> </span><span class="token php language-php operator">=</span><span class="token php language-php"> </span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;3obzOxdqw6e1u&#x27;</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php comment" style="color:rgb(98, 114, 164)">//Request information</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$req</span><span class="token php language-php"> </span><span class="token php language-php operator">=</span><span class="token php language-php"> </span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">array</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;merchantID&#x27;</span><span class="token php language-php"> </span><span class="token php language-php operator">=&gt;</span><span class="token php language-php"> </span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;155928&#x27;</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php comment" style="color:rgb(98, 114, 164)">//merchantID will be provided by the Handpoint support team</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;amount&#x27;</span><span class="token php language-php"> </span><span class="token php language-php operator">=&gt;</span><span class="token php language-php"> </span><span class="token php language-php number">1099</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php comment" style="color:rgb(98, 114, 164)">//Either major currency units includes a single decimal point such as ’10.99&#x27;. </span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">                      </span><span class="token php language-php comment" style="color:rgb(98, 114, 164)">//Minor currency units contains no decimal points such as ‘1099</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;action&#x27;</span><span class="token php language-php"> </span><span class="token php language-php operator">=&gt;</span><span class="token php language-php"> </span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;SALE&#x27;</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php comment" style="color:rgb(98, 114, 164)">//action could be SALE, VERIFY or PREAUTH </span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;type&#x27;</span><span class="token php language-php"> </span><span class="token php language-php operator">=&gt;</span><span class="token php language-php"> </span><span class="token php language-php number">1</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php comment" style="color:rgb(98, 114, 164)">//1 –&gt; E-commerce (ECOM), 2 –&gt; Mail Order/Telephone Order (MOTO)</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;redirectURL&#x27;</span><span class="token php language-php"> </span><span class="token php language-php operator">=&gt;</span><span class="token php language-php"> </span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;https://checkout.handpoint.io/&#x27;</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php comment" style="color:rgb(98, 114, 164)">//The payment form will redirect the Customer’s browser to this URL after the transaction has been completed.</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;countryCode&#x27;</span><span class="token php language-php"> </span><span class="token php language-php operator">=&gt;</span><span class="token php language-php"> </span><span class="token php language-php number">826</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php comment" style="color:rgb(98, 114, 164)">//ISO 3-letter country code. 826 -&gt; United Kingdom</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;currencyCode&#x27;</span><span class="token php language-php"> </span><span class="token php language-php operator">=&gt;</span><span class="token php language-php"> </span><span class="token php language-php number">826</span><span class="token php language-php"> </span><span class="token php language-php comment" style="color:rgb(98, 114, 164)">//ISO 3-letter currency code. 826 -&gt; GBP</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$req</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;signature&#x27;</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token php language-php"> </span><span class="token php language-php operator">=</span><span class="token php language-php"> </span><span class="token php language-php function" style="color:rgb(80, 250, 123)">createSignature</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$req</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$sigKey</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$poststring</span><span class="token php language-php">       </span><span class="token php language-php operator">=</span><span class="token php language-php"> </span><span class="token php language-php function" style="color:rgb(80, 250, 123)">http_build_query</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$req</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;&#x27;</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;&amp;&#x27;</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$base64request</span><span class="token php language-php">    </span><span class="token php language-php operator">=</span><span class="token php language-php"> </span><span class="token php language-php function" style="color:rgb(80, 250, 123)">base64_encode</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$poststring</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">echo</span><span class="token php language-php"> </span><span class="token php language-php string double-quoted-string" style="color:rgb(255, 121, 198)">&quot;&lt;form action=\&quot;</span><span class="token php language-php string double-quoted-string interpolation punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token php language-php string double-quoted-string interpolation variable" style="color:rgb(189, 147, 249);font-style:italic">$url</span><span class="token php language-php string double-quoted-string interpolation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token php language-php string double-quoted-string" style="color:rgb(255, 121, 198)">?fields=</span><span class="token php language-php string double-quoted-string interpolation punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token php language-php string double-quoted-string interpolation variable" style="color:rgb(189, 147, 249);font-style:italic">$base64request</span><span class="token php language-php string double-quoted-string interpolation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token php language-php string double-quoted-string" style="color:rgb(255, 121, 198)">\&quot; method=\&quot;post\&quot; id=\&quot;custom\&quot;&gt;&quot;</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php comment" style="color:rgb(98, 114, 164)">//Button to start the payment</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">echo</span><span class="token php language-php"> </span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;&lt;input type=&quot;submit&quot; value=&quot;Pay Now&quot;&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&lt;/form&gt;&#x27;</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php comment" style="color:rgb(98, 114, 164)">//Function that generates the signature using the request information and the merchant signature key</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">function</span><span class="token php language-php"> </span><span class="token php language-php function-definition function" style="color:rgb(80, 250, 123)">createSignature</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php keyword type-hint" style="color:rgb(189, 147, 249);font-style:italic">array</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$data</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$key</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php comment" style="color:rgb(98, 114, 164)">// Sort by field name</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php function" style="color:rgb(80, 250, 123)">ksort</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$data</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php comment" style="color:rgb(98, 114, 164)">// Create the URL encoded signature string</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$ret</span><span class="token php language-php"> </span><span class="token php language-php operator">=</span><span class="token php language-php"> </span><span class="token php language-php function" style="color:rgb(80, 250, 123)">http_build_query</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$data</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;&#x27;</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;&amp;&#x27;</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php comment" style="color:rgb(98, 114, 164)">// Normalise all line endings (CRNL|NLCR|NL|CR) to just NL (%0A) </span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$ret</span><span class="token php language-php"> </span><span class="token php language-php operator">=</span><span class="token php language-php"> </span><span class="token php language-php function" style="color:rgb(80, 250, 123)">str_replace</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">array</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">        </span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;%0D%0A&#x27;</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">        </span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;%0A%0D&#x27;</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">        </span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;%0D&#x27;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;%0A&#x27;</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$ret</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php comment" style="color:rgb(98, 114, 164)">// Hash the signature string and the key together</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php">    </span><span class="token php language-php keyword" style="color:rgb(189, 147, 249);font-style:italic">return</span><span class="token php language-php"> </span><span class="token php language-php function" style="color:rgb(80, 250, 123)">hash</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token php language-php string single-quoted-string" style="color:rgb(255, 121, 198)">&#x27;SHA512&#x27;</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$ret</span><span class="token php language-php"> </span><span class="token php language-php operator">.</span><span class="token php language-php"> </span><span class="token php language-php variable" style="color:rgb(189, 147, 249);font-style:italic">$key</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token php language-php"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token php language-php"></span><span class="token php language-php delimiter important">?&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/paybutton/basicpaybutton"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Basic Pay Button Integration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#pre-requisites" class="table-of-contents__link toc-highlight">Pre-Requisites</a></li><li><a href="#gateway-request" class="table-of-contents__link toc-highlight">Gateway Request</a></li><li><a href="#request-fields" class="table-of-contents__link toc-highlight">Request Fields</a></li><li><a href="#sample-code-request" class="table-of-contents__link toc-highlight">Sample Code (Request)</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://developer.handpoint.com/cpdocs/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">In-Person Payments Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/cnpdocs/index.html">Online Payments Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://handpoint.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Handpoint Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/handpoint" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/handpointltd?lang=en" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Get our Apps</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://play.google.com/store/apps/details?id=com.handpoint.hipos&amp;hl=en&amp;gl=US&amp;pcampaignid=pcampaignidMKT-Other-global-all-co-prtnr-py-PartBadge-Mar2515-1" target="_blank" rel="noopener noreferrer" class="footer__link-item">Get it on Google Play<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://apps.apple.com/us/app/handpoint/id1450546788?itsct=apps_box_link&amp;itscg=30200" target="_blank" rel="noopener noreferrer" class="footer__link-item">Download on the App Store<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://status.handpoint.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Handpoint Status Page<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://handpoint.atlassian.net/wiki/spaces/PD/overview?homepageId=5898250" target="_blank" rel="noopener noreferrer" class="footer__link-item">FAQ<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://handpoint.us6.list-manage.com/subscribe?u=4d9dff9e7edb7e57a67a7b252&amp;id=0a2179241e" target="_blank" rel="noopener noreferrer" class="footer__link-item">Subscribe to the Handpoint Newsletter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/handpoint" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://www.handpoint.com" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="https://handpoint.imgix.net/handpoint-logo-w.png?w=150" alt="Handpoint Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="https://handpoint.imgix.net/handpoint-logo-w.png?w=150" alt="Handpoint Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></a></div><div class="footer__copyright">Copyright © 2023 Handpoint</div></div></div></footer></div>
<script src="/assets/js/runtime~main.b8ec260b.js"></script>
<script src="/assets/js/main.4cacc470.js"></script>
</body>
</html>