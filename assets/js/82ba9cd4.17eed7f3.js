"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[5851],{3905:function(e,t,a){a.d(t,{Zo:function(){return u},kt:function(){return p}});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),d=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),h=d(a),p=r,m=h["".concat(s,".").concat(p)]||h[p]||c[p]||l;return a?n.createElement(m,i(i({ref:t},u),{},{components:a})):n.createElement(m,i({ref:t},u))}));function p(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=h;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var d=2;d<l;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},6510:function(e,t,a){a.r(t),a.d(t,{assets:function(){return s},contentTitle:function(){return i},default:function(){return c},frontMatter:function(){return l},metadata:function(){return o},toc:function(){return d}});var n=a(3117),r=(a(7294),a(3905));const l={sidebar_position:3},i="3D Secure & Strong Customer Authentication (SCA)",o={unversionedId:"3dsecure",id:"3dsecure",title:"3D Secure & Strong Customer Authentication (SCA)",description:"PSD2 SCA Compliance",source:"@site/docs/3dsecure.md",sourceDirName:".",slug:"/3dsecure",permalink:"/docs/3dsecure",draft:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Transaction Types",permalink:"/docs/transactiontypes"},next:{title:"Credentials on file",permalink:"/docs/credentialsonfile"}},s={},d=[{value:"PSD2 SCA Compliance",id:"psd2-sca-compliance",level:2},{value:"Obtaining Strong Customer Authentication",id:"obtaining-strong-customer-authentication",level:4},{value:"3D Secure Overview",id:"3d-secure-overview",level:2},{value:"3DS Benefits",id:"3ds-benefits",level:2},{value:"3DS Limitations",id:"3ds-limitations",level:2},{value:"3DS Implementation",id:"3ds-implementation",level:2},{value:"Request Flow",id:"request-flow",level:3},{value:"Final Response",id:"final-response",level:3},{value:"Cardholder Information",id:"cardholder-information",level:3},{value:"3DS Options",id:"3dsOptions",level:2},{value:"3-D Secure Authentication Data",id:"3dSecureAuthenticationData",level:2},{value:"3D Secure enrolment status",id:"3d-secure-enrolment-status",level:3},{value:"3DS Authentication status",id:"3ds-authentication-status",level:3},{value:"3DS Transaction Identifier",id:"3ds-transaction-identifier",level:3},{value:"3DS Electronic Commerce Indicator",id:"3ds-electronic-commerce-indicator",level:3},{value:"3DS Cardholder Authentication Verification Value",id:"3ds-cardholder-authentication-verification-value",level:3},{value:"SCA Using 3-D Secure",id:"scaUsing3dSecure",level:2},{value:"SCA Soft-Declines",id:"sca-soft-declines",level:3},{value:"Exemptions to Strong Customer Authentication",id:"scaExemptions",level:3},{value:"Mail Order / Telephone Order Payments",id:"mail-order--telephone-order-payments",level:4},{value:"Merchant Initiated Transactions",id:"merchant-initiated-transactions",level:4},{value:"Low Value Exemption",id:"low-value-exemption",level:4},{value:"Trusted Beneficiary Exemption",id:"trusted-beneficiary-exemption",level:4},{value:"Trusted Risk Analysis (TRA) Exemption",id:"trusted-risk-analysis-tra-exemption",level:4},{value:"Secured Corporate Payment Exemption",id:"secured-corporate-payment-exemption",level:4},{value:"Delegated Authentication Exemption",id:"delegated-authentication-exemption",level:4}],u={toc:d};function c(e){let{components:t,...l}=e;return(0,r.kt)("wrapper",(0,n.Z)({},u,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"3d-secure--strong-customer-authentication-sca"},"3D Secure & Strong Customer Authentication (SCA)"),(0,r.kt)("h2",{id:"psd2-sca-compliance"},"PSD2 SCA Compliance"),(0,r.kt)("p",null,"Strong Customer Authentication (SCA) is a requirement of the second Payment Services Directive (PSD2) in the European Economic Area (EEA), Monaco, and the United Kingdom. It aims to add extra layers of security to e-commerce payments by requiring banks to perform additional checks when Customers make payments."),(0,r.kt)("p",null,"PSD2 is for banks, not for merchants. This means that to comply with the law in their home country, banks must refuse non-compliant payments. To avoid the risk of the bank declining your payment, you as a merchant need to ensure that your payments comply with PSD2 SCA regulations."),(0,r.kt)("p",null,"You can comply by obtaining additional authentication to verify the Customer\u2019s identity or by providing a valid reason for the payment to be exempt from SCA. Any authentication must use a least two of the following three elements:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Something the Customer knows (eg password)"),(0,r.kt)("li",{parentName:"ol"},"Something the Customer has (eg phone)"),(0,r.kt)("li",{parentName:"ol"},"Something the Customer is (eg fingerprint)")),(0,r.kt)("p",null,"PSD2 countries are: Austria, Belgium, Bulgaria, Croatia, Republic of Cyprus, Czech Republic, Denmark, Estonia, Finland, France, Germany, Greece, Hungary, Iceland, Ireland, Italy, Latvia, Liechtenstein, Lithuania, Luxembourg, Malta, Monaco, Netherlands, Norway, Poland, Portugal, Romania, Slovakia, Slovenia, Spain, Sweden, and the UK."),(0,r.kt)("h4",{id:"obtaining-strong-customer-authentication"},"Obtaining Strong Customer Authentication"),(0,r.kt)("p",null,"Strong Customer Authentication applies to Customer entered online transactions (ECOM). Mail Order/Telephone Order (MOTO) transactions and recurring transactions are considered Merchant entered transactions and do not require strong authentication."),(0,r.kt)("p",null,"Currently, the most common way of authenticating an online card payment is to use 3-D Secure. 3-D Secure is accepted as a means of obtaining Cardholder authentication for the purposes of SCA."),(0,r.kt)("p",null,"Other card-based payment method such as Apple Pay and some Google Pay payments already support payment flows with a built-in layer of strong authentication (biometric or password). These can be a great way for you to offer a frictionless checkout experience while meeting the new requirements."),(0,r.kt)("p",null,"We also expect many alternative European payment methods such as PayPal, Amazon Pay, iDEAL, etc. to follow the new SCA rules without any major changes to their user experience."),(0,r.kt)("h2",{id:"3d-secure-overview"},"3D Secure Overview"),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"The Gateway supports both 3-D Secure version 1 and version 2 and will use the highest version available. Version 2 is also commonly known as EMV 3-D Secure.\n3DS Version 2 is now enforced across all Europe and it is therefore ",(0,r.kt)("strong",{parentName:"p"},"MANDATORY")," to support it to prevent a high number of declines. ")),(0,r.kt)("p",null,"3-D Secure authentication is now a ",(0,r.kt)("strong",{parentName:"p"},"MANDATORY")," fraud prevention scheme in Europe that is on all e-commerce card transactions processed by the Gateway, where supported by the Acquirer."),(0,r.kt)("p",null,"It allows the Cardholder to assign a password to their card that is then verified whenever a transaction is processed through a site that supports the use of the scheme. The addition of password protection allows extra security on transactions that are processed online."),(0,r.kt)("p",null,"3-D Secure stands for Three Domain Secure. There are 3 parties that are involved in the 3-D Secure process:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The company from which the purchase is being made."),(0,r.kt)("li",{parentName:"ul"},"The Acquiring Bank (the bank of the company)"),(0,r.kt)("li",{parentName:"ul"},"VISA and Mastercard (the card issuers themselves)")),(0,r.kt)("p",null,"The gateway supports EMV 3-D Secure as implemented by Visa, Mastercard and American Express and marketed under the brand names of Visa Secure, Mastercard ID Check and American Express SafeKey. Implementations by JCB (J/Secure) and DCI (ProtectBuy) are not currently supported."),(0,r.kt)("p",null,"The 3-D Secure preferences can be configured per Merchant Account. These preferences can be overridden per transaction by sending one of the preference fields which hold a comma separated list of the check responses that should be allowed to continue to completion. Responses not in the list will result in the transaction being declined with a ",(0,r.kt)("inlineCode",{parentName:"p"},"responseCode")," of 65803 (3DS_NOT_AUTHENTICATED)."),(0,r.kt)("h2",{id:"3ds-benefits"},"3DS Benefits"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The results are available immediately and returned as part of the transaction."),(0,r.kt)("li",{parentName:"ul"},"The checks can be managed independently allowing you the utmost control over how the results are used."),(0,r.kt)("li",{parentName:"ul"},"The checks can be configured to decline the transaction automatically, where required."),(0,r.kt)("li",{parentName:"ul"},"There are no extra Gateway costs for using 3-D Secure. Your Acquirer may charge to add this onto your business account; however, you may also find that your transaction charges are lower as a result of using 3-D Secure."),(0,r.kt)("li",{parentName:"ul"},"Fully configurable for each merchant account. ")),(0,r.kt)("h2",{id:"3ds-limitations"},"3DS Limitations"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The gateway does not support 3-D Secure for JCB or Diner\u2019s club cards."),(0,r.kt)("li",{parentName:"ul"},"3-D Secure transactions require a browser in order to display the Customer authentication dialog.")),(0,r.kt)("h2",{id:"3ds-implementation"},"3DS Implementation"),(0,r.kt)("p",null,"If your Merchant Account is set up for 3-D Secure, the Hosted Payment Page will automatically attempt to display the 3-D Secure authentication page for the Customer\u2019s bank. ",(0,r.kt)("strong",{parentName:"p"},"Good news, there is literally no extra work on your end to support it! 3D secure is fully handled by the gateway.")),(0,r.kt)("p",null,"The 3-D Secure authentication form is designed and controlled by the Customer\u2019s Issuing bank and will display the Merchant Account name and any website address added when the account was onboarded. You can change the displayed name and website address by sending the ",(0,r.kt)("inlineCode",{parentName:"p"},"merchantName")," and/or ",(0,r.kt)("inlineCode",{parentName:"p"},"merchantWebsite")," request fields. Any ",(0,r.kt)("inlineCode",{parentName:"p"},"merchantWebsite")," must be a fully qualified URL containing at least the scheme and host components.\nYou may also pass additional information about the transaction and Cardholder, using the ",(0,r.kt)("inlineCode",{parentName:"p"},"threeDSOptions")," field. This extra information can help the Issuer decide on whether a challenge is required."),(0,r.kt)("p",null,"Your Merchant Account must be configured with your Merchant Category Code (MCC). This value is usually configured in the backend but can also be provided using the ",(0,r.kt)("inlineCode",{parentName:"p"},"merchantCategoryCode")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"threeDSOptions")," request fields."),(0,r.kt)("h3",{id:"request-flow"},"Request Flow"),(0,r.kt)("p",null," ",(0,r.kt)("img",{alt:"hosted integration Flow",src:a(5884).Z,width:"2054",height:"1268"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Step 1: Load the Gateway\u2019s Hosted Form")),(0,r.kt)("p",{parentName:"li"},"Load the Hosted Form on your web page using your Gateway Integration URL. This must be loaded over HTTPS.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Step 2: The Gateway Processes EMV 3-D Secure v2 Transactions")),(0,r.kt)("p",{parentName:"li"},"Let the Gateway handle the complexities of the 3-D Secure process for you.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Step 3: Transaction Complete")),(0,r.kt)("p",{parentName:"li"},"Two ways of receiving the final transaction status response are available: via the Redirect URL and the Callback URL. Extra 3-D Secure transaction data is available in this response and can be used by your application for analytical purposes. This holds no sensitive Cardholder information."),(0,r.kt)("p",{parentName:"li"},"To use 3-D Secure on your Hosted Form, you must enable this support and fully configure your account in the backend (3-D Secure is usually enabled by default for all merchants). There should be no need for you to change your code to enable 3-D Secure support, unless you wish to use the data returned here in step 3."))),(0,r.kt)("h3",{id:"final-response"},"Final Response"),(0,r.kt)("p",null,"These fields are returned when the 3-D Secure stage has completed, and no further challenge is required.\nThese fields will be returned in addition to the ",(0,r.kt)("a",{parentName:"p",href:"transactiontypes#transactionResponse"},"basic response fields"),"."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"threeDSEnabled"),(0,r.kt)("td",{parentName:"tr",align:null},"Always"),(0,r.kt)("td",{parentName:"tr",align:null},"Is 3DS enabled for this Merchant Account?",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," N \u2013 Merchant Account is not enabled.",(0,r.kt)("br",null)," Y \u2013 Merchant Account is enabled.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"threeDSPolicy"),(0,r.kt)("td",{parentName:"tr",align:null},"If available"),(0,r.kt)("td",{parentName:"tr",align:null},"3DS Policy used. Refer to ",(0,r.kt)("a",{parentName:"td",href:"#scaUsing3dSecure"},"SCA using 3-D Secure")," for more details.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"threeDSXID"),(0,r.kt)("td",{parentName:"tr",align:null},"If 3DS enabled"),(0,r.kt)("td",{parentName:"tr",align:null},"The unique identifier for the transaction in the 3DS system.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"threeDSVETimestamp"),(0,r.kt)("td",{parentName:"tr",align:null},"If 3DS enabled"),(0,r.kt)("td",{parentName:"tr",align:null},"The time the card was checked for 3DS enrolment, and any initial challenge determined.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"threeDSEnrolled"),(0,r.kt)("td",{parentName:"tr",align:null},"If 3DS enabled"),(0,r.kt)("td",{parentName:"tr",align:null},"The 3DS enrolment status for the credit card. Refer to ",(0,r.kt)("a",{parentName:"td",href:"#3dSecureAuthenticationData"},"3-D Secure Authentication Data")," for details. ",(0,r.kt)("br",null),(0,r.kt)("br",null),"Possible values are:",(0,r.kt)("br",null)," Y \u2013 Enrolled. ",(0,r.kt)("br",null),"N \u2013 Not enrolled.",(0,r.kt)("br",null)," U \u2013 Unable to verify if enrolled. ",(0,r.kt)("br",null),"E \u2013 Error verifying enrolment.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"threeDSCATimestamp"),(0,r.kt)("td",{parentName:"tr",align:null},"If 3DS enabled"),(0,r.kt)("td",{parentName:"tr",align:null},"The time the last challenge was checked.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"threeDSAuthenticated"),(0,r.kt)("td",{parentName:"tr",align:null},"If 3DS enabled"),(0,r.kt)("td",{parentName:"tr",align:null},"The 3DS authentication status for the credit card. Refer to ",(0,r.kt)("a",{parentName:"td",href:"#3dSecureAuthenticationData"},"3-D Secure Authentication Data")," for details.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," Y \u2013 Authenticated. ",(0,r.kt)("br",null),"A \u2013 Attempted to authenticate. ",(0,r.kt)("br",null),"N \u2013 Not authenticated. ",(0,r.kt)("br",null),"R \u2013 Reject transaction.",(0,r.kt)("br",null)," I \u2013 Information only.",(0,r.kt)("br",null)," U \u2013 Unable to authenticate.",(0,r.kt)("br",null)," E \u2013 Error checking authentication.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"threeDSECI"),(0,r.kt)("td",{parentName:"tr",align:null},"If 3DS authenticated"),(0,r.kt)("td",{parentName:"tr",align:null},"This contains a two-digit Electronic Commerce Indicator (ECI) value. Refer to ",(0,r.kt)("a",{parentName:"td",href:"#3dSecureAuthenticationData"},"3-D Secure Authentication Data")," for details. The data contained within this property is only valid if the threeDSAuthenticated value is Y or A.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"threeDSCAVV"),(0,r.kt)("td",{parentName:"tr",align:null},"If 3DS authenticated"),(0,r.kt)("td",{parentName:"tr",align:null},"This contains a 28-character Base-64 encoded Cardholder Authentication Verification Value (CAVV). Refer to ",(0,r.kt)("a",{parentName:"td",href:"#3dSecureAuthenticationData"},"3-D Secure Authentication Data")," for details. The data contained within this property is only valid if the threeDSAuthenticated value is Y or A.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"threeDSDetails"),(0,r.kt)("td",{parentName:"tr",align:null},"If 3DS authenticated"),(0,r.kt)("td",{parentName:"tr",align:null},"Record containing further details about the 3-D Secure processing stage. Notable sub fields are:",(0,r.kt)("br",null),"version \u2013 3-D Secure version used ",(0,r.kt)("br",null),"versions \u2013 3-D Secure versions available ",(0,r.kt)("br",null),"psd2Region \u2013 whether payment in PSD2 jurisdiction")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"threeDSErrorCode"),(0,r.kt)("td",{parentName:"tr",align:null},"If 3DS error"),(0,r.kt)("td",{parentName:"tr",align:null},"Any error response code returned by the ACS if there is an error in determining the card\u2019s 3DS status.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"threeDSErrorDescription"),(0,r.kt)("td",{parentName:"tr",align:null},"If 3DS error"),(0,r.kt)("td",{parentName:"tr",align:null},"Any error response description returned by the ACS if there is an error in determining the card's 3DS status.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"threeDSResponseCode"),(0,r.kt)("td",{parentName:"tr",align:null},"Always"),(0,r.kt)("td",{parentName:"tr",align:null},"A numeric code providing the specific outcome of the 3-D Secure processing stage. Check threeDSResponseMessage for more details of any error that occurred. Refer to ",(0,r.kt)("a",{parentName:"td",href:"annexes#responseCodes"},"Response Codes")," for more details.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"threeDSResponseMessage"),(0,r.kt)("td",{parentName:"tr",align:null},"Always"),(0,r.kt)("td",{parentName:"tr",align:null},"Any error message relating to the outcome of the 3-D Secure processing stage.")))),(0,r.kt)("h3",{id:"cardholder-information"},"Cardholder Information"),(0,r.kt)("p",null,"In the case of a frictionless flow, the card Issuer may sometimes wish to provide a message to the Cardholder. In this case, the ",(0,r.kt)("inlineCode",{parentName:"p"},"threeDSResponseMessage")," will start with the text \u2018Cardholder Info: \u2018 and be followed by the message from the card Issuer."),(0,r.kt)("h2",{id:"3dsOptions"},"3DS Options"),(0,r.kt)("p",null,"The following options may be sent in the ",(0,r.kt)("inlineCode",{parentName:"p"},"threeDSOptions")," field to provide additional information to help customise the 3-D Secure experience or to help the ACS decide if a challenge is required."),(0,r.kt)("p",null,"Some additional information will be automatically provided by the Gateway from standard integration fields unless overridden by providing the associated option. The standard integration field associated with each option is shown in brackets below the options field name. The standard integration field should be used rather than the option, apart from the very rare circumstances where the two must have different values."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"For the Hosted Payment Page integration, the gateway will automatically provide the values marked as mandatory below. Passing information in the field ",(0,r.kt)("inlineCode",{parentName:"p"},"threeDSOptions")," is fully optional. ")),(0,r.kt)("p",null,"The options must be formatted using the record or serialised record formats detailed in the ",(0,r.kt)("a",{parentName:"p",href:"overview#fieldFormats"},"format guide"),"."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"browserAcceptHeader (deviceAcceptContent)"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"HTTP accept header sent from the Cardholder\u2019s browser. ",(0,r.kt)("br",null),(0,r.kt)("br",null)," ",(0,r.kt)("strong",{parentName:"td"},"For the hosted payment page integration, this value is automatically provided by the gateway."))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"browserIPAddress (remoteAddress)"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"IP v4 address of the Cardholder\u2019s browser.",(0,r.kt)("br",null),(0,r.kt)("br",null)," ",(0,r.kt)("strong",{parentName:"td"},"For the hosted payment page integration, this value is automatically provided by the gateway."))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"browserJavaEnabled (deviceCapabilities)"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Ability of the Cardholder\u2019s browser to execute Java.",(0,r.kt)("br",null)," ",(0,r.kt)("br",null),"Possible values are:",(0,r.kt)("br",null),"  true \u2013 browser can execute Java ",(0,r.kt)("br",null)," false \u2013 browser cannot execute Java",(0,r.kt)("br",null)," ",(0,r.kt)("br",null),"Boolean values must be sent as the strings \u2018true\u2019 or \u2018false\u2019 unless JSON serialisation is used",(0,r.kt)("br",null),(0,r.kt)("br",null)," ",(0,r.kt)("strong",{parentName:"td"},"For the hosted payment page integration, this value is automatically provided by the gateway."))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"browserJavaScriptEnabled (deviceCapabilities)"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Ability of the Cardholder\u2019s browser to execute JavaScript. ",(0,r.kt)("br",null)," ",(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null),"  true \u2013 browser can execute Javascript ",(0,r.kt)("br",null)," false \u2013 browser cannot execute Javascript",(0,r.kt)("br",null)," ",(0,r.kt)("br",null),"Boolean values must be sent as the strings \u2018true\u2019 or \u2018false\u2019 unless JSON serialisation is used",(0,r.kt)("br",null),(0,r.kt)("br",null)," ",(0,r.kt)("strong",{parentName:"td"},"For the hosted payment page integration, this value is automatically provided by the gateway."))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"browserLanguage (deviceAcceptLanguage)"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"The Cardholder\u2019s browser language. The browser language as defined in IETF BCP 47.",(0,r.kt)("br",null),(0,r.kt)("br",null)," ",(0,r.kt)("strong",{parentName:"td"},"For the hosted payment page integration, this value is automatically provided by the gateway."))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"browserScreenColourDepth or browserScreenColorDepth (deviceScreenResolution)"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"The screen colour depth of the Cardholder\u2019s browser. A value representing the bit depth of the colour palette, in bits per pixel, for displaying images.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are: 1, 4, 8, 15, 16, 24, 32, 48. ",(0,r.kt)("br",null),(0,r.kt)("br",null)," This value is not mandatory if the browser doesn\u2019t support JavaScript.",(0,r.kt)("br",null),(0,r.kt)("br",null)," ",(0,r.kt)("strong",{parentName:"td"},"For the hosted payment page integration, this value is automatically provided by the gateway."))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"browserScreenHeight (deviceScreenResolution)"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"The screen height of the Cardholder\u2019s browser.",(0,r.kt)("br",null),(0,r.kt)("br",null)," This value is not mandatory if the browser doesn\u2019t support JavaScript.",(0,r.kt)("br",null),(0,r.kt)("br",null)," ",(0,r.kt)("strong",{parentName:"td"},"For the hosted payment page integration, this value is automatically provided by the gateway."))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"browserScreenWidth (deviceScreenResolution)"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"The screen width of the Cardholder\u2019s browser.",(0,r.kt)("br",null),(0,r.kt)("br",null)," This value is not mandatory if the browser doesn\u2019t support JavaScript.",(0,r.kt)("br",null),(0,r.kt)("br",null)," ",(0,r.kt)("strong",{parentName:"td"},"For the hosted payment page integration, this value is automatically provided by the gateway."))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"browserTimeZone (deviceTimeZone)"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"The difference between UTC time and the cardholder's browser local time in minutes.",(0,r.kt)("br",null),(0,r.kt)("br",null)," ",(0,r.kt)("strong",{parentName:"td"},"For the hosted payment page integration, this value is automatically provided by the gateway."))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"browserUserAgent (deviceIdentity)"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"The User-Agent header provided by the Cardholder\u2019s browser.",(0,r.kt)("br",null),(0,r.kt)("br",null)," ",(0,r.kt)("strong",{parentName:"td"},"For the hosted payment page integration, this value is automatically provided by the gateway."))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"challengeWindowSize"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The dimensions of the challenge window that has been displayed to the cardholder. The ACS shall reply with content that is formatted to appropriately render in this window to provide the best possible user experience. ",(0,r.kt)("br",null),(0,r.kt)("br",null),"Possible values are: ",(0,r.kt)("br",null),"01 \u2013 250 x 400",(0,r.kt)("br",null)," 02 \u2013 390 x 400 (default) ",(0,r.kt)("br",null),"03 \u2013 500 x 600",(0,r.kt)("br",null)," 04 \u2013 600 x 400",(0,r.kt)("br",null)," 05 \u2013 Full screen")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"transactionType"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Identifies the type of transaction being authenticated. This field is required in some markets (eg for Merchants in Brazil).",(0,r.kt)("br",null)," ",(0,r.kt)("br",null)," Possible values are: ",(0,r.kt)("br",null)," 01 \u2013 Goods/ Service Purchase",(0,r.kt)("br",null),"  03 \u2013 Check Acceptance ",(0,r.kt)("br",null)," 10 \u2013 Account Funding ",(0,r.kt)("br",null)," 11 \u2013 Quasi-Cash Transaction",(0,r.kt)("br",null),"  28 \u2013 Prepaid Activation and Load")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"cardholderEmail (customerEmail)"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The Cardholder\u2019s email address.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"cardholderHomePhone (customerPhone)"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The Cardholder\u2019s home phone number specified in the following format: \u201c+CountryCode Subscriber\u201d (eg \u201c+44 1234567899\u201d).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"cardholderMobilePhone (customerMobile)"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The Cardholder\u2019s mobile phone number specified in the following format: \u201c+CountryCode Subscriber\u201d (eg \u201c+44 1234567899\u201d).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"cardholderName (customerName)"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Name of the Cardholder. Limited to the alphanumeric characters listed in EMV Book 4, Annex B.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"cardholderWorkPhone"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The Cardholder\u2019s work phone number specified in the following format: \u201c+CountryCode Subscriber\u201d (eg \u201c+44 1234567899\u201d).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"deliveryTimeframe"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Merchandise Delivery Timeframe.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," 01 \u2013 Electronic Delivery",(0,r.kt)("br",null)," 02 \u2013 Same day shipping",(0,r.kt)("br",null)," 03 \u2013 Overnight shipping ",(0,r.kt)("br",null),"04 \u2013 Two-day or more shipping")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"giftCardAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"For prepaid or gift card purchase, the purchase amount total of prepaid or gift card(s) in major units (for example, USD 123.45 is 123).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"giftCardCount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"For prepaid or gift card purchase, total count of individual prepaid or gift cards/codes purchased.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"giftCardCurrencyCode"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"For prepaid or gift card purchase, the currency code of the card as an ISO 4217 3-digit code or its 3 letter equivalent.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"instalmentPaymentData or installmentPaymentData"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates maximum number of authorizations permitted for instalment payments. Value must be greater than 1.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"merchantCategoryCode (merchantCategoryCode)"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Code describing the Merchant's type of business, product, or service.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"merchantCountryCode (countryCode)"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Country code of the merchant as an ISO 3166-1 3-digit code or its 2 or 3 letter equivalents.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"merchantFraudRate"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Merchant\u2019s fraud rate in the EEA (all EEA card fraud divided by all EEA card volumes) calculated as per PSD2 RTS. This value is sent to Mastercard only who will not calculate or validate the fraud score.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Value will be a numeric value, between 1 and 99, representing the fraud rate, such as:",(0,r.kt)("br",null)," 1 \u2013 less than or equal to 1 basis point (bp), which is 0.01%",(0,r.kt)("br",null)," 2 \u2013 between 1 bp + - and 6 bps",(0,r.kt)("br",null)," 3 \u2013 between 6 bps + - and 13 bps",(0,r.kt)("br",null)," 4 \u2013 between 13 bps + - and 25 bps",(0,r.kt)("br",null)," 5 \u2013 greater than 25 bps")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"merchantName (merchantName)"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Merchant name.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"paymentAccountAge"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Date that the payment account was enrolled in the cardholder's account with the 3DS Requestor. Accepted date format is YYYYMMDD.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"paymentAccountAgeIndicator"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates the length of time that the payment account was enrolled in the cardholder's account with the 3DS Requestor.",(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," 01 \u2013 No account (guest check-out)",(0,r.kt)("br",null)," 02 \u2013 Created during this transaction",(0,r.kt)("br",null)," 03 \u2013 Less than 30 days",(0,r.kt)("br",null)," 04 \u2013 30-60 days",(0,r.kt)("br",null)," 05 \u2013 More than 60 days")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"preOrderDate"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"For a pre-ordered purchase, the expected date that the merchandise will be available. Accepted date format is YYYYMMDD.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"preOrderPurchaseIndicator"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates whether Cardholder is placing an order for merchandise with a future availability or release date.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are: ",(0,r.kt)("br",null),"01 \u2013 Merchandise available",(0,r.kt)("br",null)," 02 \u2013 Future availability")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"priorAuthData"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Data that documents and supports a specific authentication process.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"priorAuthMethod"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Mechanism used by the Cardholder to previously authenticate to the 3DS Requestor.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Part of the optional 3DS Requestor Prior Transaction Authentication Information that contains information about a 3DS cardholder authentication that occurred prior to the current transaction.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," 01 \u2013 Frictionless authentication occurred by ACS",(0,r.kt)("br",null)," 02 \u2013 Cardholder challenge occurred by ACS",(0,r.kt)("br",null)," 03 \u2013 ACS verified",(0,r.kt)("br",null)," 04 \u2013 Other issuer methods")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"priorAuthTimestamp"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Date and time in UTC of the prior cardholder authentication. Accepted date format is YYYYMMDDHHMM.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"priorReference"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Provides additional information to the ACS to determine the best approach for handling a request. It contains an ACS Transaction ID for a prior authenticated transaction (for example, the first recurring transaction that was authenticated with the cardholder).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"recurringExpDate"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"This field contains the date after which no further authorizations shall be performed. The format of this field must be: YYYYMMDD.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"recurringFrequency"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"This field indicates the minimum number of days between authorizations.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"reorderItemsIndicator"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates whether the cardholder is reordering previously purchased merchandise.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," 01 \u2013 First time ordered",(0,r.kt)("br",null)," 02 \u2013 Reordered")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"reqAuthData"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Data that documents and supports a specific authentication process. In the current version of the specification, this data element is not defined in detail, however the intention is that for each 3DS Requestor Authentication Method, this field carry data that the ACS can use to verify the authentication process.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"reqAuthMethod"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Method used by the Cardholder to authenticate to the 3DS Requestor. ",(0,r.kt)("br",null),(0,r.kt)("br",null),"Part of the 3DS Requestor Authentication Information which contains optional information about how the cardholder authenticated during login to their 3DS Requestor account.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null),' 01 \u2013 No 3DS Requestor authentication occurred (ie cardholder "logged in" as guest) ',(0,r.kt)("br",null),"02 \u2013 Login to the cardholder account at the 3DS Requestor system using 3DS Requestor's own credentials",(0,r.kt)("br",null)," 03 \u2013 Login to the cardholder account at the 3DS Requestor system using federated ID ",(0,r.kt)("br",null),"04 \u2013 Login to the cardholder account at the 3DS Requestor system using issuer credentials ",(0,r.kt)("br",null),"05 \u2013 Login to the cardholder account at the 3DS Requestor system using third-party authentication",(0,r.kt)("br",null)," 06 \u2013 Login to the cardholder account at the 3DS Requestor system using FIDO Authenticator")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"reqAuthTimestamp"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Date and time in UTC of the cardholder authentication. Accepted date format is YYYYMMDDHHMM.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"requestorChallengeIndicator"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates whether a challenge is requested for this transaction. For example: you may be using this to obtain SCA and not want to be challenged as you have provided an exemption. This also allows you to request a challenge when adding a card to a wallet or to follow mandates.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are: ",(0,r.kt)("br",null),"01 \u2013 No preference ",(0,r.kt)("br",null),"02 \u2013 No challenge requested ",(0,r.kt)("br",null),"03 \u2013 Challenge requested: 3DS Requestor Preference",(0,r.kt)("br",null)," 04 \u2013 Challenge requested: Mandate ",(0,r.kt)("br",null),"05 \u2013 No challenge requested (TRA is already performed)",(0,r.kt)("br",null)," 06 \u2013 No challenge requested (data share only) ",(0,r.kt)("br",null),"07 \u2013 No challenge requested (SCA is already performed) ",(0,r.kt)("br",null),"08 \u2013 No challenge requested (utilize whitelist exemption) ",(0,r.kt)("br",null),"09 \u2013 Challenge requested (whitelist prompt requested) ",(0,r.kt)("br",null),(0,r.kt)("br",null),"Values 05 to 09 are for protocol version 2.2.0 but will be accepted for 2.1.0 and 05 to 08 will be downgraded to 02, and 09 to 01. Values 05 to 07 will be passed to Mastercard as part of their 'Merchant Data' extension. Values 08 and 09 are only valid for protocol version 2.2.0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"requestorID"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Directory server assigned 3DS Requestor identifier. (Default on file)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"requestorName"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Directory server assigned 3DS Requestor name. (Default on file)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"requestorURL (merchantWebsite)"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"3DS Requestor website or customer care site.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"accountAgeIndicator"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Length of time that the cardholder has had the account with the 3DS Requestor.",(0,r.kt)("br",null),(0,r.kt)("br",null),"  Possible values are:",(0,r.kt)("br",null),"  01 \u2013 No account (guest check-out)",(0,r.kt)("br",null),"  02 \u2013 Created during this transaction",(0,r.kt)("br",null),"  03 \u2013 Less than 30 days",(0,r.kt)("br",null),"  04 \u2013 30-60 days ",(0,r.kt)("br",null)," 05 \u2013 More than 60 days")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"accountChangeDate"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Date that the cardholder's account with the 3DS Requestor was last changed. Accepted date format is YYYYMMDD.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"accountChangeIndicator"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Length of time since the cardholder's account information with the 3DS Requestor was last changed.",(0,r.kt)("br",null),(0,r.kt)("br",null),"  Possible values are:",(0,r.kt)("br",null),"  01 \u2013 Changed during this transaction.",(0,r.kt)("br",null),"  02 \u2013 Less than 30 days",(0,r.kt)("br",null),"  03 \u2013 30-60 days ",(0,r.kt)("br",null)," 04 \u2013 More than 60 day")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"accountDate"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Date that the cardholder opened the account with the 3DS Requestor. Accepted date format is YYYYMMDD.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"accountDayTransactions"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Number of transactions (successful and abandoned) for this cardholder account with the 3DS Requestor across all payment accounts in the previous 24 hours.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"accountId"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Identifier for any Cardholder\u2019s account with the Merchant.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"accountPasswordChangeDate"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Date that cardholder's account with the 3DS Requestor had a password change or account reset. Accepted date format is YYYYMMDD.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"accountPasswordChangeIndicator"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates the length of time since the cardholder's account with the 3DS Requestor had a password change or account reset. ",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are: ",(0,r.kt)("br",null),"01 \u2013 No change ",(0,r.kt)("br",null),"02 \u2013 Changed during this transaction",(0,r.kt)("br",null)," 03 \u2013 Less than 30 days",(0,r.kt)("br",null)," 04 \u2013 30-60 days",(0,r.kt)("br",null)," 05 \u2013 More than 60 days")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"accountProvisioningAttempts"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Number of account provisioning attempts in the last 24 hours.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"accountPurchaseCount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Number of purchases with this cardholder account during the previous six months.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"accountType"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates the type of account.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," 01 \u2013 Not applicable",(0,r.kt)("br",null)," 02 \u2013 Credit ",(0,r.kt)("br",null),"03 \u2013 Debit")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"accountYearTransactions"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Number of transactions (successful and abandoned) for this cardholder account with the 3DS Requestor across all payment accounts in the previous year.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"accountYearTransactions"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Number of transactions (successful and abandoned) for this cardholder account with the 3DS Requestor across all payment accounts in the previous year.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"acquirerBIN"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Acquirer bank identification number. (Default on file)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"acquirerCountryCode"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Acquirer country code when the Acquirer country differs from the Merchant country and the Acquirer is in the EEA (this could mean that the transaction is covered by PSD2). (Default on file)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"acquirerMerchantID"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Acquirer-assigned merchant identifier. (Default on file)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"acsChallengeMandatedIndicator"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Indication of whether a challenge is required for the transaction to be authorized due to local/regional mandates or other variables.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"addressMatch"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates to the ACS whether the cardholder shipping address and billing address are the same. ",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," Y \u2013 Shipping address matches billing address.",(0,r.kt)("br",null)," N \u2013 Shipping address does not match billing address.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"authenticationIndicator"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Provides additional information to the ACS to determine the best approach for handing an authentication request.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null),"  01 \u2013 Payment - default ",(0,r.kt)("br",null)," 02 \u2013 Recurring ",(0,r.kt)("br",null)," 03 \u2013 Instalment",(0,r.kt)("br",null),"  04 \u2013 Add Card ",(0,r.kt)("br",null)," 05 \u2013 Maintain Card ",(0,r.kt)("br",null)," 06 \u2013 Verify Cardholder",(0,r.kt)("br",null),"  07 \u2013 Billing Agreement")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"billingAddressCity (customerTown)"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The city of the address. Maximum length is 50 characters.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"billingAddressCountryCode (customerCountryCode)"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The country of the address as an ISO 3166-1 3-digit code or its 2 or 3 letter equivalents.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"billingAddressLine1 (customerAddress)"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The first line of the street address or equivalent local portion of the address. Maximum length is 50 characters.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"billingAddressLine2"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The seconf line of the street address or equivalent local portion of the address. Maximum length is 50 characters.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"billingAddressLine3"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The third line of the street address or equivalent local portion of the address. Maximum length is 50 characters.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"billingAddressPostcode (customerPostcode)"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The ZIP or other postal code of the address. Maximum length is 16 characters.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"billingAddressState"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The state or province of the address as an ISO 3166-2 country subdivision code. Maximum length is 3 characters.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"secureCorporatePaymentIndicator"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates dedicated payment processes and procedures were used, potential secure corporate payment exemption applies.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"serverOperatorID"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"3DS Server identifier. (Default on file)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"serverRefNumber"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Assigned server reference number. (Default on file)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shipAddressUsageDate"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Date when the shipping address used for this transaction was first used with the 3DS Requestor. Accepted date format is YYYYMMDD.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shipAddressUsageIndicator"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"DIndicates the length of time since the shipping address used for this transaction was first used with the 3DS Requestor.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," 01 \u2013 This transaction",(0,r.kt)("br",null)," 02 \u2013 Less than 30 days ",(0,r.kt)("br",null),"03 \u2013 30-60 days",(0,r.kt)("br",null)," 04 \u2013 More than 60 days")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shipIndicator"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates shipping method chosen for the transaction. Merchants must choose the Shipping Indicator code that most accurately describes the cardholder's specific transaction, not their general business. If one or more items are included in the sale, the Shipping Indicator code for the physical goods is used, or if all digital goods, the Shipping Indicator code that describes the most expensive item. ",(0,r.kt)("br",null),(0,r.kt)("br",null),"Possible values are: ",(0,r.kt)("br",null),"01 \u2013 Ship to cardholder's billing address ",(0,r.kt)("br",null),"02 \u2013 Ship to another verified address on file with merchant ",(0,r.kt)("br",null),"03 \u2013 Ship to address that is different than the cardholder's billing address ",(0,r.kt)("br",null),'04 \u2013 "Ship to Store" / Pick-up at local store (Store address shall be populated in shipping address fields)',(0,r.kt)("br",null)," 05 \u2013 Digital goods (includes online services, electronic gift cards and redemption codes)",(0,r.kt)("br",null)," 06 \u2013 Travel and Event tickets, not shipped ",(0,r.kt)("br",null),"07 \u2013 Other (for example, Gaming, digital services not shipped, emedia subscriptions, etc.)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shipNameIndicator"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates if the Cardholder Name on the account is identical to the shipping Name used for this transaction.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," 01 \u2013 Account Name identical to shipping Name ",(0,r.kt)("br",null),"02 \u2013 Account Name different than shipping Name")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shippingAddressCity (deliveryTown)"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The city of the address. The maximum length is 50 characters.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shippingAddressCountryCode (deliveryCountryCode)"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The country of the address as an ISO 3166-1 3-digit code or its 2 or 3 letter equivalents.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shippingAddressLine1 (deliveryAddress)"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The first line of the street address or equivalent local portion of the address. Maximum length is 50 characters.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shippingAddressLine2"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The second line of the street address or equivalent local portion of the address. Maximum length is 50 characters.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shippingAddressLine3"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The third line of the street address or equivalent local portion of the address. Maximum length is 50 characters.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shippingAddressPostcode (deliveryPostcode)"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The ZIP or other postal code of the address. Maximum length is 16 characters.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shippingAddressState"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The state or province of the address as an ISO 3166-2 country subdivision code. Maximum length is 3 characters.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"suspiciousAccountActivity"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates whether the 3DS Requestor has experienced suspicious activity (including previous fraud) on the cardholder account.",(0,r.kt)("br",null)," ",(0,r.kt)("br",null),"  Possible values are:",(0,r.kt)("br",null),"  01 \u2013 No suspicious activity has been observed ",(0,r.kt)("br",null)," 02 \u2013 Suspicious activity has been observed")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"whitelistStatus"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Whitelist status. ",(0,r.kt)("br",null),(0,r.kt)("br",null),"Possible values are: ",(0,r.kt)("br",null),"Y \u2013 3DS Requestor is whitelisted by cardholder",(0,r.kt)("br",null)," N \u2013 3DS Requestor is not whitelisted by cardholder")))),(0,r.kt)("h2",{id:"3dSecureAuthenticationData"},"3-D Secure Authentication Data"),(0,r.kt)("p",null,"The 3-D Secure system uses various data fields to report the authentication status of the Cardholder. Each 3-D Secure version may use slightly different terminology for the fields and have slightly different values but for ease of use the Gateway uses the terminology and values as described below."),(0,r.kt)("p",null,"The field\u2019s values would normally be populated by the Gateway\u2019s 3DS Server component (The 3DS Server is the Gateway/Merchant component that provides the interface with the 3DS Directory Server), however you may choose to use your own 3DS Server component and provide the values."),(0,r.kt)("h3",{id:"3d-secure-enrolment-status"},"3D Secure enrolment status"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"threeDSEnrolled")," field indicates if the card is enrolled in the 3-D Secure program."),(0,r.kt)("p",null,"The value is determined if the card number is within one of the enrolled ranges downloaded daily from the Directory Server using a Preparation Request/Response (PReq/PRes) message."),(0,r.kt)("p",null,"The field can contain one of the following values:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Y \u2013 Enrolled"),". The card is enrolled in the 3-D Secure program and the payer is eligible for authentication\nprocessing."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"N - Not Enrolled"),". The checked card is eligible for the 3-D Secure (it is within the card association\u2019s range of accepted cards) but the card issuing bank does not participate in the 3-D Secure program. If the Cardholder later disputes the purchase, the issuer may not submit a chargeback to you."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"U - Unable To Verify Enrolment"),". The card associations were unable to verify whether the Cardholder is registered. As the card is ineligible for 3-D Secure, you can choose to accept the card nonetheless and precede the purchase as non-authenticated and submits authorisation with ECI 07."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"E - Error Verifying Enrolment"),". The Gateway encountered an error. This card is flagged as 3-D Secure ineligible. The card can be accepted for payment at your discretion."),(0,r.kt)("h3",{id:"3ds-authentication-status"},"3DS Authentication status"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"threeDSAuthenticated")," field indicates if the cardholder has been authenticated by the 3-D Secure program."),(0,r.kt)("p",null,"The value is provided by the Directory Server either on requesting authentication in the Authentication Response (ARes) message, in the case of a frictionless flow, or after a Cardholder\nchallenge in the Result Request (RReq) message, in the case of a challenge flow."),(0,r.kt)("p",null,"The field can contain one of the following values:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Y - Authentication Successful"),". The Issuer has authenticated the Cardholder by verifying the identity information or password. A CAVV and an ECI of 5 is returned. The card is accepted for payment and authentication data passed to authorisation processing."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"A - Attempted Authentication"),". A proof of authentication attempt was generated. The Cardholder is not participating, but the attempt to authenticate was recorded. The card can be accepted for payment at your discretion and authentication data passed to authorisation processing."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"N - Not Authenticated"),". The Cardholder did not complete authentication and the card should not be accepted for payment."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"R \u2013 Rejected By Issuer"),". The Issuer rejected the transaction and must not be accepted for payment."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"D \u2013 Decoupled Challenge Required"),". Decoupled authentication confirmed."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"I \u2013 Information Only"),". 3DS Requestor challenge preference acknowledged."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"U - Unable To Authenticate"),". The authentication was not completed due to technical or another problem. A transmission error prevented authentication from completing. The card can be accepted for payment at your discretion, but no authentication data will be passed on to authorisation processing."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"E - Error Checking Authentication"),". The Gateway encountered an error. The card can be accepted for payment at your discretion, but no authentication data will be passed on to authorisation processing."),(0,r.kt)("h3",{id:"3ds-transaction-identifier"},"3DS Transaction Identifier"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"threeDSXID")," field provides a unique value to identify the transaction through the 3-D Secure system.\nThe value is provided by the Directory Server and is a 36-character universally unique identifier (UUID) as defined in IETF RFC 4122."),(0,r.kt)("h3",{id:"3ds-electronic-commerce-indicator"},"3DS Electronic Commerce Indicator"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"threeDSECI")," field indicates the security status of the transaction after the Cardholder has been authenticated or attempted authentication."),(0,r.kt)("p",null,"The value is provided by the Directory Server either on requesting authentication in the Authentication Response (ARes) message, in the case of a frictionless flow, or after a Cardholder challenge in the Result Request (RReq) message, in the case of a challenge flow."),(0,r.kt)("p",null,"The value is always present if the ",(0,r.kt)("inlineCode",{parentName:"p"},"threeDSAuthenticated")," field has a value of Y (successful authentication), or A (attempted authentication) but can be present at other times."),(0,r.kt)("p",null,"The field can contain one of the following 2-digit values (the values are shown as pairs, the first value is for Visa and other Card Schemes and the second for Mastercard only):"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"05/02")," - Both cardholder and card issuing bank are 3DS enabled. 3DS card authentication is successful."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"06/01")," - Either cardholder or card issuing bank is not 3DS enrolled. 3DS card authentication is unsuccessful, in sample situations as:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"3DS cardholder not enrolled."),(0,r.kt)("li",{parentName:"ul"},"Card issuing bank is not 3DS ready."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"07/00")," - Authentication is unsuccessful or not attempted. The card is either a non-3DS card or card issuing bank does not handle it as a 3DS transaction.")),(0,r.kt)("h3",{id:"3ds-cardholder-authentication-verification-value"},"3DS Cardholder Authentication Verification Value"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"threeDSCAVV")," field provides proof that the Cardholder has been authenticated or attempted authentication."),(0,r.kt)("p",null,"The value is provided by the Directory Server either on requesting authentication in the Authentication Response (ARes) message, in the case of a frictionless flow, or after a Cardholder challenge in the Result Request (RReq) message, in the case of a challenge flow."),(0,r.kt)("p",null,"The value is present if the ",(0,r.kt)("inlineCode",{parentName:"p"},"threeDSAuthenticated")," field has a value of Y (successful authentication), or A (attempted authentication)."),(0,r.kt)("p",null,"The field will contain a 28-character Base-64 encoded value (32-characters for Mastercard)."),(0,r.kt)("h2",{id:"scaUsing3dSecure"},"SCA Using 3-D Secure"),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Note that the below mentioned policies are set automatically on each merchant account and there is no need of extra development unless you want to use SCA exemptions.")),(0,r.kt)("p",null,"3-D Secure can be used to provide the necessary Strong Customer Authentication. You have a choice of how and when to use 3-D Secure to satisfy SCA:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Authentication Before Authorisation"),"\nYou submit payments using 3-D Secure for authentication up front so that the authorisation will be submitted to the Acquirer with the appropriate authentication data showing that SCA was sought. You may pass an exemption indicator (an exemption can be explicitly requested using the ",(0,r.kt)("inlineCode",{parentName:"p"},"scaExemption")," field) causing the Gateway to automatically request a frictionless flow (the Gateway will use the correct \u2018requestorChallengeIndicator\u2019 unless overridden by any value passed in the request)."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Authentication After Authorisation, when requested by the Issuer (Bypass)"),"\nYou submit payments without 3-D Secure authentication but with an exemption indicator (an exemption can be explicitly requested using the ",(0,r.kt)("inlineCode",{parentName:"p"},"scaExemption")," field), if required, and the authorisation will be submitted to the Acquirer with no authentication data. If the Issuer approves the authorisation, then no further additional authentication is needed. However, if the Issuer refuses the authorisation due to SCA being required (the issuer will soft decline the transaction indicating SCA is required) then transaction can be repeated but this time using 3-D Secure (you are advised to send a ",(0,r.kt)("inlineCode",{parentName:"p"},"threeDSOptions")," \u2018requestorChallengeIndicator\u2019 value of 4 to mandate a challenge) and no exception indicator."),(0,r.kt)("p",null,"The Gateway can support both choices and in the case of the second choice it can automatically perform the repeat transaction on your behalf."),(0,r.kt)("p",null,"The choice of how and when authentication is performed is indicated by selecting a 3-D Secure Policy in the Merchant Management System or by sending the ",(0,r.kt)("inlineCode",{parentName:"p"},"threeDSPolicy")," field in the request."),(0,r.kt)("p",null,"The policies available are:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Authenticate Before Authorisation or When Issuer Requests (Default)"),(0,r.kt)("li",{parentName:"ol"},"Authenticate Before Authorisation Only"),(0,r.kt)("li",{parentName:"ol"},"Authenticate When Issuer Requests Only (Bypass)"),(0,r.kt)("li",{parentName:"ol"},"Authenticate Before Authorisation or When Issuer Requests ","[PSD2]"),(0,r.kt)("li",{parentName:"ol"},"Authenticate Before Authorisation Only ","[PSD2]"),(0,r.kt)("li",{parentName:"ol"},"Authenticate When Issuer Requests Only ","[PSD2]"," (Bypass)")),(0,r.kt)("p",null,"The ","[PSD2]"," policies will perform 3-D Secure authentication only if the transaction falls within the jurisdiction of the European Union's Payment Services Directive 2, otherwise it will behave as if 3-D Secure had not been required."),(0,r.kt)("h3",{id:"sca-soft-declines"},"SCA Soft-Declines"),(0,r.kt)("p",null,"There are two main types of card transaction declines: hard declines and soft declines."),(0,r.kt)("p",null,"Hard declines happen when the issuing bank rejects the transaction. Examples include attempting to use a card that has been reported lost or stolen, or the card has expired. Hard declines are permanent, so the payment should not be retried."),(0,r.kt)("p",null,"Soft declines are temporary authorisation failures. Around 80% to 90% of all declines fall into this category. They occur for a host of reasons including the need to authenticate the Cardholder further or because there are issues with the technical infrastructures that process the transaction. Soft declines are temporary, meaning you can process the transaction again after meeting the requirements that led to the decline the first time around."),(0,r.kt)("p",null,"If you do not obtain SCA on an eligible payment the issuer may soft decline the payment insisting that SCA be obtained. In which case a ",(0,r.kt)("inlineCode",{parentName:"p"},"responseCode")," of 65 will be returned by the Gateway and you can choose to resubmit the payment with SCA if required."),(0,r.kt)("p",null,"With the Handpoint Gateway you can use 3-D Secure to obtain SCA and automatically retry payments that have been soft declined for this reason. If 3-D Secure has been used to provide SCA and the issuer still declines insisting that SCA be obtained, then the Gateway will return a normal decline ",(0,r.kt)("inlineCode",{parentName:"p"},"responseCode")," of 5 to prevent an infinite loop of obtaining SCA and then being declined for lack of SCA."),(0,r.kt)("h3",{id:"scaExemptions"},"Exemptions to Strong Customer Authentication"),(0,r.kt)("p",null,"There are some e-commerce transactions which are out of scope of the regulation, and others that may be exempt."),(0,r.kt)("p",null,"Obtaining Strong Customer Authentication can add friction and increase Customer drop-off and therefore you should make use of exemptions to reduce the number of times you will need to authenticate a Customer."),(0,r.kt)("p",null,"However, the bank has the right to refuse any requested exemption and decline the payment insisting that SCA be obtained. The following exemptions are available:"),(0,r.kt)("h4",{id:"mail-order--telephone-order-payments"},"Mail Order / Telephone Order Payments"),(0,r.kt)("p",null,"Card details collected via mail or over the phone (MOTO) fall outside of the scope of SCA and do not require authentication. You can flag such payments by passing a value of \u20182\u2019 in the ",(0,r.kt)("inlineCode",{parentName:"p"},"type")," request field."),(0,r.kt)("h4",{id:"merchant-initiated-transactions"},"Merchant Initiated Transactions"),(0,r.kt)("p",null,"Payments made with saved cards when the Customer is not present in the payment flow may qualify as ",(0,r.kt)("a",{parentName:"p",href:"credentialsonfile"},"Merchant Initiated Transactions"),". These payments fall outside of the scope of SCA however it is still up to the bank to decide whether authentication is needed for the payment."),(0,r.kt)("p",null,"You can flag such payments by using an ",(0,r.kt)("inlineCode",{parentName:"p"},"rtAgreementType")," that signifies the transaction as being Merchant Initiated."),(0,r.kt)("h4",{id:"low-value-exemption"},"Low Value Exemption"),(0,r.kt)("p",null,"Payments below \u20ac30 are considered low value and are generally exempt from authentication. However, if the Customer initiates more than five consecutive low value payments or if the total payments value exceeds \u20ac100) then SCA will be required."),(0,r.kt)("p",null,"You can request this exemption by passing a value of \u2018lowvalue\u2019 in the ",(0,r.kt)("inlineCode",{parentName:"p"},"scaExemption")," request field, or it may be automatically applied by the Issuer."),(0,r.kt)("h4",{id:"trusted-beneficiary-exemption"},"Trusted Beneficiary Exemption"),(0,r.kt)("p",null,"The Customer can opt to trust you as a Merchant during their first authentication, then subsequent payments with you are likely to be exempt from future SCA."),(0,r.kt)("p",null,"You can request this exemption by passing a value of \u2018trusted\u2019 in the ",(0,r.kt)("inlineCode",{parentName:"p"},"scaExemption")," request field to allow this trust to be taken into consideration."),(0,r.kt)("h4",{id:"trusted-risk-analysis-tra-exemption"},"Trusted Risk Analysis (TRA) Exemption"),(0,r.kt)("p",null,"If the payment provider, having in place effective risk analysis tools, assesses that the fraud risk associated with the payment is low then they can allow this exemption."),(0,r.kt)("p",null,"You can request this exemption by passing a value of \u2018risk\u2019 in the ",(0,r.kt)("inlineCode",{parentName:"p"},"scaExemption")," request field if agreed to by the payment provider."),(0,r.kt)("h4",{id:"secured-corporate-payment-exemption"},"Secured Corporate Payment Exemption"),(0,r.kt)("p",null,"Payments initiated by a business rather than a Consumer and processed through a secured dedicated payment protocol can be exempt from SCA provided alternative controls are sufficiently secure."),(0,r.kt)("p",null,"You can request this exemption by passing a value of \u2018corporate\u2019 in the ",(0,r.kt)("inlineCode",{parentName:"p"},"scaExemption")," request field to indicate such a secure transaction."),(0,r.kt)("h4",{id:"delegated-authentication-exemption"},"Delegated Authentication Exemption"),(0,r.kt)("p",null,"If you already require your Customers to perform sufficient authentication on your website, such as secure account logins etc., then you can use this exemption to request that further SCA is not required."),(0,r.kt)("p",null,"You can request this exemption by passing a value of \u2018delegated\u2019 in the ",(0,r.kt)("inlineCode",{parentName:"p"},"scaExemption")," request field to indicate such a secure transaction."))}c.isMDXComponent=!0},5884:function(e,t,a){t.Z=a.p+"assets/images/hosted-integration-flow-f03a5445596cc77b41c23123a291219b.png"}}]);