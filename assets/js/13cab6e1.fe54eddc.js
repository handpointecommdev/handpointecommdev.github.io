"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[615],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>h});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),d=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},u=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),p=d(a),c=r,h=p["".concat(s,".").concat(c)]||p[c]||m[c]||l;return a?n.createElement(h,i(i({ref:t},u),{},{components:a})):n.createElement(h,i({ref:t},u))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[p]="string"==typeof e?e:r,i[1]=o;for(var d=2;d<l;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},3064:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>l,metadata:()=>o,toc:()=>d});var n=a(7462),r=(a(7294),a(3905));const l={sidebar_position:6},i="Digital Wallets and Alternative Payment Methods",o={unversionedId:"digitalwalletsandapms",id:"digitalwalletsandapms",title:"Digital Wallets and Alternative Payment Methods",description:"Apple Pay / Google Pay",source:"@site/hostedpaymentfields/digitalwalletsandapms.md",sourceDirName:".",slug:"/digitalwalletsandapms",permalink:"/hostedpaymentfields/digitalwalletsandapms",draft:!1,tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Credentials on file & Recurring Transactions",permalink:"/hostedpaymentfields/credentialsonfile"},next:{title:"Advanced Gateway Functionalities",permalink:"/hostedpaymentfields/advancedfunctionalities"}},s={},d=[{value:"Apple Pay / Google Pay",id:"apple-pay--google-pay",level:2},{value:"Benefits",id:"benefits",level:4},{value:"Limitations",id:"limitations",level:4},{value:"Configuration",id:"configuration",level:4},{value:"Apple Pay configuration",id:"apple-pay-configuration",level:3},{value:"Google Pay configuration",id:"google-pay-configuration",level:3},{value:"Request Fields",id:"request-fields",level:3},{value:"Response Fields",id:"response-fields",level:3},{value:"Digital Wallet Tokens",id:"digital-wallet-tokens",level:3},{value:"FPAN/DPAN tokens",id:"fpandpan-tokens",level:4},{value:"AVS/CV2 Checking",id:"avscv2-checking",level:4},{value:"3-D Secure Authentication",id:"3-d-secure-authentication",level:4},{value:"Risk Checking",id:"risk-checking",level:4},{value:"Transaction Lifecycle and Recurring Transactions",id:"transaction-lifecycle-and-recurring-transactions",level:4},{value:"PPRO Transactions (APMs)",id:"ppro-transactions-apms",level:2},{value:"Benefits",id:"benefits-1",level:4},{value:"Limitations",id:"limitations-1",level:4},{value:"Implementation",id:"implementation",level:3},{value:"Payment Request",id:"payment-request",level:3},{value:"Payment Specific Fields",id:"pproPaymentSpecificFields",level:4},{value:"Request Fields",id:"request-fields-1",level:4},{value:"Payment Response",id:"payment-response",level:3},{value:"Initial Response Fields",id:"initial-response-fields",level:4},{value:"Completion Response Fields",id:"completion-response-fields",level:4},{value:"Payment Method Tag",id:"pproPaymentMethodTag",level:3},{value:"Checkout Options",id:"pproCheckoutOptions",level:3},{value:"Notifications and &quot;Tendered&quot; Payments",id:"notifications-and-tendered-payments",level:3},{value:"PayPal Transactions",id:"paypal-transactions",level:2},{value:"Benefits",id:"benefits-2",level:4},{value:"Limitations",id:"limitations-2",level:4},{value:"Implementation",id:"implementation-1",level:3},{value:"Initial Request (Checkout Preparation)",id:"initial-request-checkout-preparation",level:3},{value:"Request Fields",id:"request-fields-2",level:4},{value:"Response Fields",id:"response-fields-1",level:4},{value:"Continuation Request (Checkout Details and Authorise)",id:"continuation-request-checkout-details-and-authorise",level:3},{value:"Request Fields",id:"request-fields-3",level:4},{value:"Response Fields",id:"response-fields-2",level:4},{value:"Separate Checkout Details and Authorisation Requests",id:"separate-checkout-details-and-authorisation-requests",level:3},{value:"Checkout Options",id:"paypalCheckoutOptions",level:3},{value:"Purchase Details",id:"purchase-details",level:3},{value:"Checkout Details",id:"checkoutDetails",level:3},{value:"Transaction Lifecycle",id:"transaction-lifecycle",level:3},{value:"Order",id:"order",level:4},{value:"Authorise",id:"authorise",level:4},{value:"Sale",id:"sale",level:4},{value:"Capture",id:"capture",level:4},{value:"Refund",id:"refund",level:4},{value:"Cancel",id:"cancel",level:4},{value:"Pending Payments",id:"pending-payments",level:4},{value:"Reference Transactions",id:"reference-transactions",level:3},{value:"Amazon Pay Transactions",id:"amazon-pay-transactions",level:2},{value:"Benefits",id:"benefits-3",level:4},{value:"Limitations",id:"limitations-3",level:4},{value:"Implementation",id:"implementation-2",level:3},{value:"Initial Request (Checkout Preparation)",id:"initial-request-checkout-preparation-1",level:3},{value:"Request Fields",id:"request-fields-4",level:4},{value:"Response Fields",id:"response-fields-3",level:4},{value:"Continuation Request (Checkout Details and Authorise)",id:"continuation-request-checkout-details-and-authorise-1",level:3},{value:"Request Fields",id:"request-fields-5",level:4},{value:"Response Fields",id:"response-fields-4",level:4},{value:"Separate Checkout Details and Authorisation Requests",id:"separate-checkout-details-and-authorisation-requests-1",level:3},{value:"Checkout Options",id:"AmazonPayCheckoutOptions",level:3},{value:"Checkout Details",id:"checkoutDetails",level:3},{value:"Transaction Lifecycle",id:"transaction-lifecycle-1",level:3},{value:"Capture",id:"capture-1",level:4},{value:"Refund Sale",id:"refund-sale",level:4},{value:"Reference Transactions",id:"reference-transactions-1",level:3},{value:"Pay by Bank app (PBBA) Transactions",id:"pay-by-bank-app-pbba-transactions",level:2},{value:"Benefits",id:"benefits-4",level:4},{value:"Limitations",id:"limitations-4",level:4},{value:"Implementation",id:"implementation-3",level:3},{value:"Payment Request",id:"payment-request-1",level:3},{value:"Request Fields",id:"request-fields-6",level:4},{value:"Response Fields",id:"response-fields-5",level:4},{value:"Checkout Options",id:"pbbaCheckoutOptions",level:3},{value:"Checkout Details",id:"checkoutDetails",level:3},{value:"Refunds",id:"refunds",level:3},{value:"SecurePlus Transactions",id:"secureplus-transactions",level:2},{value:"Benefits",id:"benefits-5",level:4},{value:"Limitations",id:"limitations-5",level:4},{value:"Implementation",id:"implementation-4",level:3},{value:"Request Fields",id:"request-fields-7",level:3},{value:"Response Fields",id:"response-fields-6",level:3}],u={toc:d},p="wrapper";function m(e){let{components:t,...a}=e;return(0,r.kt)(p,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"digital-wallets-and-alternative-payment-methods"},"Digital Wallets and Alternative Payment Methods"),(0,r.kt)("h2",{id:"apple-pay--google-pay"},"Apple Pay / Google Pay"),(0,r.kt)("p",null,"The Gateway supports payments made using the following Digital Wallets, Apple Pay and Google Pay\u2122. These wallets can be used to enhance mobile purchasing experiences for\ncustomers with supported devices and produce a payment token which can be passed to the Gateway instead of the Cardholder\u2019s actual card details."),(0,r.kt)("p",null,"You can use these wallets with any Merchant Account that has been configured to accept them."),(0,r.kt)("p",null,"For more information on how to accept payment tokens, please contact customer support."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Digital wallet support is not available with all Acquirers and must be enabled on your Merchant Account before they can be used. Please contact support to find out whether your Acquirer supports Digital Wallets and if the functionality can be enabled on your Merchant Account.")),(0,r.kt)("h4",{id:"benefits"},"Benefits"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The payment details are stored externally to the Gateway and can be used with any Merchant that supports the appropriate payment tokens."),(0,r.kt)("li",{parentName:"ul"},"Customers can select from previously stored payment details, making the checkout process more streamlined, resulting in fewer abandoned carts and thus increasing sales."),(0,r.kt)("li",{parentName:"ul"},"Compatible with existing card base fraud solutions such as Address Verification Service (AVS), 3-D Secure and third-party fraud providers."),(0,r.kt)("li",{parentName:"ul"},"There are no extra costs to add these payment methods to your Gateway account."),(0,r.kt)("li",{parentName:"ul"},"The transactions are controlled within the Merchant Management System (MMS) in the same manner as normal card transactions.")),(0,r.kt)("h4",{id:"limitations"},"Limitations"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Your Customer will need a digital wallet enabled device with some stored card details in\norder to make full use of this payment method."),(0,r.kt)("li",{parentName:"ul"},"The device needs to be integrated with the Gateway using third-party provided software."),(0,r.kt)("li",{parentName:"ul"},"Repeat transactions using the retrieved payment details are supported.")),(0,r.kt)("h4",{id:"configuration"},"Configuration"),(0,r.kt)("p",null,"The Merchant Account being used for the payments must be configured with your Digital Wallet credentials so that the Gateway can decrypt the payment token."),(0,r.kt)("h3",{id:"apple-pay-configuration"},"Apple Pay configuration"),(0,r.kt)("p",null,"Apple Pay requires the Gateway to generate public/private key pair and then the public key must be shared with your Apple Pay enabled application in the guise of an Apple Pay payment process certificate."),(0,r.kt)("p",null,"To configure an Apple Pay ",(0,r.kt)("a",{parentName:"p",href:"https://help.apple.com/developer-account/#/devb2e62b839?sub=devf31990e3f"},"payment processing certificate")," you must have enrolled in the ",(0,r.kt)("a",{parentName:"p",href:"https://developer.apple.com/programs/"},"Apple Developer Program"),"and ",(0,r.kt)("a",{parentName:"p",href:"https://help.apple.com/developer-account/#/devb2e62b839?sub=dev103e030bb"},"created a unique Apple Pay merchant identifier"),"."),(0,r.kt)("p",null,"The payment processing certificate is associated with your merchant identifier and used to encrypt payment information. The certificate expires every 25 months. If the certificate is revoked, you can recreate it."),(0,r.kt)("p",null,"You would normally use the Merchant Management System (MMS) to configure your ",(0,r.kt)("a",{parentName:"p",href:"https://help.apple.com/developer-account/#/devb2e62b839?sub=devf31990e3f"},"payment processing certificate")," by following the steps outlined below:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Open the ",(0,r.kt)("a",{parentName:"li",href:"https://idmsa.apple.com/IDMSWebAuth/signin?appIdKey=891bd3417a7776362562d2197f89480a8547b108fd934911bcbea0110d07f757&path=%2Faccount%2Fresources%2F&rv=1"},"Apple Developer Certificates, Identifiers & Profiles")," webpage and select\n'Identifiers' from the sidebar."),(0,r.kt)("li",{parentName:"ol"},"Under 'Identifiers', select 'Merchant IDs' using the filter in the top-right."),(0,r.kt)("li",{parentName:"ol"},"On the right, select your merchant identifier."),(0,r.kt)("li",{parentName:"ol"},"Under 'Apple Pay Payment Processing Certificate', click 'Create Certificate'."),(0,r.kt)("li",{parentName:"ol"},"Download our certificate signing request (CSR) from the MMS and save to a file."),(0,r.kt)("li",{parentName:"ol"},"Click 'Choose File' and select the CSR you just downloaded."),(0,r.kt)("li",{parentName:"ol"},"Click 'Continue'."),(0,r.kt)("li",{parentName:"ol"},"Click 'Download' to download the payment processing certificate and save to a file."),(0,r.kt)("li",{parentName:"ol"},"Upload the payment processing certificate to the MMS.")),(0,r.kt)("h3",{id:"google-pay-configuration"},"Google Pay configuration"),(0,r.kt)("p",null,"Google Pay requires no specific configuration however you must use your Google Merchant Identifier, our Gateway identifier of \u2018crst\u2019, and the correct Merchant Account identifier when\nconfiguring your Google Pay enabled application."),(0,r.kt)("p",null,"If you have not yet obtained your ",(0,r.kt)("a",{parentName:"p",href:"https://pay.google.com/business/console/"},"Google Merchant identifier"),", please create this before proceeding."),(0,r.kt)("p",null,"Once created, this will need to be entered in the Google Pay Preferences section in the MMS (found on Digital Wallets tab of the Preferences page)"),(0,r.kt)("h3",{id:"request-fields"},"Request Fields"),(0,r.kt)("p",null,"Digital Wallet payments require the secure payment token generated by the wallet enabled application to be sent to the Gateway in the ",(0,r.kt)("inlineCode",{parentName:"p"},"paymentToken")," field. The type of token must be\nspecified by also sending the ",(0,r.kt)("inlineCode",{parentName:"p"},"paymentMethod")," field with a value of \u2018applepay\u2019 or \u2018googlepay\u2019."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"paymentMethod"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"The type of payment token sent. ",(0,r.kt)("br",null),(0,r.kt)("br",null)," Value must be one of: ",(0,r.kt)("br",null),"applepay \u2013 to indicate an Apple Pay token",(0,r.kt)("br",null),"googlepay \u2013 to indicate a Google Pay token")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"paymentToken"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Must contain the secure payment token produced by the wallet enabled application.")))),(0,r.kt)("h3",{id:"response-fields"},"Response Fields"),(0,r.kt)("p",null,"There are no additional response fields."),(0,r.kt)("h3",{id:"digital-wallet-tokens"},"Digital Wallet Tokens"),(0,r.kt)("p",null,"Digital Wallet payments operate the same as normal card payments, the main difference is that the card details are passed from the wallet application within an encrypted payment token. Once the Gateway has extracted the card details then it can use it with 3-D Secure and Fraud checking services as normal."),(0,r.kt)("h4",{id:"fpandpan-tokens"},"FPAN/DPAN tokens"),(0,r.kt)("p",null,"Apple Pay and Google Pay (Mobile) payment tokens contain an EMV tokenised card number also known as a device-specific number (DPAN) rather than the Cardholder\u2019s actual card\nnumber (FPAN). With these tokens the expiry date is the date the DPAN expires rather than the value printed on the Cardholder\u2019s card. The card mask returned by the Gateway will be the\nmasked DPAN, the Gateway is not able to return the last 4 digits of the FPAN. The card issuing details returned are the same as those of the original FPAN. Google Pay (Web) payment tokens contain the Cardholder\u2019s original card number (FPAN) and expiry date. This means that the card mask and expiry date will be those of the original card."),(0,r.kt)("h4",{id:"avscv2-checking"},"AVS/CV2 Checking"),(0,r.kt)("p",null,"Digital wallet payment tokens do not contain any address or CVV details. The Cardholder\u2019s billing address can be passed in the transaction along with the payment token so that address checking can be performed. The Gateway and Acquirer will not perform CVV checks with these payment tokens effectively disabling CVV checks for the transaction disregarding your preferences."),(0,r.kt)("h4",{id:"3-d-secure-authentication"},"3-D Secure Authentication"),(0,r.kt)("p",null,"DPAN based tokens will usually contain 3-D Secure data and so the Gateway will send this data to the Acquirer to gain the benefits of an authenticated transaction without the need to challenge the Cardholder. This makes using the digital wallet a much simpler and frictionless method of payment.\nFPAN based tokens can be passed to the Gateway\u2019s 3-D Secure processing and undergo the normal authentication journey as a manually entered card number."),(0,r.kt)("h4",{id:"risk-checking"},"Risk Checking"),(0,r.kt)("p",null,"Both FPAN and DPAN based tokens can be used with risk checking via Kount in the same manner as a normal card transaction."),(0,r.kt)("h4",{id:"transaction-lifecycle-and-recurring-transactions"},"Transaction Lifecycle and Recurring Transactions"),(0,r.kt)("p",null,"Both FPAN and DPAN based tokens will follow the standard transaction lifecycle and can be cancelled, captured, refunded or used as the basis of subsequent transactions in the same\nmanner as a normal card transaction."),(0,r.kt)("h2",{id:"ppro-transactions-apms"},"PPRO Transactions (APMs)"),(0,r.kt)("p",null,"PPRO is an additional payment method that is available to all Merchants using the Gateway that have a PPRO account."),(0,r.kt)("p",null,"To use PPRO you will be supplied with a separate PPRO Merchant account that can be grouped with your main Merchant Account using the account mapping facility as documented in the ",(0,r.kt)("a",{parentName:"p",href:"annexes#merchantAccountMapping"},"merchant account mapping")," section. This allows transactions to be sent using your main Merchant Account and then routed automatically to the PPRO Merchant Account in the same mapping group."),(0,r.kt)("p",null,"PPRO is an Acquirer that offers many Alternative Payment Methods (APM), that you can then offer to your Customers."),(0,r.kt)("p",null,"E-wallets, SMS payments and PSP services are some of the many payment methods PPRO support (eg Alipay, EasyPay, Bancontact). This could allow a business to facilitate overseas transactions or alternative payment methods using a different payment method suitable for that country or business plan."),(0,r.kt)("p",null,"All transactions created with this payment method will appear in the Merchant Management System (MMS) together with the payment method that was used to process the transaction."),(0,r.kt)("p",null,"PPRO transactions cannot be used for ad-hoc Credential on File (COF) repeat transactions or for recurring billing."),(0,r.kt)("p",null,"For more information on how to accept PPRO transactions please contact customer support."),(0,r.kt)("h4",{id:"benefits-1"},"Benefits"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Multiple alternative payment methods could be used."),(0,r.kt)("li",{parentName:"ul"},"Expands range of payment methods for international use."),(0,r.kt)("li",{parentName:"ul"},"Supports a variety of e-wallets, SMS and PSP\u2019s."),(0,r.kt)("li",{parentName:"ul"},"Ability to perform refunds on supported payment methods."),(0,r.kt)("li",{parentName:"ul"},"Transactions are controlled within the Merchant Management System (MMS) in the same manner as normal card transactions.")),(0,r.kt)("h4",{id:"limitations-1"},"Limitations"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You will need a PPRO account."),(0,r.kt)("li",{parentName:"ul"},"Payment authorisation is not always instantaneous and may require additional \u2018QUERY\u2019 requests."),(0,r.kt)("li",{parentName:"ul"},"An alternative payment method may only support one or a limited set of currencies or countries."),(0,r.kt)("li",{parentName:"ul"},"Alternative payment methods require a browser in order to display their Checkout.")),(0,r.kt)("h3",{id:"implementation"},"Implementation"),(0,r.kt)("p",null,"PPRO transactions require you to display the alternative payment method\u2019s Checkout to your Customer as part of the transaction flow. The transaction must be done in two stages with the Checkout being displayed between the stages."),(0,r.kt)("p",null,"PPRO only supports the SALE and REFUND_SALE actions. This section explains how to make payment requests. Management requests are performed as detailed in the ",(0,r.kt)("a",{parentName:"p",href:"transactiontypes#managementOperations"},"management operations")," section."),(0,r.kt)("p",null,"To customise the alternative payment method\u2019s Checkout experience, you may send various options in the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions")," field in your initial request."),(0,r.kt)("p",null,"Additional information available from the alternative payment method\u2019s Checkout will be made available in the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutDetails")," response field."),(0,r.kt)("p",null,"The direct integration uses two complex fields to pass data between PPRO and the Gateway. The ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRequest")," field will be provided by the Gateway and is a record whose name/value properties represent the data provided in the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutURL")," and is provided for information purposes only. The corresponding ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutResponse")," field should be returned to the Gateway and must be a record containing name/value properties received from the Checkout when it redirects the Cardholder\u2019s browser back to the URL provided using the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRedirectURL")," on completion."),(0,r.kt)("p",null,"The contents of the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutDetails"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRequest")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutResponse")," fields are formatted using the record format detailed in the ",(0,r.kt)("a",{parentName:"p",href:"overview#fieldFormats"},"format guide"),", the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions")," field also supports being provided using the serialised record format."),(0,r.kt)("h3",{id:"payment-request"},"Payment Request"),(0,r.kt)("p",null,"To request that a transaction be processed via PPRO the request must contain a ",(0,r.kt)("inlineCode",{parentName:"p"},"paymentMethod")," of \u2018ppro.XXXX\u2019, where XXXX is the PPRO payment method tag listed in the ",(0,r.kt)("a",{parentName:"p",href:"#pproPaymentMethodTag"},"ppro payment method tag"),". The request must also have a ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRedirectURL")," containing the URL of a page on your server to return to when the alternative payment method\u2019s Checkout is closed. In addition, you may send ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions")," to provide further custom fields required by the alternative payment method as detailed in the ",(0,r.kt)("a",{parentName:"p",href:"#pproPaymentSpecificFields"},"ppro payment specific fields")," section."),(0,r.kt)("p",null,"When the Gateway receives these fields, assuming there are no other errors with the request, it will attempt to find a suitable PPRO Merchant Account in the current account mapping group (refer to the ",(0,r.kt)("a",{parentName:"p",href:"annexes#merchantAccountMapping"},"merchant account mapping")," section)."),(0,r.kt)("p",null,"If the Gateway is unable to find a suitable account, then the transaction will be aborted, and it will respond with a ",(0,r.kt)("inlineCode",{parentName:"p"},"responseCode")," of 66364 (INVALID PAYMENTMETHOD).\nOtherwise, the Gateway will respond with a ",(0,r.kt)("inlineCode",{parentName:"p"},"responseCode")," of 65826 (CHECKOUT REQUIRED) and included in the response will be a ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutURL")," field containing the URL that the buyer\u2019s browser should be redirected to in order to complete the payment. The response will also contain a unique ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRef")," which must be echoed back in the continuation requests."),(0,r.kt)("p",null,"On completion of the third-party payment the browser will be directed to the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRedirectURL")," you provided, complete with information about the payment in a HTTP POST request. The posted data will contain a ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutResponse")," field that will contain any specific response data for the payment method."),(0,r.kt)("h4",{id:"pproPaymentSpecificFields"},"Payment Specific Fields"),(0,r.kt)("p",null,"Most of the information required by the alternative payment methods can be supplied using the standard Gateway request fields. However, there may be specific mandatory fields required by a payment method which are not available using the standard fields. In these cases, these fields can be sent in the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions")," data, the value of which must be formatted using the record or serialised record formats detailed in the ",(0,r.kt)("a",{parentName:"p",href:"overview#fieldFormats"},"format guide"),"."),(0,r.kt)("p",null,"For example, most European services may require the ",(0,r.kt)("inlineCode",{parentName:"p"},"nationalid")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"consumerref")," fields. Recurring transactions will require the use of ",(0,r.kt)("inlineCode",{parentName:"p"},"iban")," (optionally ",(0,r.kt)("inlineCode",{parentName:"p"},"sequencetype"),") and in follow-up payments; ",(0,r.kt)("inlineCode",{parentName:"p"},"mandatereference"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"mandatesignaturedate"),", and ",(0,r.kt)("inlineCode",{parentName:"p"},"sequencetype"),"."),(0,r.kt)("p",null,"These fields are documented in your PPRO integration guide as SPECIN fields."),(0,r.kt)("p",null,"Customer support will be able to guide you on any mandatory options as you will find the transaction will fail with a ",(0,r.kt)("inlineCode",{parentName:"p"},"responseCode")," of 65550 (PROCESSOR_ERROR - Invalid request data) if any are missing."),(0,r.kt)("h4",{id:"request-fields-1"},"Request Fields"),(0,r.kt)("p",null,"These fields should be sent in addition to the ",(0,r.kt)("a",{parentName:"p",href:"/hostedpaymentfields/transactiontypes/#transactionRequest"},"basic request fields"),"."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"paymentMethod"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Payment method to be used with PPRO (eg ppro.astropay, ppro.alipay, etc.).Refer to the ",(0,r.kt)("a",{parentName:"td",href:"#pproPaymentMethodTag"},"Payment Method Tag")," section.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutRedirectURL"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"URL on Merchant\u2019s server to return to when the Alternative Payment Method\u2019s Checkout is closed.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutOptions"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Record containing options used to customise the alternative payment methods Checkout. See the ",(0,r.kt)("a",{parentName:"td",href:"#pproCheckoutOptions"},"checkout options")," section. Whilst the Gateway does not see this field as mandatory, PPRO may have payment methods that require additional configuration using checkout options.")))),(0,r.kt)("h3",{id:"payment-response"},"Payment Response"),(0,r.kt)("h4",{id:"initial-response-fields"},"Initial Response Fields"),(0,r.kt)("p",null,"These fields will be returned, in addition to the request fields above and the ",(0,r.kt)("a",{parentName:"p",href:"/hostedpaymentfields/transactiontypes/#transactionResponse"},"basic response fields")," for the start of a PPRO transaction and the PPRO checkout process."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutRef"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Unique reference required to continue this transaction when the PPRO Checkout has completed.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"The ",(0,r.kt)("inlineCode",{parentName:"td"},"paymentMethod")," you used to identify the PPRO payment method.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutRedirectURL"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"The URL to redirect the Customer to, to start the checkout process.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutOptions"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Record containing any Checkout options provided in the request.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutDetails"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Record containing additional information provided from the payment method used during checkout.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutRequest"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Record containing the redirect secret, checksum and request status.")))),(0,r.kt)("h4",{id:"completion-response-fields"},"Completion Response Fields"),(0,r.kt)("p",null,"Fields from the initial response in the previous section may be present as well as the fields below and will not contain any card details."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutResponse"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Containing additional information provided by the Checkout. Any change in the payment\u2019s status will be given in ",(0,r.kt)("inlineCode",{parentName:"td"},"responseMessage")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"responseCode"),". ",(0,r.kt)("br",null),(0,r.kt)("br",null)," Not all payment methods give an immediate payment status. This will require a further QUERY to the Gateway to see whether this value has changed to a status of \u2018tendered\u2019.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutStatus"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"A string containing the result of the checkout process. This is not used to identify the transaction\u2019s payment status.")))),(0,r.kt)("h3",{id:"pproPaymentMethodTag"},"Payment Method Tag"),(0,r.kt)("p",null,"To specify which alternative payment method is required you need to send the ",(0,r.kt)("inlineCode",{parentName:"p"},"paymentMethod")," field with a value using the format \u2018ppro.XXXX\u2019, where XXXX is the alternative payment method\u2019s tag name as assigned by PPRO."),(0,r.kt)("p",null,"For example, to use the alternative payment method AstroPay Card that has a tag name of \u201castropaycard\u201d (all lowercase); the resulting payment method code would be \u201cppro.astropaycard\u201d. This allows the Gateway to know that you\u2019re attempting to use AstroPay Card using the PPRO payment method."),(0,r.kt)("p",null,"The table below is a guide to the tag names available. This list is fluid as PPRO add and remove methods."),(0,r.kt)("p",null,"If you know of a payment method that is not on this list or the payment method cannot be used; please contact customer support for advice."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Payment Method Tag"),(0,r.kt)("th",{parentName:"tr",align:null},"Payment Method Name"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"affinbank"),(0,r.kt)("td",{parentName:"tr",align:null},"Affin bank")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"alipay"),(0,r.kt)("td",{parentName:"tr",align:null},"AliPay")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ambank"),(0,r.kt)("td",{parentName:"tr",align:null},"AmBank")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"argencard"),(0,r.kt)("td",{parentName:"tr",align:null},"Argencard")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"astropaycard"),(0,r.kt)("td",{parentName:"tr",align:null},"AstroPay Card")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"astropaydirect"),(0,r.kt)("td",{parentName:"tr",align:null},"AstroPay Direct")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"aura"),(0,r.kt)("td",{parentName:"tr",align:null},"Aura")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"baloto"),(0,r.kt)("td",{parentName:"tr",align:null},"Baloto")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"banamex"),(0,r.kt)("td",{parentName:"tr",align:null},"Banamex")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"bancodobrasil"),(0,r.kt)("td",{parentName:"tr",align:null},"Banco Do Brasil")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"bancodechile"),(0,r.kt)("td",{parentName:"tr",align:null},"Banco de Chile")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"bancodeoccidente"),(0,r.kt)("td",{parentName:"tr",align:null},"Banco de Occidente")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"bancomer"),(0,r.kt)("td",{parentName:"tr",align:null},"Bancomer")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"bankislam"),(0,r.kt)("td",{parentName:"tr",align:null},"Bank Islam")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"bcmc"),(0,r.kt)("td",{parentName:"tr",align:null},"Bancontact")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"bitpay"),(0,r.kt)("td",{parentName:"tr",align:null},"BitPay")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"boleto"),(0,r.kt)("td",{parentName:"tr",align:null},"Boleto Bancario")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"bradesco"),(0,r.kt)("td",{parentName:"tr",align:null},"Bradesco")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"cabal"),(0,r.kt)("td",{parentName:"tr",align:null},"Cabal")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"cartaomercadolivre"),(0,r.kt)("td",{parentName:"tr",align:null},"Cartao Mercado Livre")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"carulla"),(0,r.kt)("td",{parentName:"tr",align:null},"Carulla")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ccauth"),(0,r.kt)("td",{parentName:"tr",align:null},"Credit/Debit Card")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ccweb"),(0,r.kt)("td",{parentName:"tr",align:null},"Credit/Debit Card")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"cencosud"),(0,r.kt)("td",{parentName:"tr",align:null},"Cencosud")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"cimbclicks"),(0,r.kt)("td",{parentName:"tr",align:null},"CIMB Clicks")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"cmr"),(0,r.kt)("td",{parentName:"tr",align:null},"CMR")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"davivienda"),(0,r.kt)("td",{parentName:"tr",align:null},"Davivienda")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"directpay"),(0,r.kt)("td",{parentName:"tr",align:null},"Sofortu\u0308berweisung (Direct Pay)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dragonpay"),(0,r.kt)("td",{parentName:"tr",align:null},"Dragonpay")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"easypay"),(0,r.kt)("td",{parentName:"tr",align:null},"EasyPay")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"efecty"),(0,r.kt)("td",{parentName:"tr",align:null},"Efecty")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"elo"),(0,r.kt)("td",{parentName:"tr",align:null},"Elo")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"empresedeenergia"),(0,r.kt)("td",{parentName:"tr",align:null},"Emprese de Energia")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"enets"),(0,r.kt)("td",{parentName:"tr",align:null},"eNETS")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"entercash"),(0,r.kt)("td",{parentName:"tr",align:null},"Entercash")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"eps"),(0,r.kt)("td",{parentName:"tr",align:null},"EPS")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"estonianbanks"),(0,r.kt)("td",{parentName:"tr",align:null},"Estonian Banks")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"giropay"),(0,r.kt)("td",{parentName:"tr",align:null},"Giropay")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"hipercard"),(0,r.kt)("td",{parentName:"tr",align:null},"Hipercard")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"hongleongbank"),(0,r.kt)("td",{parentName:"tr",align:null},"Hong Leong Bank")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ideal"),(0,r.kt)("td",{parentName:"tr",align:null},"iDEAL")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"instanttransfer"),(0,r.kt)("td",{parentName:"tr",align:null},"Instant Transfer")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"int_payout"),(0,r.kt)("td",{parentName:"tr",align:null},"International Pay-Outs")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"itau"),(0,r.kt)("td",{parentName:"tr",align:null},"Itau")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"latvianbanks"),(0,r.kt)("td",{parentName:"tr",align:null},"Latvian Banks")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"lithuanianbanks"),(0,r.kt)("td",{parentName:"tr",align:null},"Lithuanian Banks")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"magna"),(0,r.kt)("td",{parentName:"tr",align:null},"Magna")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"maxima"),(0,r.kt)("td",{parentName:"tr",align:null},"Maxima")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"maybanktwou"),(0,r.kt)("td",{parentName:"tr",align:null},"Maybank2u")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"multibanco"),(0,r.kt)("td",{parentName:"tr",align:null},"Multibanco")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"mybank"),(0,r.kt)("td",{parentName:"tr",align:null},"MyBank")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"myclearfpx"),(0,r.kt)("td",{parentName:"tr",align:null},"MyClear FPX")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"naranja"),(0,r.kt)("td",{parentName:"tr",align:null},"Naranja")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"narvesen"),(0,r.kt)("td",{parentName:"tr",align:null},"Narvesen")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nativa"),(0,r.kt)("td",{parentName:"tr",align:null},"Nativa")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"oxxo"),(0,r.kt)("td",{parentName:"tr",align:null},"OXXO")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"p24"),(0,r.kt)("td",{parentName:"tr",align:null},"Przelewy24")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"p24payout"),(0,r.kt)("td",{parentName:"tr",align:null},"Przelewy24 Payout")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"pagofacil"),(0,r.kt)("td",{parentName:"tr",align:null},"Pago Facil")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"paypost"),(0,r.kt)("td",{parentName:"tr",align:null},"PayPost")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"paysafecard"),(0,r.kt)("td",{parentName:"tr",align:null},"Paysafe Card")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"paysbuy"),(0,r.kt)("td",{parentName:"tr",align:null},"Paysbuy")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"paysera"),(0,r.kt)("td",{parentName:"tr",align:null},"Paysera")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"payu"),(0,r.kt)("td",{parentName:"tr",align:null},"PayU")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"perlas"),(0,r.kt)("td",{parentName:"tr",align:null},"Perlas Terminals")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"poli"),(0,r.kt)("td",{parentName:"tr",align:null},"OLI")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"presto"),(0,r.kt)("td",{parentName:"tr",align:null},"Presto")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"pse"),(0,r.kt)("td",{parentName:"tr",align:null},"PSE")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"pugglepay"),(0,r.kt)("td",{parentName:"tr",align:null},"Pugglepay")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"qiwi"),(0,r.kt)("td",{parentName:"tr",align:null},"QIWI")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"qiwipayout"),(0,r.kt)("td",{parentName:"tr",align:null},"QIWI Payout")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"rapipago"),(0,r.kt)("td",{parentName:"tr",align:null},"Rapipago")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"redpagos"),(0,r.kt)("td",{parentName:"tr",align:null},"Redpagos")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"rhbbank"),(0,r.kt)("td",{parentName:"tr",align:null},"RHB Bank")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"safetypay"),(0,r.kt)("td",{parentName:"tr",align:null},"SafetyPay")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"santander"),(0,r.kt)("td",{parentName:"tr",align:null},"Santander")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sepadirectdebit"),(0,r.kt)("td",{parentName:"tr",align:null},"SEPA DirectDebit")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sepapayout"),(0,r.kt)("td",{parentName:"tr",align:null},"SEPA Payout")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"seveneleven"),(0,r.kt)("td",{parentName:"tr",align:null},"7eleven")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"singpost"),(0,r.kt)("td",{parentName:"tr",align:null},"SingPost")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"skrill"),(0,r.kt)("td",{parentName:"tr",align:null},"Skrill")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"surtimax"),(0,r.kt)("td",{parentName:"tr",align:null},"Surtimax")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"tarjetashopping"),(0,r.kt)("td",{parentName:"tr",align:null},"Tarjeta Shopping")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"trustly"),(0,r.kt)("td",{parentName:"tr",align:null},"Trustly")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"trustpay"),(0,r.kt)("td",{parentName:"tr",align:null},"TrustPay")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"unionpay"),(0,r.kt)("td",{parentName:"tr",align:null},"UnionPay")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"verkkopankki"),(0,r.kt)("td",{parentName:"tr",align:null},"Verkkopankki \u2013 Finish Online Banking")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"webpay"),(0,r.kt)("td",{parentName:"tr",align:null},"Webpay")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"yellowpay"),(0,r.kt)("td",{parentName:"tr",align:null},"Yellow Pay")))),(0,r.kt)("h3",{id:"pproCheckoutOptions"},"Checkout Options"),(0,r.kt)("p",null,"The following options may be set in the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions")," field to customise the Checkout. The options must be formatted using the record or serialised record formats detailed in the ",(0,r.kt)("a",{parentName:"p",href:"overview#fieldFormats"},"format guide"),"."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"nationalid"),(0,r.kt)("td",{parentName:"tr",align:null},"Consumer\u2019s national ID (up to 30 characters).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"consumerref"),(0,r.kt)("td",{parentName:"tr",align:null},"Unique reference identifying the consumer within 1 to 20 characters and a format of A-Za-z0-9.%,&/+*$-")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"siteid"),(0,r.kt)("td",{parentName:"tr",align:null},"Unique site identifier. Required for clients serving multiple points of sale and forwarded onwards whilst using the qiwi payment method.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"iban"),(0,r.kt)("td",{parentName:"tr",align:null},"Valid IBAN of consumer/destination account.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sequencetype"),(0,r.kt)("td",{parentName:"tr",align:null},"Sequence type of the direct debit.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," oneOff \u2013 The direct debit is executed once (default)",(0,r.kt)("br",null)," first \u2013 First direct debit in a series of recurring ones")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"mandatereference"),(0,r.kt)("td",{parentName:"tr",align:null},"Mandate reference as returned on the first transaction in the sequence (found from mandatereference in checkoutDetails)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"mandatesignaturedate"),(0,r.kt)("td",{parentName:"tr",align:null},"Date of the initial transaction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"bic"),(0,r.kt)("td",{parentName:"tr",align:null},"Valid BIC (8 or 11 alphanumeric letters) \u2013 optionally supplied to skip the bank selection page (by using the bank referenced by BIC as supplied)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"clientip"),(0,r.kt)("td",{parentName:"tr",align:null},"Optional IP address of the consumer during checkout using Trustly (127.0.0.1 is not allowed!)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"address"),(0,r.kt)("td",{parentName:"tr",align:null},"Customer\u2019s billing address ",(0,r.kt)("br",null),(0,r.kt)("br",null),"This information is supplied to PPRO by default using the Gateway field customerAddress")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"city"),(0,r.kt)("td",{parentName:"tr",align:null},"Customer\u2019s billing city",(0,r.kt)("br",null),(0,r.kt)("br",null),"This information is supplied to PPRO by default using the Gateway field customerTown.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"phone"),(0,r.kt)("td",{parentName:"tr",align:null},"Customer\u2019s phone",(0,r.kt)("br",null),(0,r.kt)("br",null),"This information is supplied to PPRO by default using the Gateway field customerPhone.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"mobilephone"),(0,r.kt)("td",{parentName:"tr",align:null},"Customers mobile phone",(0,r.kt)("br",null),(0,r.kt)("br",null),"This information is supplied to PPRO by default using the Gateway field customerMobile.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dob"),(0,r.kt)("td",{parentName:"tr",align:null},"MCC 6012 Date of Birth",(0,r.kt)("br",null),(0,r.kt)("br",null),"This information is supplied to PPRO by default using the Gateway field receiverDateOfBirth.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dynamicdescriptor"),(0,r.kt)("td",{parentName:"tr",align:null},"Statement narrative",(0,r.kt)("br",null),(0,r.kt)("br",null),"This information is supplied to PPRO by default using the Gateway field statementNarrative1.")))),(0,r.kt)("h3",{id:"notifications-and-tendered-payments"},'Notifications and "Tendered" Payments'),(0,r.kt)("p",null,"Whilst some payment methods give an immediate payment status (ie direct card payment methods rather than SMS and e-wallet systems), some payments may come back with the status of \u2018tendered\u2019. At this time, online shopping modules will not be able to monitor the transaction status. The use of a QUERY request may be of use. Please ask customer support in this matter who will be able to give more information and may be able to provide better advice for your situation."),(0,r.kt)("p",null,"Notifications from PPRO regarding the payment status, seconds, minutes or hours after the checkout will automatically update the transaction status."),(0,r.kt)("h2",{id:"paypal-transactions"},"PayPal Transactions"),(0,r.kt)("p",null,"PayPal is an additional payment method that is available to all Merchants using the Gateway who have a PayPal account."),(0,r.kt)("p",null,"To use PayPal, you will be supplied with a separate PayPal Merchant Account that can be grouped with your main Merchant Account using the account mapping facility as documented in the ",(0,r.kt)("a",{parentName:"p",href:"annexes#merchantAccountMapping"},"merchant account mapping")," section. This allows transactions to be sent using your main Merchant Account and then routed automatically to the PayPal Merchant Account in the same mapping group."),(0,r.kt)("p",null,"It allows you to offer payment via PayPal in addition to normal card payments."),(0,r.kt)("p",null,"PayPal transactions will appear in the Merchant Management System (MMS) alongside any card payments and can be captured, cancelled and refunded in the same way as card payments."),(0,r.kt)("p",null,"PayPal transactions can also be used for recurring billing but require you to indicate in the initial transaction that it will be the basis for recurring billing and that a billing agreement will be entered between your Customer and PayPal when they agree to the payment."),(0,r.kt)("p",null,"PayPal transactions cannot be used for ad-hoc Credentials on File (COF) repeat transactions unless a billing agreement has been set up."),(0,r.kt)("p",null,"For more information on how to accept PayPal transactions, please contact customer support."),(0,r.kt)("h4",{id:"benefits-2"},"Benefits"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Provides your customers with the flexibility of paying by using their PayPal account when this is more suitable to them than using a traditional credit or debit card."),(0,r.kt)("li",{parentName:"ul"},"The in-context PayPal Express Checkout helps improve conversion rates with an easier way to pay without customers leaving your website."),(0,r.kt)("li",{parentName:"ul"},"There are no extra costs for adding a PayPal Merchant Account. However, you will still be liable for the PayPal transaction fees."),(0,r.kt)("li",{parentName:"ul"},"The full PayPal transaction information is available and returned as part of the transaction."),(0,r.kt)("li",{parentName:"ul"},"Transactions are controlled within the Merchant Management System (MMS) in the same manner as normal card transactions.")),(0,r.kt)("h4",{id:"limitations-2"},"Limitations"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You will need a PayPal account."),(0,r.kt)("li",{parentName:"ul"},"Recurring transactions are not supported unless as part of a prearranged billing agreement."),(0,r.kt)("li",{parentName:"ul"},"Independent refunds that are not tied to a previous sale transaction are not supported without prior agreement."),(0,r.kt)("li",{parentName:"ul"},"Transactions require a browser in order to display the PayPal Checkout."),(0,r.kt)("li",{parentName:"ul"},"The PayPal Checkout cannot be opened from within a browser IFRAME and so care must be taken to ensure that any PayPal Checkout button is not placed within such an IFRAME.")),(0,r.kt)("h3",{id:"implementation-1"},"Implementation"),(0,r.kt)("p",null,"PayPal transactions require you to display the PayPal Checkout to your Customer as part of the transaction flow. The transaction must be done in two stages, with the Checkout being displayed between the stages. They can also be optionally done in three stages allowing you to display an order confirmation after the Checkout and before authorising the transaction. You can change the amount at this stage to allow for shipping costs when you know the confirmed delivery address the Customer selected as part of the PayPal Checkout."),(0,r.kt)("p",null,"PayPal supports the normal payment and management actions. This section explains how to make payment requests. Management requests are performed as detailed in the ",(0,r.kt)("a",{parentName:"p",href:"transactiontypes#managementOperations"},"management operations")," section."),(0,r.kt)("p",null,"To customise the PayPal Checkout experience, you may send various options in the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions")," field in your initial request."),(0,r.kt)("p",null,"Additional information available from the PayPal Checkout will be made available in the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutDetails")," response field."),(0,r.kt)("p",null,"The direct integration uses two complex fields to pass data between the PayPal Checkout and the Gateway. The ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRequest")," field will be provided by the Gateway and is a record whose name/value properties should be used with the PayPal JavaScript SDK to open the Checkout. The corresponding ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutResponse")," field should be returned to the Gateway and must be a record containing name/value properties received from the Checkout when it redirects the Cardholder\u2019s browser back to the URL provided using the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRedirectURL")," on completion."),(0,r.kt)("p",null,"The contents of the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutDetails"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRequest")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutResponse")," fields are formatted using the record format detailed in the ",(0,r.kt)("a",{parentName:"p",href:"overview#fieldFormats"},"format guide"),", the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions")," field also supports being provided using the serialised record format."),(0,r.kt)("h3",{id:"initial-request-checkout-preparation"},"Initial Request (Checkout Preparation)"),(0,r.kt)("p",null,"To request that a transaction be processed via PayPal the request must contain a ",(0,r.kt)("inlineCode",{parentName:"p"},"paymentMethod")," of \u2018paypal\u2019 and a ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRedirectURL")," containing the URL of a page on your server to return to when the Checkout is closed. In addition, you may send ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions")," to customise the Checkout experience. When the Gateway receives this ",(0,r.kt)("inlineCode",{parentName:"p"},"paymentMethod"),", assuming there are no other errors with the request, it will attempt to find a suitable PayPal Merchant Account in the current account mapping group (refer to the ",(0,r.kt)("a",{parentName:"p",href:"annexes#merchantAccountMapping"},"merchant account mapping")," section)."),(0,r.kt)("p",null,"If the Gateway is unable to find a suitable account, then the transaction will be aborted and it will respond with a ",(0,r.kt)("inlineCode",{parentName:"p"},"responseCode")," of 66364 (INVALID PAYMENTMETHOD)."),(0,r.kt)("p",null,"Otherwise, the Gateway will respond with a ",(0,r.kt)("inlineCode",{parentName:"p"},"responseCode")," of 65826 (CHECKOUT REQUIRED) and included in the response will be a ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutURL")," field containing the URL required to load Checkout and a ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRequest")," containing any data required to be sent to the Checkout. The response will also contain a unique ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRef")," which must be echoed back in the continuation requests."),(0,r.kt)("p",null,"At this point your server must redirect the Customer\u2019s browser to the provided ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutURL"),". Alternatively, the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutURL")," can be used in conjunction with the PayPal In-Context JavaScript code to implement an In-context Checkout which allows the Merchants website to remain visible in the background. Further details on how to use the In-Context Checkout are provided in the PayPal guide at ",(0,r.kt)("a",{parentName:"p",href:"https://developer.paypal.com/docs/classic/express-checkout/in-context/enable_in_context_checkout/"},"https://developer.paypal.com/docs/classic/express-checkout/in-context/enable_in_context_checkout/"),"."),(0,r.kt)("h4",{id:"request-fields-2"},"Request Fields"),(0,r.kt)("p",null,"These fields should be sent in addition to the ",(0,r.kt)("a",{parentName:"p",href:"/hostedpaymentfields/transactiontypes/#transactionRequest"},"basic request fields"),"."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"paymentMethod"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Must contain the value \u2018paypal\u2019 in lower case letters only.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutRedirectURL"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"URL on Merchant\u2019s server to return to when the PayPal Checkout is closed.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutOptions"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Record containing options used to customise the PayPal Checkout. See the ",(0,r.kt)("a",{parentName:"td",href:"#paypalCheckoutOptions"},"checkout options")," section.")))),(0,r.kt)("h4",{id:"response-fields-1"},"Response Fields"),(0,r.kt)("p",null,"These fields will be returned, in addition to the request fields above and the ",(0,r.kt)("a",{parentName:"p",href:"/hostedpaymentfields/transactiontypes/#transactionResponse"},"basic response fields"),"."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutRef"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Unique reference required to continue this transaction when the PayPal Checkout has completed.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Unique name of the Checkout. For PayPal this is the value paypal.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutURL"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"URL required to load the PayPal Checkout.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"acquirerResponseDetails"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Record containing details about the PayPal response containing any error messages and codes. This can be used together with the normal ",(0,r.kt)("inlineCode",{parentName:"td"},"responseCode")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"responseMessage")," response fields to determine further the reason for any failure.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutRequest"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Record containing details to send to the PayPal Checkout.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutOptions"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Record containing any Checkout options passed in the request.")))),(0,r.kt)("h3",{id:"continuation-request-checkout-details-and-authorise"},"Continuation Request (Checkout Details and Authorise)"),(0,r.kt)("p",null,"On completion of the PayPal Checkout it will redirect the Customer\u2019s browser to the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRedirectURL")," provided including a token and status URL parameters. If the checkout was successful, the status will be \u2018success\u2019 alternatively if the Checkout was cancelled the status will be \u2018cancel\u2019. The received redirect request parameters inclusive of these token and status parameters should then be sent to the Gateway in the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutResponse")," fields of a new request. The ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutResponse")," field can be sent either as the original URL query string received or as an array of the decoded query parameters. This new request will load the Checkout details including any delivery address if required and send the transaction to PayPal for authorisation, returning the result as per a normal authorisation transaction. The new request must contain the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRef")," received in the initial response."),(0,r.kt)("h4",{id:"request-fields-3"},"Request Fields"),(0,r.kt)("p",null,"These fields may be sent alone. It is only necessary to send the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRef")," and the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutResponse")," in the continuation request because the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRef")," will identify the Merchant Account and initial request. The message does not need to be signed. You can send any of the normal request fields to modify or supplement the initial request \u2013 however, in this case the request should be signed. The ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRedirectURL")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions")," fields sent in the initial request cannot be modified and any sent in the second request must match those used in the first request, or the second request will fail with a ",(0,r.kt)("inlineCode",{parentName:"p"},"responseCode")," of 64442 (REQUEST MISMATCH)."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutRef"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Unique reference returned in the initial response.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutResponse"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"The GET and or POST data received by the ",(0,r.kt)("inlineCode",{parentName:"td"},"checkoutRedirectURL")," page.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutOnly"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Pass Y to complete the processing as far as the next Checkout stage and then return with the loaded Checkout details.")))),(0,r.kt)("h4",{id:"response-fields-2"},"Response Fields"),(0,r.kt)("p",null,"These fields will be returned, in addition to the request fields above and the ",(0,r.kt)("a",{parentName:"p",href:"/hostedpaymentfields/transactiontypes/#transactionResponse"},"basic response fields"),"."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutRef"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Provided if ",(0,r.kt)("inlineCode",{parentName:"td"},"checkoutOnly")," was used in the continuation response to indicate that a further request will be sent to finalise the transaction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Unique name of the Checkout. For PayPal this is the value paypal.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutDetails"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Record containing options used to customise the PayPal Checkout. Refer to the ",(0,r.kt)("a",{parentName:"td",href:"#checkoutDetails"},"checkout details")," section.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"acquirerResponseDetails"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Record containing details about the PayPal response containing any error messages and codes. This can be used together with the normal ",(0,r.kt)("inlineCode",{parentName:"td"},"responseCode")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"responseMessage")," response fields to determine further the reason for any failure.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"customerXXXX"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Customer details if provided by the PayPal Checkout. The response will include the Customer/billing address details if provided by the PayPal Checkout.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"deliveryXXXX"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Delivery details if provided by the PayPal Checkout.The response will include the delivery address details if provided by the PayPal Checkout.")))),(0,r.kt)("h3",{id:"separate-checkout-details-and-authorisation-requests"},"Separate Checkout Details and Authorisation Requests"),(0,r.kt)("p",null,"You can choose to obtain the Checkout details before actually sending the transaction for authorisation by sending the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOnly")," field in the above continuation request. If this field is sent with a value of \u2018Y\u2019 then the Gateway will load the Checkout details and then return them to you without sending the request for authorisation. You can then display them and/or adjust the amount, for example, according to delivery charges appropriate to the received delivery address. You should then send a new request containing the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRef")," received to continue the transaction and authorise it."),(0,r.kt)("p",null,"Note: this stage can be repeated multiple times by including the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOnly")," field with a value of \u2018Y\u2019 each time. To complete the transaction, the final request must not contain the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOnly")," field or it must not have a value of \u2018Y\u2019."),(0,r.kt)("h3",{id:"paypalCheckoutOptions"},"Checkout Options"),(0,r.kt)("p",null,"The following options may be set in the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions")," field to customise the PayPal Checkout. The options must be formatted using the record or serialised record formats detailed in the ",(0,r.kt)("a",{parentName:"p",href:"overview#fieldFormats"},"format guide"),"."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"inContext"),(0,r.kt)("td",{parentName:"tr",align:null},"Use the in-context PayPal Checkout rather than the full screen Checkout when possible.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," 0 \u2013 use the full screen Checkout.",(0,r.kt)("br",null)," 1 \u2013 use the in-context Checkout if possible.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"userAction"),(0,r.kt)("td",{parentName:"tr",align:null},"Determines whether buyers complete their purchases on PayPal or on your website.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null),"  commit \u2013 sets the submit button text to \u2018Pay Now\u2019 on the PayPal Checkout. This text lets buyers know that they complete their purchases if they click the button.",(0,r.kt)("br",null),"  continue\u2013 sets the submit button text to \u2018Continue\u2019 on the PayPal Checkout. This text lets buyers know that they will return to the Merchant\u2019s cart to complete their purchases if they click the button.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"maxAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"The expected maximum total amount of the order, including shipping and taxes. PayPal refer to this field as MAXAMT.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"reqBillingAddress"),(0,r.kt)("td",{parentName:"tr",align:null},"Determines whether the buyer\u2019s billing address on file with PayPal is returned. This feature must be enabled by PayPal.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"reqConfirmShipping"),(0,r.kt)("td",{parentName:"tr",align:null},"Determines whether the buyer\u2019s shipping address on file with PayPal must be a confirmed address.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," 0 \u2013 does not need to be confirmed",(0,r.kt)("br",null)," 1 \u2013 must be confirmed")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"noShipping"),(0,r.kt)("td",{parentName:"tr",align:null},"Determines whether PayPal displays shipping address.",(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," 0 \u2013 display the shipping address ",(0,r.kt)("br",null),"1 \u2013 do not display shipping address and remove shipping information ",(0,r.kt)("br",null),"2 \u2013 If no ",(0,r.kt)("inlineCode",{parentName:"td"},"deliveryXXXX")," fields passed, PayPal obtains them from the buyer's account profile.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"addrOverride"),(0,r.kt)("td",{parentName:"tr",align:null},"Determines whether the PayPal Checkout displays the shipping address sent using the ",(0,r.kt)("inlineCode",{parentName:"td"},"deliveryXXXX")," fields and not the shipping address on file with PayPal for this buyer. Displaying the PayPal street address on file does not allow the buyer to edit that address.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," 0 \u2013 PayPal should not display the address.",(0,r.kt)("br",null)," 1 \u2013 PayPal should display the address.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"localeCode"),(0,r.kt)("td",{parentName:"tr",align:null},"Locale of the pages displayed by PayPal during Express Checkout. It is either a two-letter country code or five-character locale code supported by PayPal.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"allowNote"),(0,r.kt)("td",{parentName:"tr",align:null},"Enables the buyer to enter a note to the merchant on the PayPal page during Checkout. The note is returned in the ",(0,r.kt)("inlineCode",{parentName:"td"},"checkoutDetails")," response field.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"pageStyle"),(0,r.kt)("td",{parentName:"tr",align:null},"Name of the Custom Payment Page Style used for the PayPal Checkout. It is the same name as the Page Style Name used when adding styles in the PayPal Account.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"payflowColor"),(0,r.kt)("td",{parentName:"tr",align:null},"The HTML hex colour code for the PayPal Checkout\u2019s background colour. By default, the colour is white (FFFFFF).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"cardBorderColor"),(0,r.kt)("td",{parentName:"tr",align:null},"The HTML hex colour code for the PayPal Checkout\u2019s principal identifying colour. The colour will be blended to white in a gradient fill that borders the cart review area.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"hdrImg"),(0,r.kt)("td",{parentName:"tr",align:null},"URL for the image you want to appear at the top left of the payment page. The image has a maximum size of 750 pixels wide by 90 pixels high. PayPal requires that you provide an image that is stored on a secure (https) server. If you do not specify an image, the business name displays.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"logoImg"),(0,r.kt)("td",{parentName:"tr",align:null},"A URL to your logo image. Use a valid graphics format, such as .gif, .jpg, or .png. Limit the image to 190 pixels wide by 60 pixels high. PayPal crops images that are larger. PayPal places your logo image at the top of the cart review area.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"landingPage"),(0,r.kt)("td",{parentName:"tr",align:null},"Type of PayPal Checkout to display.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are: ",(0,r.kt)("br",null),"Billing \u2013 Non-PayPal account ",(0,r.kt)("br",null),"Login \u2013 PayPal account login")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"channelType"),(0,r.kt)("td",{parentName:"tr",align:null},"Type of channel.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are: ",(0,r.kt)("br",null)," Merchant \u2013 Non-auction seller",(0,r.kt)("br",null),"  eBayItem \u2013 eBay auction")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"solutionType"),(0,r.kt)("td",{parentName:"tr",align:null},"Type of Checkout flow.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are: ",(0,r.kt)("br",null),"Sole \u2013 Buyer does not need to create a PayPal account to check out. This is referred to as PayPal Account Optional. ",(0,r.kt)("br",null),"Mark \u2013 Buyer must have a PayPal account to check out.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"totalType"),(0,r.kt)("td",{parentName:"tr",align:null},"Type declaration for the label to be displayed in MiniCart for UX.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are: ",(0,r.kt)("br",null),"Total ",(0,r.kt)("br",null),"EstimatedTotal")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"brandName"),(0,r.kt)("td",{parentName:"tr",align:null},"A label that overrides the business name in the PayPal account on the PayPal Checkout.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"customerServiceNumber"),(0,r.kt)("td",{parentName:"tr",align:null},"Merchant Customer Service number displayed on the PayPal Checkout.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"buyerEmailOptInEnable"),(0,r.kt)("td",{parentName:"tr",align:null},"Enables the buyer to provide an email address on the PayPal pages to be notified of promotions or special events.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null),"  0 \u2013 Do not enable buyer to provide email.",(0,r.kt)("br",null),"  1 \u2013 Enable the buyer to provide email.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"noteToBuyer"),(0,r.kt)("td",{parentName:"tr",align:null},"A note from the merchant to the buyer that will be displayed in the PayPal Checkout.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"paymentAction"),(0,r.kt)("td",{parentName:"tr",align:null},"Defines how to obtain payment. This can be used to override any ",(0,r.kt)("inlineCode",{parentName:"td"},"captureDelay")," setting that can also be used to indicate a Sale or Authorisation only.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," Sale \u2013 sale with immediate capture.",(0,r.kt)("br",null)," Authorization \u2013 authorisation subject to later capture (note spelling).",(0,r.kt)("br",null)," Order \u2013 order subject to later authorisation and capture.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"allowedPaymentMethod"),(0,r.kt)("td",{parentName:"tr",align:null},"The payment method type. Specify the value InstantPaymentOnly")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"insuranceOptionOffered"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates whether insurance is available as an option that the buyer can choose on the PayPal Review page.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," true \u2013 The Insurance option displays 'Yes' and the insuranceAmount. If true, the total shipping insurance for this order must be a positive number.",(0,r.kt)("br",null)," false \u2013 The Insurance option displays 'No'.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"multiShipping"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates whether this payment is associated with multiple shipping addresses.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," 0 \u2013 Single/No shipping address.",(0,r.kt)("br",null)," 1 \u2013 Multiple shipping addresses.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"noteText"),(0,r.kt)("td",{parentName:"tr",align:null},"The category of a payment.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," 1 \u2013 International shipping",(0,r.kt)("br",null)," 2 \u2013 Local delivery",(0,r.kt)("br",null)," 3 \u2013 BOPIS, Buy online pick-up in store ",(0,r.kt)("br",null),"4 \u2013 PUDO, Pick-up drop-off")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"locationType"),(0,r.kt)("td",{parentName:"tr",align:null},"Type of merchant location. Required if the items purchased will not be shipped, such as, BOPIS (Buy Online Pick-up In Store) or PUDO (Pick-Up Drop-Off) transactions.",(0,r.kt)("br",null)," ",(0,r.kt)("br",null),"  Possible values are:",(0,r.kt)("br",null),"  1 \u2013 Consumer.",(0,r.kt)("br",null),"  2 \u2013 Store, for BOPIS transactions.",(0,r.kt)("br",null),"  3 \u2013 PickupDropoff, for PUDO transactions.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"locationID"),(0,r.kt)("td",{parentName:"tr",align:null},"Location ID specified by the merchant for BOPIS (Buy Online Pick-up In Store) or PUDO (Pick-Up Drop-Off) transactions.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sellerPayPalAccountID"),(0,r.kt)("td",{parentName:"tr",align:null},"Unique identifier for the Merchant. For parallel payments, this field is required and must contain the Payer Id or the email address of the Merchant.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"invNum"),(0,r.kt)("td",{parentName:"tr",align:null},"Merchant\u2019s invoice or tracking number.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"custom"),(0,r.kt)("td",{parentName:"tr",align:null},"Custom field for your own use. buyerID")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"buyerID"),(0,r.kt)("td",{parentName:"tr",align:null},"The unique identifier provided by eBay for this buyer. The value may or may not be the same as the username. In the case of eBay, it is different.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"buyerUsername"),(0,r.kt)("td",{parentName:"tr",align:null},"The username of the user at the marketplaces site.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"buyerRegistrationDate"),(0,r.kt)("td",{parentName:"tr",align:null},"Date when the user registered with the marketplace. In UTC/GMT format, for example, 2013-08-24T05:38:48Z.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"allowPushFunding"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates whether the Merchant can accept push funding.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," 0 \u2013 Merchant cannot accept push funding.",(0,r.kt)("br",null)," 1 \u2013 Merchant can accept push funding.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"userSelectedFundingSource"),(0,r.kt)("td",{parentName:"tr",align:null},"This element could be used to specify the preferred funding option for a guest user. However, the ",(0,r.kt)("inlineCode",{parentName:"td"},"landingPage")," Checkout option must also be set to Billing, otherwise, it is ignored.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," ChinaUnionPay.",(0,r.kt)("br",null)," CreditCard.",(0,r.kt)("br",null)," ELV.",(0,r.kt)("br",null)," QIWI.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"billingType"),(0,r.kt)("td",{parentName:"tr",align:null},"Type of billing agreement for reference transactions. You must have permission from PayPal to use this field.",(0,r.kt)("br",null),(0,r.kt)("br",null),"Possible values are:",(0,r.kt)("br",null)," MerchantInitiatedBilling \u2013 PayPal creates a billing agreement for each transaction associated with buyer.",(0,r.kt)("br",null)," MerchantInitiatedBillingSingleAgreement \u2013 PayPal creates a single billing agreement for all transactions associated with buyer. Use this value unless you need per-transaction billing agreements.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"billingAgreementDescription"),(0,r.kt)("td",{parentName:"tr",align:null},'Description of goods or services associated with the billing agreement. This field is required for each recurring payment billing agreement. PayPal recommends that the description contain a brief summary of the billing agreement terms and conditions. For example, buyer is billed at "9.99 per month for 2 years".')),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"paymentType"),(0,r.kt)("td",{parentName:"tr",align:null},"Type of PayPal payment you require for the billing agreement.",(0,r.kt)("br",null),(0,r.kt)("br",null),"Possible values are:",(0,r.kt)("br",null),"  Any \u2013 The merchant accepts any payment method for the billing agreement, even if it could take a few working days for the movement of funds to the merchant account. This includes echeck, in addition to credit or debit cards and PayPal balance. ",(0,r.kt)("br",null),"InstantOnly \u2013 The payment options accepted by the merchant are credit cards, debit cards or PayPal balance only because the merchant expects immediate payment.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taxIDType"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer's tax ID type. This field is required for Brazil and used for Brazil only.",(0,r.kt)("br",null),(0,r.kt)("br",null)," For Brazil use only: The tax ID type is BR_CPF for individuals and BR_CNPJ for businesses.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taxID"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer's tax ID. This field is required for Brazil and used for Brazil only.",(0,r.kt)("br",null),(0,r.kt)("br",null),"For Brazil use only: The tax ID is 11 single-byte characters for individuals and 14 single-byte characters for businesses")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"returnFMFDetails"),(0,r.kt)("td",{parentName:"tr",align:null},"Flag to indicate whether you want the results returned by Fraud Management Filters when doing a recurring/reference transaction.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," 0 \u2013 Do not receive FMF details (default).",(0,r.kt)("br",null)," 1 \u2013 Receive FMF details.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"riskSessionCorrelationID"),(0,r.kt)("td",{parentName:"tr",align:null},"The ID of the risk session for correlation purposes when doing a recurring/reference transaction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"merchantSessionID"),(0,r.kt)("td",{parentName:"tr",align:null},"The buyer session identification token when doing a recurring/reference transaction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"buttonSource"),(0,r.kt)("td",{parentName:"tr",align:null},"PayPal Partner\u2019s BN Code (if required). The BN code is the unique button source code provided by PayPal to its partners and added by its partners to the PayPal buttons used by merchants to offer the PayPal Services that are enabled through Partner Product. The button source code provides a means of identifying and tracking referred merchants' payments.")))),(0,r.kt)("p",null,"For further information on the options, refer to the PayPal Express Checkout documentation: ",(0,r.kt)("a",{parentName:"p",href:"https://developer.paypal.com/docs/classic/api/merchant/SetExpressCheckout_API_Operation_NVP/"},"https://developer.paypal.com/docs/classic/api/merchant/SetExpressCheckout_API_Operation_NVP/"),"."),(0,r.kt)("h3",{id:"purchase-details"},"Purchase Details"),(0,r.kt)("p",null,"The following request fields may be sent to provide information on the purchased items and to populate the cart on the PayPal Checkout."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shippingAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Shipping costs.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shippingDiscountAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Discount applied to shipping costs.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"handlingAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Handling costs.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"insuranceAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Insurance costs.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"itemXXDescription"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Description of XXth item purchased.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"itemXXQuantity"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Quantity of XXth item purchased.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"itemXXAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Gross amount for XXth item purchased.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"itemXXTaxAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Tax amount for XXth item purchased.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"itemXXProductCode"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Product code for XXth item purchased.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"itemXXProductURL"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Shopping cart URL for XXth item purchased.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"itemXXSize"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Size of XXth item purchased in the format \u2018LengthxWidthxHeight Unit\u2019.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"itemXXWeight"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Weight of XXth item purchased in the format \u2018Weight Unit\u2019.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"items"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Nested array of line items.")))),(0,r.kt)("p",null,"Note: The shopping cart items must total to the amount specified in the transaction. If they do not, cart items will not be sent to the PayPal Checkout."),(0,r.kt)("h3",{id:"checkoutDetails"},"Checkout Details"),(0,r.kt)("p",null,"The following details may be provided in the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutDetails")," field included in the response. The details will be returned using the record format detailed in the ",(0,r.kt)("a",{parentName:"p",href:"overview#fieldFormats"},"format guide"),". "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"correlationID"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Correlation ID, which uniquely identifies the transaction to PayPal.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutStatus"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Status of the Checkout session. If payment is completed, the transaction identification number of the resulting transaction is returned.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," PaymentActionNotInitiated ",(0,r.kt)("br",null),"PaymentActionFailed ",(0,r.kt)("br",null),"PaymentActionInProgress",(0,r.kt)("br",null)," PaymentActionCompleted")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"invNum"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Merchant\u2019s invoice or tracking number, as set sent in ",(0,r.kt)("inlineCode",{parentName:"td"},"checkoutDetails.invNum")," or assigned by the Gateway.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"custom"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Merchant\u2019s invoice or tracking number, as set sent in ",(0,r.kt)("inlineCode",{parentName:"td"},"checkoutDetails.custom")," or assigned by the Gateway.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"payPalAdjustment"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"A discount or gift certificate offered by PayPal to the buyer. This amount is represented by a negative amount. If the buyer has a negative PayPal account balance, PayPal adds the negative balance to the transaction amount, which is represented as a positive value.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"buyerMarketingEmail"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer's marketing email address. Only available if email option was enabled in the initial request using ",(0,r.kt)("inlineCode",{parentName:"td"},"checkoutOptions.buyerEmailOptInEnable")," option.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"note"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer\u2019s note to the Merchant. Only available if the leaving of notes was enabled in the initial request using ",(0,r.kt)("inlineCode",{parentName:"td"},"checkoutOptions.allowNote")," option.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"cartChangeTolerance"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates whether a cart's contents can be modified. If this parameter is not returned, then assume the cart can be modified. This will return NONE if financing was used in Germany.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," NONE \u2013 The cart cannot be changed.",(0,r.kt)("br",null)," FLEXIBLE \u2013 The cart can be changed.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"payerID"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer\u2019s PayPal Customer Account ID.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"payerStatus"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer\u2019s PayPal status.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are: ",(0,r.kt)("br",null),"verified",(0,r.kt)("br",null)," unverified")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"billingName"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer\u2019s name. Also returned in ",(0,r.kt)("inlineCode",{parentName:"td"},"customerName"),". Permission is needed from PayPal to support this field.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"firstName"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer\u2019s first name. Also returned in ",(0,r.kt)("inlineCode",{parentName:"td"},"customerName"),". These fields are used when no permission to use billingName.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"middleName"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer\u2019s middle name. Also returned in ",(0,r.kt)("inlineCode",{parentName:"td"},"customerName"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"lastName"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer\u2019s last name. Also returned in ",(0,r.kt)("inlineCode",{parentName:"td"},"customerName"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"suffix"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer\u2019s name suffix. Also returned in ",(0,r.kt)("inlineCode",{parentName:"td"},"customerName"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"business"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer's business name. Also returned in ",(0,r.kt)("inlineCode",{parentName:"td"},"customerCompany"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"street"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer\u2019s street first line. Also returned in ",(0,r.kt)("inlineCode",{parentName:"td"},"customerAddress"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"street2"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer\u2019s street second line. Also returned in ",(0,r.kt)("inlineCode",{parentName:"td"},"customerAddress"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"city"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer\u2019s city Also returned in ",(0,r.kt)("inlineCode",{parentName:"td"},"customerTown"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"state"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer\u2019s state. Also returned in ",(0,r.kt)("inlineCode",{parentName:"td"},"customerCounty"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"zip"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer\u2019s postal code. Also returned in ",(0,r.kt)("inlineCode",{parentName:"td"},"customerPostcode"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"countryCode"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer's country code. (ISO 2 char. code) Also returned in ",(0,r.kt)("inlineCode",{parentName:"td"},"customerCountryCode"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"countryName"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer's country name.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"phoneNum"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer's contact phone number. Also returned in ",(0,r.kt)("inlineCode",{parentName:"td"},"customerPhone"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"email"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer\u2019s email address. Also returned in ",(0,r.kt)("inlineCode",{parentName:"td"},"customerEmail"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shipToName"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Name of person/entity to ship to. Also returned in ",(0,r.kt)("inlineCode",{parentName:"td"},"deliveryName"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shipToStreet"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Ship to street first line. Also returned in ",(0,r.kt)("inlineCode",{parentName:"td"},"deliveryAddress"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shipToStreet2"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Ship to street second line. Also returned in ",(0,r.kt)("inlineCode",{parentName:"td"},"deliveryAddress"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shipToCity"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Ship to city. Also returned in ",(0,r.kt)("inlineCode",{parentName:"td"},"deliveryTown"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shipToState"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Ship to state. Also returned in ",(0,r.kt)("inlineCode",{parentName:"td"},"deliveryCounty"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shipToZip"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Ship to postal code. Also returned in ",(0,r.kt)("inlineCode",{parentName:"td"},"deliveryPostcode"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shipToCountryCode"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Ship to country code. (ISO 2 char. code) Also returned in ",(0,r.kt)("inlineCode",{parentName:"td"},"deliveryCountryCode"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shipToCountryName"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Ship to country name.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shipToPhoneNum"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Ship to phone number. Also returned in ",(0,r.kt)("inlineCode",{parentName:"td"},"deliveryPhone"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shipToAddressStatus"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Status of shipping address on file with PayPal.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," none ",(0,r.kt)("br",null),"Confirmed",(0,r.kt)("br",null)," Unconfirmed")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"addressNormalizationStatus"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The PayPal address normalisation status for Brazilian addresses.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," None",(0,r.kt)("br",null)," Normalized",(0,r.kt)("br",null)," Unnormalized",(0,r.kt)("br",null)," UserPreferred ",(0,r.kt)("br",null),(0,r.kt)("br",null),"This field is passed directly to PayPal and therefore the field name and value must be spelt \u2018ize\u2019 and not \u2018ise\u2019.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"amount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Total amount for this order.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"itemAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Total item amount for this order.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taxAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Tax amount for this order.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"exchangeRate"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Exchange rate for this order.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shippingAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Shipping amount for this order.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"handlingAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Handling amount for this order.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"insuranceAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Insurance amount for this order.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shipDiscountAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Shipping discount amount for this order.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"desc"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Description of items the buyer is purchasing.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"currencyCode"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"ISO 3-letter currency code.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"isFinancing"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates whether the Customer ultimately was approved for and chose to make the payment using the approved instalment credit.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," FALSE \u2013 financing not in use",(0,r.kt)("br",null)," TRUE \u2013 financing approved and used")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"financingFeeAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The transaction financing fee associated with the payment. This will be set to the instalment fee amount that is the same as the estimated cost of credit or the interest/fees amount the user will have to pay during the lifetime of the loan. This field will only be included in instalment credit orders. In the case of \u201csame as cash\u201d or \u201cno interest\u201d offers, this will be set to 0.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"financingTerm"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The length of the financing term, in months. Example values are 6, 12, 18 and 24 months.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"financingMonthlyPayment"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"This is the estimated amount per month that the Customer will need to pay including fees and interest.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"financingTotalCost"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"This is the estimated total payment amount including interest and fees that the user will pay during the lifetime of the loan.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"financingDiscountAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Discount amount for the buyer if paid in one instalment.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"regularTakeFeeAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Fee of the regular take rate on the transaction amount. It could be equal to ",(0,r.kt)("inlineCode",{parentName:"td"},"financingDiscountAmount")," in the case of non-instalment transactions.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"noteText"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Note to Merchant.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"transactionID"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"PayPal transaction ID.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"allowedPaymentMethod"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The payment method type as specified in the initial request.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"paymentRequestID"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"A unique identifier of the specific payment request.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"bucketCategoryType"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The category of a payment as specified in the initial request.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"instrumentCategory"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Identifies the category of the promotional payment instrument.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," 1 \u2013 PayPal Credit\xae (formerly Bill Me Later\xae).",(0,r.kt)("br",null)," 2 \u2013 A Private Label Credit Card (PLCC) or co-branded payment card.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"instrumentID"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"An instrument ID (issued by the external party) corresponding to the funding source used in the payment.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shippingCalculationMode"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Describes how the options that were presented to the buyer were determined.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," API \u2013 Callback ",(0,r.kt)("br",null),"API \u2013 Flatrate")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"insuranceOptionSelected"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The option that the buyer chose for insurance.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," Yes \u2013 opted for insurance.",(0,r.kt)("br",null)," No \u2013 did not opt for insurance.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shippingOptionIsDefault"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates whether the buyer chose the default shipping option.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," true \u2013 chose the default shipping option.",(0,r.kt)("br",null)," false \u2013 did not choose the default shipping option.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shippingOptionAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The shipping amount that the buyer chose.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shippingOptionName"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The name of the shipping option, such as Air or Ground.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"scheduledShippingDate"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The scheduled shipping date is returned only if scheduled shipping options are passed in the request.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"scheduledShippingPeriod"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The scheduled shipping period is returned only if scheduled shipping options are passed in the request.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sellerPayPalAcountID"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Unique identifier for the merchant. For parallel payments, this field contains either the Payer Id or the email address of the merchant.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taxIDType"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer's tax ID type. This field is required for Brazil and used for Brazil only. For Brazil use only: The tax ID type is BR_CPF for individuals and BR_CNPJ for businesses.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taxID"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer's tax ID. This field is required for Brazil and used for Brazil only. For Brazil use only: The tax ID is 11 single-byte characters for individuals and 14 single-byte characters for businesses.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"billingAgreementID"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Identification number of the billing agreement. When the buyer approves the billing agreement, it becomes valid and remains valid until it is cancelled by the buyer.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"billingAgreementAcceptedStatus"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Indicates whether the buyer accepted the billing agreement for a recurring payment. Currently, this field is always returned in the response for agreement based products, such as subscriptions; reference transactions; recurring payments; and regular single payment transactions.",(0,r.kt)("br",null),(0,r.kt)("br",null)," 0 \u2013 Not accepted.",(0,r.kt)("br",null)," 1 \u2013 Accepted.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"paymentStatus"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Status of the payment.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," None \u2013 No status. ",(0,r.kt)("br",null),"Canceled-Reversal \u2013 A reversal has been cancelled: for example, when you win a dispute and the funds for the reversal have been returned to you.",(0,r.kt)("br",null)," Completed \u2013 The payment has been completed and the funds have been added successfully to your account balance.",(0,r.kt)("br",null)," Denied \u2013 You denied the payment. This happens only if the payment was previously pending because of possible reasons described for the pendingReason element.",(0,r.kt)("br",null)," Expired \u2013 The authorisation period for this payment has been reached.",(0,r.kt)("br",null)," Failed \u2013 The payment has failed. This happens only if the payment was made from your buyer's bank account. ",(0,r.kt)("br",null),"In-Progress \u2013 The transaction has not terminated: for example, an authorisation may be awaiting completion.",(0,r.kt)("br",null)," Partially-Refunded \u2013 The payment has been partially refunded. ",(0,r.kt)("br",null),"Pending \u2013 The payment is pending. See the pendingReason field for more information. ",(0,r.kt)("br",null),"Refunded \u2013 You refunded the payment. ",(0,r.kt)("br",null),"Reversed \u2013 A payment was reversed due to a chargeback or other type of reversal. The funds have been removed from your account balance and returned to the buyer. The reason for the reversal is specified in the reasonCode element. ",(0,r.kt)("br",null),"Processed \u2013 A payment has been accepted. ",(0,r.kt)("br",null),"Voided \u2013 An authorisation for this transaction has been voided.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"refundStatus"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Status of the refund.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible value are:",(0,r.kt)("br",null)," none \u2013 returned if the refund fails ",(0,r.kt)("br",null),"instant \u2013 refund was instant ",(0,r.kt)("br",null),"delayed \u2013 refund was delayed")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"pendingReason"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The reason the payment is pending.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," none \u2013 No pending reason.",(0,r.kt)("br",null)," address \u2013 The payment is pending because your buyer did not include a confirmed shipping address and your Payment Receiving Preferences is set such that you want to accept or deny each of these payments manually. To change your preference, go to the Preferences section of your Profile. ",(0,r.kt)("br",null),"authorization \u2013 The payment is pending because it has been authorised but not settled. You must capture the funds first. ",(0,r.kt)("br",null),"echeck \u2013 The payment is pending because it was made by an eCheck that has not yet cleared.",(0,r.kt)("br",null)," intl \u2013 The payment is pending because you hold a non-U.S. account and do not have a withdrawal mechanism. You must manually accept or deny this payment from your Account Overview.",(0,r.kt)("br",null)," multi-currency \u2013 You do not have a balance in the currency sent, and you do not have your Payment Receiving Preferences set to automatically convert and accept this payment. You must manually accept or deny this payment.",(0,r.kt)("br",null)," order \u2013 The payment is pending because it is part of an order that has been authorised but not settled. ",(0,r.kt)("br",null),"payment-review \u2013 The payment is pending while it is being reviewed by PayPal for risk.",(0,r.kt)("br",null)," regulatory-review \u2013 The payment is pending while we make sure it meets regulatory requirements. You will be contacted again in from 24 to 72 hours with the outcome of the review. ",(0,r.kt)("br",null),"unilateral \u2013 The payment is pending because it was made to an email address that is not yet registered or confirmed.",(0,r.kt)("br",null)," verify \u2013 The payment is pending because you are not yet verified. You must verify your account before you can accept this payment. ",(0,r.kt)("br",null),"other \u2013 The payment is pending for a reason other than those listed above. For more information, contact PayPal Customer Service. ",(0,r.kt)("br",null),(0,r.kt)("br",null),(0,r.kt)("inlineCode",{parentName:"td"},"pendingReason")," is returned in the response only if paymentStatus is Pending.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"reasonCode"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The reason for a reversal if the transaction type is reversal.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," none \u2013 No reason code. ",(0,r.kt)("br",null),"chargeback \u2013 A reversal has occurred on this transaction due to a chargeback by your buyer. ",(0,r.kt)("br",null),"guarantee \u2013 A reversal has occurred on this transaction due to your buyer triggering a money-back guarantee. ",(0,r.kt)("br",null),"buyer-complaint \u2013 A reversal has occurred on this transaction due to a complaint about the transaction from your buyer.",(0,r.kt)("br",null)," refund \u2013 A reversal has occurred on this transaction because you have given the buyer a refund. ",(0,r.kt)("br",null),"other \u2013 A reversal has occurred on this transaction due to a reason not listed above.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"protectionEligibilityType"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The kind of seller protection in force for the transaction.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," ItemNotReceivedEligible \u2013 Merchant is protected by PayPal's Seller Protection Policy for Item Not Received.",(0,r.kt)("br",null)," UnauthorizedPaymentEligible7 \u2013 Merchant is protected by PayPal's Seller Protection Policy for Unauthorised Payments. ",(0,r.kt)("br",null),"Ineligible \u2013 Merchant is not protected under the Seller Protection Policy. (Multiple values are separated by commas)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"feeAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"PayPal fee amount charged for the transaction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"settleAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Amount deposited in your PayPal account after a currency conversion.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"storeID"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Store identifier as entered in the transaction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"terminalID"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Terminal identifier as entered in the transaction.")))),(0,r.kt)("h3",{id:"transaction-lifecycle"},"Transaction Lifecycle"),(0,r.kt)("p",null,"PayPal transactions will use the normal Authorise, Capture life cycle as documented in the section ",(0,r.kt)("a",{parentName:"p",href:"annexes#authoriseCaptureSettlement"},"Authorise, Capture and Settlement")," with the following differences. In addition, the PayPal ",(0,r.kt)("inlineCode",{parentName:"p"},"paymentAction")," option can be included in the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions")," field to alter the normal payment lifecycle further, to allow an Order, Authorise, Capture model or a straight Sale model to be specified."),(0,r.kt)("h4",{id:"order"},"Order"),(0,r.kt)("p",null,"If a ",(0,r.kt)("inlineCode",{parentName:"p"},"paymentAction")," with a value of \u2018Order\u2019 is sent, then PayPal will store the transaction but delay authorising it until instructed. To instruct PayPal to authorise the transaction, a further management request can be sent to the Gateway with an ",(0,r.kt)("inlineCode",{parentName:"p"},"action")," of \u2018AUTHORISE\u2019 and the ",(0,r.kt)("inlineCode",{parentName:"p"},"xref")," of the transaction to authorise. Alternatively, the AUTHORISE command can be selected in the Merchant Management System (MMS). The transaction will be left in the \u2018received\u2019 state."),(0,r.kt)("h4",{id:"authorise"},"Authorise"),(0,r.kt)("p",null,"If no ",(0,r.kt)("inlineCode",{parentName:"p"},"paymentAction")," is specified or a ",(0,r.kt)("inlineCode",{parentName:"p"},"paymentAction")," with a value of \u2018Authorize\u2019 is sent, then PayPal will authorise the transaction on receipt as per a standard card transaction and you can capture it later if you used the ",(0,r.kt)("inlineCode",{parentName:"p"},"captureDelay")," field. Note that the value uses the PayPal spelling \u2018Authorize\u2019, and not the British spelling \u2018Authorise\u2019."),(0,r.kt)("p",null,"For the first three days (by default) of the authorisation, funds are reserved. This is known as the honour period. After the honour period, captures can still be attempted, but may be returned with insufficient funds."),(0,r.kt)("p",null,"Authorisations have a fixed expiry period of 29 days."),(0,r.kt)("h4",{id:"sale"},"Sale"),(0,r.kt)("p",null,"If a ",(0,r.kt)("inlineCode",{parentName:"p"},"paymentAction")," with a value of \u2018Sale\u2019 is sent, then PayPal will immediately capture the transaction after authorisation. The transaction will be regarded as having been settled and you will not be able to capture it manually and it will not be sent for settlement that evening. The transaction will be left in either the accepted or rejected terminal states depending on whether PayPal accepted or rejected the transaction."),(0,r.kt)("h4",{id:"capture"},"Capture"),(0,r.kt)("p",null,"Transactions that have been authorised by PayPal and not immediately settled due to a paymentAction of \u2018Sale\u2019 will be able to be captured as normal."),(0,r.kt)("p",null,"Captures are sent to PayPal immediately and the PayPal response and the transaction will be left in either the accepted or rejected terminal state depending on whether PayPal accepted or rejected the capture request."),(0,r.kt)("p",null,"There is no need to wait for the nightly settlement batch to run as with normal card transactions. This means that it is not possible to change the amount to be captured or cancel the transaction one a capture has been requested."),(0,r.kt)("p",null,"Note: PayPal allows multiple captures where they sum the individual capture amounts \u2013 ie in a different manner from the Gateway\u2019s, where only a single capture operation can be processed."),(0,r.kt)("h4",{id:"refund"},"Refund"),(0,r.kt)("p",null,"PayPal transactions can be refunded in the same way as normal card transactions. However, in the same way as capture requests, these will be sent to PayPal immediately and not batched up to be sent as part of the nightly settlement process. This means that the transaction will be left in either the accepted or rejected terminal state, depending on whether PayPal accepted or rejected the refund request."),(0,r.kt)("p",null,"Refunds can be made for full or partial amounts, with multiple refunds allowed up to the original authorised amount."),(0,r.kt)("p",null,"By default, PayPal allows a Merchant up to 60 days from the original authorised transaction date to perform refunds."),(0,r.kt)("h4",{id:"cancel"},"Cancel"),(0,r.kt)("p",null,"You should cancel any transactions that you do not wish to capture in order to prevent \u2018pending\u2019 transactions on the Customer\u2019s PayPal account."),(0,r.kt)("p",null,"Authorisations should be cancelled when an initial authorisation was created to confirm the validity of funds during checkout, but the goods will not ship for a significant amount of time (>29 days). Cancelling the transaction will mean that you will have to contact the Customer for an alternative payment method."),(0,r.kt)("p",null,"All transactions must be completed by being captured or cancelled."),(0,r.kt)("h4",{id:"pending-payments"},"Pending Payments"),(0,r.kt)("p",null,"PayPal may put a transaction into a pending state when flagged for additional fraud review. This state is known to PayPal as payment review or IPR."),(0,r.kt)("p",null,"IPR transactions will be automatically cancelled by the Gateway and treated as referred transactions with a ",(0,r.kt)("inlineCode",{parentName:"p"},"responseCode")," of 2 and a ",(0,r.kt)("inlineCode",{parentName:"p"},"responseMessage")," indicating the reason that the transaction was put into a pending state. Unlike card referred transactions, an authorisation code cannot be obtained from PayPal verbally and then the transaction resent."),(0,r.kt)("h3",{id:"reference-transactions"},"Reference Transactions"),(0,r.kt)("p",null,"PayPal does not allow ad hoc Credentials on File (COF) type repeat or recurring transactions using the xref of a reference transaction unless that transaction has specifically started a PayPal Billing Agreement."),(0,r.kt)("p",null,"If you want to be able to make future repeat or recurring transactions, then the initial transaction must include the ",(0,r.kt)("inlineCode",{parentName:"p"},"billingType")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"billingAgreementDescription")," options in the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions")," so as to identify this transaction as the start of a recurring billing sequence."),(0,r.kt)("p",null,"This will cause the Gateway to request PayPal to set up a Billing Agreement between you and the Customer. In this case, the PayPal Billing Agreement ID will be returned as part of the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutDetails")," and displayed on the Merchant Management System (MMS) as part of the payment details, so that you can easily see which PayPal transactions can be used for recurring billing."),(0,r.kt)("h2",{id:"amazon-pay-transactions"},"Amazon Pay Transactions"),(0,r.kt)("p",null,"Amazon Pay is an additional payment method that is available to all Merchants using the Gateway that have an Amazon Pay account."),(0,r.kt)("p",null,"To use Amazon Pay, you will be supplied with a separate Amazon Pay Merchant account that can be grouped with your main Merchant account using the account mapping facility as documented in the ",(0,r.kt)("a",{parentName:"p",href:"annexes#merchantAccountMapping"},"merchant account mapping")," section. This allows transactions to be sent using your main Merchant Account and then routed automatically to the Amazon Pay Merchant Account in the same mapping group."),(0,r.kt)("p",null,"It allows you to offer payment via Amazon Pay in addition to normal card payments."),(0,r.kt)("p",null,"Amazon Pay transactions will appear in the Merchant Management System (MMS) alongside any card payments and can be captured, cancelled and refunded in the same way as card payments."),(0,r.kt)("p",null,"Amazon Pay transactions can also be used for recurring billing but require you to indicate in the initial transaction that it will be the basis for recurring billing and a billing agreement will be entered into between your Customer and Amazon Pay when they agree to the payment."),(0,r.kt)("p",null,"Amazon Pay transactions cannot be used for ad-hoc Credentials on File (COF) repeat transactions unless a billing agreement has been set up."),(0,r.kt)("p",null,"For more information on how to accept Amazon Pay transactions, please contact customer support."),(0,r.kt)("h4",{id:"benefits-3"},"Benefits"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Provides your customers with the flexibility of paying using their Amazon Pay account when this is more suitable to them."),(0,r.kt)("li",{parentName:"ul"},"The Amazon Pay Checkout can be added as an overlay on the standard checkout to help improve conversion rates with an easier way to pay without customers leaving your website."),(0,r.kt)("li",{parentName:"ul"},"There are no extra costs to add an Amazon Pay Merchant Account. However, you will still be liable for the Amazon Pay transaction fees."),(0,r.kt)("li",{parentName:"ul"},"The full Amazon Pay transaction information is available and returned as part of the transaction."),(0,r.kt)("li",{parentName:"ul"},"Transactions are controlled within the Merchant Management System (MMS) in the same manner as normal card transactions.")),(0,r.kt)("h4",{id:"limitations-3"},"Limitations"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You will need an Amazon Pay account."),(0,r.kt)("li",{parentName:"ul"},"Recurring transactions are not supported unless part of a prearranged billing agreement."),(0,r.kt)("li",{parentName:"ul"},"Independent refunds that are not tied to a previous sale transaction are not supported without prior agreement."),(0,r.kt)("li",{parentName:"ul"},"Transactions require a browser in order to display the Amazon Pay Checkout widgets.")),(0,r.kt)("h3",{id:"implementation-2"},"Implementation"),(0,r.kt)("p",null,"Amazon Pay transactions require you to display an Amazon Pay Checkout to your Customer as part of the transaction flow. The transaction must be done in two stages, with the Checkout page being displayed between the stages. They can also optionally be done in three stages, allowing you to display an order confirmation after the Checkout page and before authorising the transaction. You can change the amount at this stage to allow for shipping costs when you know the confirmed delivery address the Customer selected as part of the Amazon Pay Checkout."),(0,r.kt)("p",null,"Amazon Pay do not provide a ready built Checkout page and require you to create one on your servers using the JavaScript widget toolkit they provide."),(0,r.kt)("p",null,"Amazon Pay supports the normal payment and management actions. This section explains how to make payment requests. Management requests are performed as detailed in the ",(0,r.kt)("a",{parentName:"p",href:"transactiontypes#managementOperations"},"management operations")," section."),(0,r.kt)("p",null,"To customise the Amazon Pay Checkout experience, you may send various options in the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions")," field in your initial request."),(0,r.kt)("p",null,"Additional information available from the Amazon Pay Checkout will be made available in the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutDetails")," response field."),(0,r.kt)("p",null,"The direct integration uses two complex fields to pass data between the Amazon Pay JavaScript widgets and the Gateway. The ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRequest")," field will be provided by the Gateway and is a record whose name/value properties should be used to help initialise the widgets. The corresponding ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutResponse")," field should be returned to the Gateway and must be a record containing name/value properties received from the widgets."),(0,r.kt)("p",null,"The contents of the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutDetails"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRequest")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutResponse")," fields are formatted using the record format detailed in the ",(0,r.kt)("a",{parentName:"p",href:"overview#fieldFormats"},"format guide"),", the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions")," field also supports being provided using the serialised record format."),(0,r.kt)("h3",{id:"initial-request-checkout-preparation-1"},"Initial Request (Checkout Preparation)"),(0,r.kt)("p",null,"To request that a transaction be processed via Amazon Pay, the request must contain a ",(0,r.kt)("inlineCode",{parentName:"p"},"paymentMethod")," of \u2018amazonpay\u2019 In addition, you may send ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions")," to customise the Checkout experience. When the Gateway receives this ",(0,r.kt)("inlineCode",{parentName:"p"},"paymentMethod"),", assuming there are no other errors with the request, it will attempt to find a suitable Amazon Pay Merchant Account in the current account mapping group (refer to the ",(0,r.kt)("a",{parentName:"p",href:"annexes#merchantAccountMapping"},"merchant account mapping")," section)."),(0,r.kt)("p",null,"If the Gateway is unable to find a suitable account, then the transaction will be aborted, and it will respond with a ",(0,r.kt)("inlineCode",{parentName:"p"},"responseCode")," of 66364 (INVALID PAYMENTMETHOD)."),(0,r.kt)("p",null,"Otherwise, the Gateway will respond with a ",(0,r.kt)("inlineCode",{parentName:"p"},"responseCode")," of 65826 (CHECKOUT REQUIRED) and the response will include a ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutURL")," field containing the URL required to load the Amazon Pay JavaScript Widgets; and a ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRequest")," containing any data required by those Widgets. The response will also contain a unique ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRef")," that must be echoed back in the continuation requests."),(0,r.kt)("p",null,"At this point, your server must create an Amazon Pay Checkout page using their JavaScript Widgets. Further details on how to use the Widgets are provided in the Amazon Pay guide at ",(0,r.kt)("a",{parentName:"p",href:"https://developer.amazonpay.com/docs/classic/express-checkout/in-context/enable_in_context_checkout/"},"https://developer.amazonpay.com/docs/classic/express-checkout/in-context/enable_in_context_checkout/"),"."),(0,r.kt)("h4",{id:"request-fields-4"},"Request Fields"),(0,r.kt)("p",null,"These fields should be sent in addition to the ",(0,r.kt)("a",{parentName:"p",href:"/hostedpaymentfields/transactiontypes/#transactionRequest"},"basic request fields")," excluding any card details."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"paymentMethod"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Must contain the value \u2018amazonpay\u2019 in lower case letters only.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutRedirectURL"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Reserved for future use.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutOptions"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Record containing options used to customise the Amazon Pay Checkout. See the ",(0,r.kt)("a",{parentName:"td",href:"#amazonPayCheckoutOptions"},"checkout options")," section.")))),(0,r.kt)("h4",{id:"response-fields-3"},"Response Fields"),(0,r.kt)("p",null,"These fields will be returned, in addition to the request fields above and the ",(0,r.kt)("a",{parentName:"p",href:"/hostedpaymentfields/transactiontypes/#transactionResponse"},"basic response fields"),"."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutRef"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Unique reference required to continue this transaction when the Amazon Pay Checkout has completed.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Unique name of the Checkout. For Amazon Pay this is the value amazonpay.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutURL"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"URL required to load the Amazon Pay JavaScript Widgets.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"acquirerResponseDetails"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Record containing details about the Amazon Pay response containing any error messages and codes. This can be used together with the normal ",(0,r.kt)("inlineCode",{parentName:"td"},"responseCode")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"responseMessage")," response fields to further determine the reason for any failure.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutRequest"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Record containing data required for the Amazon Pay Widgets such as:",(0,r.kt)("br",null),(0,r.kt)("br",null)," \u2022 merchantID \u2013 Amazon Pay merchant id ",(0,r.kt)("br",null),"\u2022 clientID \u2013 Amazon Pay client id ",(0,r.kt)("br",null),"\u2022 sandbox \u2013 true if Amazon Pay sandbox ",(0,r.kt)("br",null),"\u2022 region \u2013 Amazon Pay API region code",(0,r.kt)("br",null)," \u2022 scope \u2013 Login Widget scope parameter")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutOptions"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Record containing any Checkout options passed in the request.")))),(0,r.kt)("h3",{id:"continuation-request-checkout-details-and-authorise-1"},"Continuation Request (Checkout Details and Authorise)"),(0,r.kt)("p",null,"On completion of the Amazon Pay Widgets, the Merchant should send the information created by the Widgets to the Gateway together with a status value. If the Checkout was successful, the status will be \u2018success\u2019; alternatively, if the Checkout was cancelled, the status will be \u2018cancel\u2019. Any ",(0,r.kt)("inlineCode",{parentName:"p"},"accessToken")," generated by the Amazon Pay Login Widget; ",(0,r.kt)("inlineCode",{parentName:"p"},"orderReferenceID"),", generated by the Wallet or Address Widgets; and ",(0,r.kt)("inlineCode",{parentName:"p"},"billingAgreementID")," generated by the optional Billing Widget, must be added to the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutResponse")," field and sent in a new request to the Gateway. The ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutResponse")," field can be sent either as a URL query string; as a JSON encoded string; or as an array of parameters. This new request will load the Checkout details, including any purchase and delivery address details as required, and send the transaction to Amazon Pay for authorisation, returning the result as in the case of a normal authorisation transaction. The new request must contain the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRef")," received in the initial response."),(0,r.kt)("h4",{id:"request-fields-5"},"Request Fields"),(0,r.kt)("p",null,"These fields may be sent alone. It is only necessary to send the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRef")," and the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutResponse")," in the continuation request because the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRef")," will identify the Merchant Account and initial request. The message does not need to be signed. You can send any of the normal request fields to modify or supplement the initial request \u2013 however, in this case the request should be signed. The ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRedirectURL")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions")," fields sent in the initial request cannot be modified and any sent in the second request must match those used in the first request, or the second request will fail with a ",(0,r.kt)("inlineCode",{parentName:"p"},"responseCode")," of 64442 (REQUEST MISMATCH)."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutRef"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Unique reference returned in the initial response.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutResponse"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"The data received from the Amazon Pay Checkout Widgets together with a status value.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutOnly"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Pass Y to complete the processing as far as the next Checkout stage and then return with the loaded Checkout details.")))),(0,r.kt)("h4",{id:"response-fields-4"},"Response Fields"),(0,r.kt)("p",null,"These fields will be returned, in addition to the request fields above and the ",(0,r.kt)("a",{parentName:"p",href:"/hostedpaymentfields/transactiontypes/#transactionResponse"},"basic response fields"),"."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutRef"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Provided if ",(0,r.kt)("inlineCode",{parentName:"td"},"checkoutOnly")," was used in the continuation response to indicate that a further request will be sent to finalise the transaction.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Unique name of the Checkout. For Amazon Pay this is the value amazonpay.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutDetails"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Record containing options used to customise the Amazon Pay Checkout. Refer to the ",(0,r.kt)("a",{parentName:"td",href:"#checkoutDetails"},"checkout details")," section.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"acquirerResponseDetails"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Record containing details about the Amazon Pay response containing any error messages and codes. This can be used together with the normal ",(0,r.kt)("inlineCode",{parentName:"td"},"responseCode")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"responseMessage")," response fields to determine further the reason for any failure.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"customerXXXX"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Customer details if provided by the Amazon Pay Checkout. The response will include the Customer/billing address details if provided by the Amazon Pay Checkout.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"deliveryXXXX"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Delivery details if provided by the Amazon Pay Checkout.The response will include the delivery address details if provided by the Amazon Pay Checkout.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"receiverXXXX"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Buyer details if provided by Amazon Pay. Amazon Pay will usually provide the buyer\u2019s name, postcode and email only, which are returned in the ",(0,r.kt)("inlineCode",{parentName:"td"},"receiverName"),", ",(0,r.kt)("inlineCode",{parentName:"td"},"receiverPostcode")," and ",(0,r.kt)("inlineCode",{parentName:"td"},"receiverEmail")," fields accordingly")))),(0,r.kt)("h3",{id:"separate-checkout-details-and-authorisation-requests-1"},"Separate Checkout Details and Authorisation Requests"),(0,r.kt)("p",null,"You can choose to obtain the Checkout details before actually sending the transaction for authorisation by sending the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOnly")," field in the above continuation request. If this field is sent with a value of \u2018Y\u2019 then the Gateway will load the Checkout details and then return them to you without sending the request for authorisation. You can then display them and/or adjust the amount, for example, according to delivery charges appropriate to the received delivery address. You should then send a new request containing the checkou`tRef received to continue the transaction and authorise it."),(0,r.kt)("p",null,"Note: this stage can be repeated multiple times by including the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOnly")," field with a value of \u2018Y\u2019 each time. To complete the transaction, the final request must not contain the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOnly")," field or it must not have a value of \u2018Y\u2019."),(0,r.kt)("h3",{id:"AmazonPayCheckoutOptions"},"Checkout Options"),(0,r.kt)("p",null,"The following options may be set in the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions")," field to customise the Amazon Pay Checkout. The options must be formatted using the record or serialised record formats detailed in the ",(0,r.kt)("a",{parentName:"p",href:"overview#fieldFormats"},"format guide"),"."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"billingAgreementRequired"),(0,r.kt)("td",{parentName:"tr",align:null},"Can be used to specify that a billing agreement must be started. Alternatively, the ",(0,r.kt)("inlineCode",{parentName:"td"},"rtAgreementType")," standard integration field can be used with a value of \u2018recurring\u2019 or \u2018instalment\u2019.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shippingAddressRequired"),(0,r.kt)("td",{parentName:"tr",align:null},"Indication that the shipping address is required, and the Address Checkout Widget will be used.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sellerOrderID"),(0,r.kt)("td",{parentName:"tr",align:null},"The Merchant specified identifier for this order. If not sent, then any value in the merchantOrderRef standard integration field is used.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sellerNote"),(0,r.kt)("td",{parentName:"tr",align:null},"Represents a description of the order that is displayed in emails to the buyer.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sellerAuthorizationNote"),(0,r.kt)("td",{parentName:"tr",align:null},"A description for the authorisation transaction that is shown in emails to the buyer.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sellerCaptureNote"),(0,r.kt)("td",{parentName:"tr",align:null},"A description for the capture that is displayed in emails to the buyer.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"sellerBillingAgreementID"),(0,r.kt)("td",{parentName:"tr",align:null},"The Merchant specified identifier for this billing agreement. If not sent, then any value in the ",(0,r.kt)("inlineCode",{parentName:"td"},"rtPolicyRef")," standard integration field is used.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"customInformation"),(0,r.kt)("td",{parentName:"tr",align:null},"Any additional information that you want to include with this order reference")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"supplementaryData"),(0,r.kt)("td",{parentName:"tr",align:null},"Supplementary data.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"softDescriptor"),(0,r.kt)("td",{parentName:"tr",align:null},"The description to be shown on the buyer's payment statement.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"billingAgreementRequired"),(0,r.kt)("td",{parentName:"tr",align:null},"Can be used to specify that a billing agreement must be started. Alternatively, the ",(0,r.kt)("inlineCode",{parentName:"td"},"rtAgreementType")," standard integration field can be used with a value of \u2018recurring\u2019 or \u2018instalment\u2019.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"shippingAddressRequired"),(0,r.kt)("td",{parentName:"tr",align:null},"Indication that the shipping address is required, and the Address Checkout Widget will be used.")))),(0,r.kt)("p",null,"For further information on the options refer to the Amazon Pay API Reference Guide: ",(0,r.kt)("a",{parentName:"p",href:"https://pay.amazon.com/us/developer/documentation/apireference/201751630"},"https://pay.amazon.com/us/developer/documentation/apireference/201751630"),". "),(0,r.kt)("h3",{id:"checkoutDetails"},"Checkout Details"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutDetails")," field included in the response above will contain the following values and any further values received from Amazon Pay allowing the Merchant to see the full Amazon Pay order information. The details will be returned using the record format detailed in the ",(0,r.kt)("a",{parentName:"p",href:"overview#fieldFormats"},"format guide"),". "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"referenceID"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Amazon Pay reference id. Either the ",(0,r.kt)("inlineCode",{parentName:"td"},"orderReferenceID")," or the ",(0,r.kt)("inlineCode",{parentName:"td"},"billingReferenceID")," where appropriate.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"accessToken"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Amazon Pay access token as sent in the continuation request ",(0,r.kt)("inlineCode",{parentName:"td"},"checkoutResponse")," data.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"bilingAgreementID"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Amazon Pay billing agreement id as sent in the continuation request ",(0,r.kt)("inlineCode",{parentName:"td"},"checkoutResponse")," data.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"orderReferenceID"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Amazon Pay order reference id as sent in the continuation request ",(0,r.kt)("inlineCode",{parentName:"td"},"checkoutResponse")," data.")))),(0,r.kt)("h3",{id:"transaction-lifecycle-1"},"Transaction Lifecycle"),(0,r.kt)("p",null,"Amazon Pay transactions will use the normal Authorise, Capture life cycle as documented in the section ",(0,r.kt)("a",{parentName:"p",href:"annexes#authoriseCaptureSettlement"},"Authorise, Capture and Settlement")," with the following differences."),(0,r.kt)("h4",{id:"capture-1"},"Capture"),(0,r.kt)("p",null,"Captures made by the Direct Integration or Merchant Management System (MMS) are sent to Amazon Pay immediately the transaction will be left in either the accepted or rejected terminal state depending on whether Amazon Pay accepted or rejected the capture request. Unlike card payments, captures do not flag the transaction to be included in the nightly settlement batch and therefore, when done they cannot be redone. This means that it is not possible to change the amount to be captured or cancel the transaction when a capture has been requested."),(0,r.kt)("p",null,"Captures that are not explicitly performed such as normal transactions or those with a captureDelay are still done as part of the nightly settlement batch."),(0,r.kt)("p",null,"Transactions that are not captured within 3 days will be placed in a pending state in the Amazon Pay system which is reflected as the tendered state in the Gateway and will show on the Merchant Management System as being settled."),(0,r.kt)("h4",{id:"refund-sale"},"Refund Sale"),(0,r.kt)("p",null,"Amazon Pay transactions can be refunded the same as normal card transactions. however, like capture requests, these will be sent to Amazon Pay immediately and not batched up and sent as part of the nightly settlement process. This means the transaction will be left in either the accepted or rejected state depending on whether Amazon Pay accepted or rejected the refund request."),(0,r.kt)("p",null,"Refunds can be made for full or partial amounts, with multiple refunds allowed up to the original authorised amount."),(0,r.kt)("h3",{id:"reference-transactions-1"},"Reference Transactions"),(0,r.kt)("p",null,"Amazon Pay does not allow ad hoc Credentials on File (COF) type repeat or recurring transactions using the xref of a reference transaction unless that transaction has specifically started an Amazon Pay Billing Agreement."),(0,r.kt)("p",null,"If you want to be able to make future repeat or recurring transactions, then the initial transaction must include an ",(0,r.kt)("inlineCode",{parentName:"p"},"rtAgreementType")," of recurring or instalment. Alternatively, the ",(0,r.kt)("inlineCode",{parentName:"p"},"billingAgreementRequired")," option can be included in the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions")," so as to identify this transaction as the start of a recurring billing sequence."),(0,r.kt)("p",null,"This will cause the Gateway to request Amazon Pay setup a Billing Agreement between you and the Customer. In this case the Amazon Pay Billing Consent Widget must be used in the Checkout and the ",(0,r.kt)("inlineCode",{parentName:"p"},"billingAgreementID")," it creates sent in the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutResponse")," data in the continuation request. Any billing agreement id will be displayed on the Merchant Management System (MMS) as part of the payment details so that you can easily see which Amazon Pay transactions can be used for recurring billing."),(0,r.kt)("h2",{id:"pay-by-bank-app-pbba-transactions"},"Pay by Bank app (PBBA) Transactions"),(0,r.kt)("p",null,"Pay by Bank app (PBBA) is an additional payment method that is available to all Merchants using the Gateway that have a Pay by Bank app account and an OBN Global Acquiring account."),(0,r.kt)("p",null,"PBBA, formerly known as Zapp, is an innovative, secure, and fully digital payment option in the UK, built and operated by VocaLink, a Mastercard company. It allows your Customers to pay, in real time, using the banking app on their phone. It's designed to make online checkout easier, whilst using all the security of their bank. Payments work through secure digital tokens, meaning your Customers never reveal any of their financial details when they are shopping."),(0,r.kt)("p",null,"To use PBBA you will be supplied with a separate PBBA Merchant account that can be grouped with your main Merchant Account using the account mapping facility as documented in the ",(0,r.kt)("a",{parentName:"p",href:"annexes#merchantAccountMapping"},"merchant account mapping")," section. This allows transactions to be sent using your main Merchant Account and then routed automatically to the PBBA Merchant Account in the same mapping group."),(0,r.kt)("p",null,"All transactions created with this payment method will appear in the Merchant Management System (MMS) together with the payment method that was used to process the transaction."),(0,r.kt)("p",null,"PBBA transactions cannot be used for ad-hoc Credentials on File (COF) repeat transactions or for recurring billing."),(0,r.kt)("p",null,"For more information on how to accept PBBA transactions please contact customer support."),(0,r.kt)("h4",{id:"benefits-4"},"Benefits"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Increased conversion rate through a simple, quick payment process."),(0,r.kt)("li",{parentName:"ul"},"Secure payment processing in real time."),(0,r.kt)("li",{parentName:"ul"},"Lower transaction cost compared to card payments."),(0,r.kt)("li",{parentName:"ul"},"Minimal fraud risk thanks to \u2018Request to Pay\u2019 technology."),(0,r.kt)("li",{parentName:"ul"},"Quick and convenient processing of refunds and disputes."),(0,r.kt)("li",{parentName:"ul"},"Integration on websites and in mobile apps."),(0,r.kt)("li",{parentName:"ul"},"Transactions are controlled within the Merchant Management System (MMS) in the same manner as normal card transactions.")),(0,r.kt)("h4",{id:"limitations-4"},"Limitations"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You will need a PBBA account and OBN Acquiring account."),(0,r.kt)("li",{parentName:"ul"},"Recurring transactions are not supported."),(0,r.kt)("li",{parentName:"ul"},"Independent refunds are not supported."),(0,r.kt)("li",{parentName:"ul"},"Transactions require a browser or mobile device in order to display the PBBA Checkout."),(0,r.kt)("li",{parentName:"ul"},"Your Customer will need a mobile device in order to display their Banking app."),(0,r.kt)("li",{parentName:"ul"},"Payment authorisation is not instantaneous and will require additional \u2018QUERY\u2019 requests."),(0,r.kt)("li",{parentName:"ul"},"Only available in the UK."),(0,r.kt)("li",{parentName:"ul"},"Transactions require a browser or mobile device in order to display the PBBA Checkout."),(0,r.kt)("li",{parentName:"ul"},"Customers require a mobile device in order to display their Banking app.")),(0,r.kt)("h3",{id:"implementation-3"},"Implementation"),(0,r.kt)("p",null,"PBBA transactions are designed to be integrated with and invoked by the Merchant Button Integration Library code made available by Mastercard for embedding the PBBA payment button on your website or mobile application (The current PBBA Merchant Integration Libraries are available from Mastercard)."),(0,r.kt)("p",null,"PBBA only supports the SALE, REFUND_SALE, CANCEL and CAPTURE actions. This section explains how to make payment requests. Management requests are performed as detailed in the ",(0,r.kt)("a",{parentName:"p",href:"transactiontypes#managementOperations"},"management operations")," section."),(0,r.kt)("h3",{id:"payment-request-1"},"Payment Request"),(0,r.kt)("p",null,"To request that a transaction be processed via PBBA, the request must contain a ",(0,r.kt)("inlineCode",{parentName:"p"},"paymentMethod")," of \u2018pbba\u2019. In addition, you must send ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions")," to provide information about the Customer\u2019s device. When the Gateway receives these two fields, assuming there are no other errors with the request, it will attempt to find a suitable PBBA Merchant Account in the current account mapping group (refer to the ",(0,r.kt)("a",{parentName:"p",href:"annexes#merchantAccountMapping"},"merchant account mapping")," section)."),(0,r.kt)("p",null,"If the Gateway is unable to find a suitable account, then the transaction will be aborted, and it will respond with a ",(0,r.kt)("inlineCode",{parentName:"p"},"responseCode")," of 66364 (INVALID PAYMENTMETHOD).\nOtherwise, the Gateway will initiate the PBBA transaction and respond with a ",(0,r.kt)("inlineCode",{parentName:"p"},"responseCode")," of 0 (SUCCESS) and included in the response will be a ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutDetails")," field containing the Basket Reference Number (BRN) that should be displayed to the Customer."),(0,r.kt)("p",null,"Please note that the payment has not completed until the Customer enters the BRN into their mobile banking application and confirms the payment. The response will contain a ",(0,r.kt)("inlineCode",{parentName:"p"},"state")," of received until the Gateway has received confirmation from the banking network that the payment has been confirmed by the Customer."),(0,r.kt)("p",null,"To determine when payment has completed you may periodically poll the Gateway using a QUERY request to check the ",(0,r.kt)("inlineCode",{parentName:"p"},"state")," of the transaction. For more information on the QUERY request, please refer to the ",(0,r.kt)("a",{parentName:"p",href:"transactiontypes#managementOperations"},"management operations")," section."),(0,r.kt)("h4",{id:"request-fields-6"},"Request Fields"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"paymentMethod"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Payment method to be used. Must be pbba.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutOptions"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Record containing options used to customise the PBBA Checkout. See the ",(0,r.kt)("a",{parentName:"td",href:"#pbbaCheckoutOptions"},"checkout options")," section. Whilst the Gateway does not see this field as mandatory, PBBA mandates that certain options are provided.")))),(0,r.kt)("h4",{id:"response-fields-5"},"Response Fields"),(0,r.kt)("p",null,"These fields will be returned in addition to the request fields above and the ",(0,r.kt)("a",{parentName:"p",href:"/hostedpaymentfields/transactiontypes/#transactionRequest"},"basic request fields"),"."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"checkoutDetails"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Record containing values made available by the PBBA Checkout. Refer to the ",(0,r.kt)("a",{parentName:"td",href:"#checkoutDetails"},"checkout details")," section.")))),(0,r.kt)("h3",{id:"pbbaCheckoutOptions"},"Checkout Options"),(0,r.kt)("p",null,"The following options must be sent in the ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutOptions")," Direct Integration field to customise the Checkout. Unlike other payment methods these options are mandatory and must be sent. The options must be formatted using the record or serialised record formats detailed in the ",(0,r.kt)("a",{parentName:"p",href:"overview#fieldFormats"},"format guide"),"."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"device.type"),(0,r.kt)("td",{parentName:"tr",align:null},"Consumer device type. This field is mandatory and has no default value.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null),"  ATM \u2013 ATM device ",(0,r.kt)("br",null)," MOBLPHN \u2013 Mobile phone device ",(0,r.kt)("br",null)," PCLAPTP \u2013 PC or Laptop device ",(0,r.kt)("br",null)," TABLET \u2013 tablet device ",(0,r.kt)("br",null)," OTHERS \u2013 other device type")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"device.os"),(0,r.kt)("td",{parentName:"tr",align:null},"Consumer device operating system. This field is mandatory and has no default value.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are: ",(0,r.kt)("br",null),"AND \u2013 Android ",(0,r.kt)("br",null),"IOS \u2013 Apple iOS ",(0,r.kt)("br",null),"WIN \u2013 Microsoft Windows ",(0,r.kt)("br",null),"WINMOB \u2013 Microsoft Windows Mobile ",(0,r.kt)("br",null),"OTHERS \u2013 other operating system")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"browser.userAgent"),(0,r.kt)("td",{parentName:"tr",align:null},"Content of HTTP User-Agent header received from the Consumer\u2019s device. Maximum 127 characters.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"browser.timeZone"),(0,r.kt)("td",{parentName:"tr",align:null},"Time zone offset in minutes between UTC and the Consumer\u2019s device. The offset is positive if the local time zone is behind UTC and negative if it is ahead.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"browser.screenResolution"),(0,r.kt)("td",{parentName:"tr",align:null},"Screen resolution of the Consumer\u2019s device. Formatted as the height and width separated by a \u2018x\u2019. The height and width must be between 1 and 9999 pixels.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"browser.acceptEncoding"),(0,r.kt)("td",{parentName:"tr",align:null},"Content of HTTP Accept-Encoding header received from the Consumer\u2019s device. Maximum of 127 characters.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"browser.acceptLanguage"),(0,r.kt)("td",{parentName:"tr",align:null},"Content of HTTP Accept-Encoding header received from the Consumer\u2019s device. Maximum of 127 characters.")))),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"category.name")," format of the sub-field name indicates that option\u2019s value is a record called ",(0,r.kt)("inlineCode",{parentName:"p"},"category")," containing a sub-field called ",(0,r.kt)("inlineCode",{parentName:"p"},"name"),"."),(0,r.kt)("h3",{id:"checkoutDetails"},"Checkout Details"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutDetails")," field included in the response above will contain the following values which should be provided to the client-side PBBA Integration Library. The details will be returned using the record format detailed in the ",(0,r.kt)("a",{parentName:"p",href:"overview#fieldFormats"},"format guide"),". "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"transactionID"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Transaction identifier.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"settlementID"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Settlement retrieval identifier.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"pbbaCode"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Basket reference number (BRN).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"secureToken"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Secure token for client-size use.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"retrievalExpiryInterval"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Retrieval expiry time interval.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"confirmationExpiryInterval"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Confirmation expiry time interval.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"cookieSentStatus"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Cookie sent status.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"payConnectID"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Reserved for future use.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"cookieExpiryDays"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Reserved for future use.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"riskScore"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Reserved for future use.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"bankName"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Reserved for future use.")))),(0,r.kt)("h3",{id:"refunds"},"Refunds"),(0,r.kt)("p",null,"Refund requests require that a reason code be included in either the ",(0,r.kt)("inlineCode",{parentName:"p"},"orderRef")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"cancelReason")," fields."),(0,r.kt)("p",null,"The codes are as follows; DUPLICATEORDER, GOODSRETURNED, ORDERCANCELLED, MERCHANTOUTOFSTOCK, GOODSNOTRECV, LATECONFIRMATION, DISPUTES."),(0,r.kt)("p",null,"The code must be in uppercase and must appear as a separate word anywhere in the field\u2019s value."),(0,r.kt)("p",null,"For example, if refunding due to the purchased item being out of stock you could set the value to just \u201cMERCHANTOUTOFSTOCK\u201d or to a more complete description such as \u201cRefund: Green polo\nshirt, XXL (MERCHANTOUTOFSTOCK)\u201d."),(0,r.kt)("p",null,"This also applies to refunds made by the Merchant Management System (MMS) where the reason code must be entered when prompted for the reason for the refund."),(0,r.kt)("p",null,"Only the refund code is sent to the PBBA system, any other text is stored by the Gateway for your benefit and viewable in the Merchant Management System (MMS)."),(0,r.kt)("h2",{id:"secureplus-transactions"},"SecurePlus Transactions"),(0,r.kt)("p",null,"SecurePlus is available if you have a Planet Merchant Account. It is a secure e-commerce payment solution designed to allow you to accept China UnionPay debit cards via the Planet Acquirer, with a reduced the risk of fraudulent transactions while providing a friction-free payment process for your Customers. SecurePlus divides the online payment process into separate\nauthentication and authorisation transaction flows that authenticates the cardholder\u2019s identity before you submit the authorisation request."),(0,r.kt)("p",null,"To use SecurePlus you will be supplied with a separate Planet Merchant Account that can be grouped with your main Merchant Account using the account mapping facility as documented in the ",(0,r.kt)("a",{parentName:"p",href:"annexes#merchantAccountMapping"},"merchant account mapping")," section. This allows transactions to be sent using your main Merchant Account and then routed automatically to the Planet Merchant Account in the same mapping group."),(0,r.kt)("p",null,"When UnionPay debit cards are issued, the Cardholder must register their mobile number with the Issuer. The SMS code authentication works at the time of checkout by submitting the payment details to UnionPay together with the Cardholder\u2019s mobile number. The Issuer verifies the card and registered mobile number and sends an SMS message to the Cardholder\u2019s mobile phone containing a unique 6-digit code. The Cardholder then enters this code into an authentication dialog provided by the Gateway so that it can be sent to UnionPay for verification.\nIf approved, the final financial transaction is submitted."),(0,r.kt)("p",null,"The authentication process is only required for debit cards. To accommodate the use of cards stored in secure online wallet, the card authentication has some built-in flexibility when other\ncompensating controls are employed."),(0,r.kt)("p",null,"SecurePlus transactions will appear in the Merchant Management System (MMS) alongside any card payments and can be captured, cancelled and refunded in the same way as card payments."),(0,r.kt)("p",null,"SecurePlus transactions can also be used for recurring billing with the SMS authentication not been required on recurring transactions as long as the initial transaction was successfully SMS authenticated."),(0,r.kt)("p",null,"For more information on how to accept SecurePlus transactions, please contact customer support."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"SecurePlus transactions are only available with a Planet Merchant Account.")),(0,r.kt)("h4",{id:"benefits-5"},"Benefits"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Authorisations are available immediately and returned as part of the transaction."),(0,r.kt)("li",{parentName:"ul"},"Provides your customers the flexibility of paying using their UnionPay debit card when this is more suitable to them than using other payment methods."),(0,r.kt)("li",{parentName:"ul"},"Can be implemented with little or no extra integration work if you already support 3-D Secure transactions."),(0,r.kt)("li",{parentName:"ul"},"There are no extra Gateway costs to use SecurePlus. Your Acquirer may charge to add this onto your business account; however, you may also find that your transaction charges are lower as a result of using 3-D Secure."),(0,r.kt)("li",{parentName:"ul"},"Fully configurable within the Merchant Management System (MMS).")),(0,r.kt)("h4",{id:"limitations-5"},"Limitations"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You will need a Planet Acquiring account, however, such an account can also be used to process all your other card transactions."),(0,r.kt)("li",{parentName:"ul"},"Only UnionPay debit cards are supported, however, UnionPay credit cards can be accepted without the need for SecurePlus."),(0,r.kt)("li",{parentName:"ul"},"You must currently provide the Gateway with the Cardholder\u2019s mobile phone number at the time of the transaction. The Hosted Payment Page will prompt the Cardholder for this information if it detects that a UnionPay debit card is being supplied."),(0,r.kt)("li",{parentName:"ul"},"The Cardholder must have access to their registered mobile phone during the payment process."),(0,r.kt)("li",{parentName:"ul"},"Transactions require a browser in order to display the Customer SMS code entry dialog.")),(0,r.kt)("h3",{id:"implementation-4"},"Implementation"),(0,r.kt)("p",null,"SecurePlus transactions require you to support the 3-D Secure integration as documented in the ",(0,r.kt)("a",{parentName:"p",href:"3dsecure"},"3-D Secure")," section. In addition, the Cardholder\u2019s mobile phone number must be provided in the transaction request."),(0,r.kt)("h3",{id:"request-fields-7"},"Request Fields"),(0,r.kt)("p",null,"These fields should be sent in addition to basic 3-D Secure request fields."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"customerMobile"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Must contain the Cardholder\u2019s mobile phone number as registered with the Issuer. The number must be international format with a leading + symbol followed by up to 3 digits then a space then up to 10 more digits.")))),(0,r.kt)("h3",{id:"response-fields-6"},"Response Fields"),(0,r.kt)("p",null,"There are no additional response fields for SecurePlus other those defined for 3-D Secure."))}m.isMDXComponent=!0}}]);