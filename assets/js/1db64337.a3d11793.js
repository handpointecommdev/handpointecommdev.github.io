"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[1372],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>m});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),d=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=d(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=d(a),h=r,m=p["".concat(l,".").concat(h)]||p[h]||c[h]||i;return a?n.createElement(m,o(o({ref:t},u),{},{components:a})):n.createElement(m,o({ref:t},u))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:r,o[1]=s;for(var d=2;d<i;d++)o[d]=a[d];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},6777:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var n=a(7462),r=(a(7294),a(3905));const i={sidebar_position:1},o="Overview",s={unversionedId:"overview",id:"overview",title:"Overview",description:"Introduction",source:"@site/docs/overview.md",sourceDirName:".",slug:"/overview",permalink:"/docs/overview",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",next:{title:"Sample Code & Examples",permalink:"/docs/samplecode"}},l={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Benefits",id:"benefits",level:2},{value:"Limitations",id:"limitations",level:2},{value:"Security and Compliance",id:"security-and-compliance",level:2},{value:"Authentication",id:"authentication",level:2},{value:"Password authentication",id:"password-authentication",level:3},{value:"Message signing",id:"message-signing",level:3},{value:"Allowed IP addresses",id:"allowed-ip-addresses",level:2},{value:"HTTP Requests",id:"http-requests",level:2},{value:"Hosted HTTP Requests",id:"hosted-http-requests",level:2},{value:"Redirect URL",id:"redirectUrl",level:2},{value:"Callback URL",id:"callbackUrl",level:2},{value:"Field Formats",id:"fieldFormats",level:2}],u={toc:d},p="wrapper";function c(e){let{components:t,...a}=e;return(0,r.kt)(p,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"overview"},"Overview"),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"The Hosted Integration method makes it easy to add secure payment processing to your e-commerce business, using the Handpoint ",(0,r.kt)("strong",{parentName:"p"},"Hosted Payment Page"),". You can use this method if you ",(0,r.kt)("strong",{parentName:"p"},"do not want to collect and store cardholder data"),"."),(0,r.kt)("p",null,"The Hosted integration works by redirecting the customer to our Gateway\u2019s Hosted Payment Page, which will collect the Customer\u2019s payment details and process the payment before redirecting the customer back to a page on your website, letting you know the payment outcome. ",(0,r.kt)("strong",{parentName:"p"},"This is the quickest path to integrating with the Gateway"),".\nThe standard Hosted Payment Page is designed to be shown in a lightbox (modal) over your website and styled with logos and colours to match. Alternatively, we can also offer fully customised Hosted Payment Pages that can match your website\u2019s style and layout. These fully customised pages are usually provided using a browser redirect, displaying full-page in the browser, or can be displayed embedded in an iframe on your website."),(0,r.kt)("p",null,"By using the hosted payment page integration, ",(0,r.kt)("strong",{parentName:"p"},"you are kept out of the EMV 3D-Secure flow")," which allows you to keep the integration very simple without any added complexity."),(0,r.kt)("p",null," Please note that if you are planning to use ",(0,r.kt)("strong",{parentName:"p"},"Dynamic Currency Conversion (DCC)")," or ",(0,r.kt)("strong",{parentName:"p"},"alternative payment methods")," you can easily customise the checkout to offer multiple payment options to the cardholder with little extra work. "),(0,r.kt)("p",null," Two very important limitations of the Hosted Payment Page integration are that ",(0,r.kt)("strong",{parentName:"p"},"Google & Apple Pay as well as subscription payments are NOT supported"),". A separate Direct integration or Hosted Payment Fields integration will be required to support digital wallets and/or recurring payments. "),(0,r.kt)("div",{align:"center"},(0,r.kt)("img",{src:"/img/hosted_payment_page.png"})),(0,r.kt)("div",{align:"center"},(0,r.kt)("img",{src:"/img/hosted_payment_page_modal.png"})),(0,r.kt)("h2",{id:"benefits"},"Benefits"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You are kept out of PCI scope. "),(0,r.kt)("li",{parentName:"ul"},"You are kept out of the EMV 3D-Secure flow."),(0,r.kt)("li",{parentName:"ul"},"This is the quickest path to integration with the Gateway."),(0,r.kt)("li",{parentName:"ul"},"Supporting dynamic currency conversion requires minimal work. "),(0,r.kt)("li",{parentName:"ul"},"Supporting alternative payment methods (Paypal, Amazon Pay, Pay by bank etc.) requires less effort than for a Direct or Hosted Payment Fields integration. "),(0,r.kt)("li",{parentName:"ul"},"You can easily save credentials on file (by using the Handpoint Gateway Wallet) and allow customers to pay with their saved cards for future purchases. ")),(0,r.kt)("h2",{id:"limitations"},"Limitations"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The payment page itself isn't fully customisable. "),(0,r.kt)("li",{parentName:"ul"},"If you want to support recurring payments (subscriptions) you will need to carry out a separate direct integration or hosted payment fields integration."),(0,r.kt)("li",{parentName:"ul"},"With a Hosted Payment Page integration you are limited to the following transaction types : SALE, VERIFY, PREAUTH. If you want to support the REFUND, CANCEL and QUERY transaction types, you will need to carry out a separate direct integration or hosted payment fields integration."),(0,r.kt)("li",{parentName:"ul"},"The Hosted Payment Page integration does not support Google Pay and Apple Pay.")),(0,r.kt)("h2",{id:"security-and-compliance"},"Security and Compliance"),(0,r.kt)("p",null,"If you use the hosted payment page integration then your webserver does not need an SSL certificate and you require the ",(0,r.kt)("strong",{parentName:"p"},"lowest level of PCI DSS compliance"),"."),(0,r.kt)("p",null,"The Gateway will make transaction details available for a maximum period of 13 months. Your acquirer may hold information for a different period of time."),(0,r.kt)("h2",{id:"authentication"},"Authentication"),(0,r.kt)("p",null,"You will need the following information to integrate with the Gateway which will be provided during onboarding:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Merchant Account ID"),(0,r.kt)("td",{parentName:"tr",align:null},"Your unique Merchant Account ID.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Hosted Integration URL"),(0,r.kt)("td",{parentName:"tr",align:null},"Your unique URL to use the Hosted Integration.")))),(0,r.kt)("p",null," You will be provided with unique production and test Merchant Account IDs during the onboarding process. You will also be provided with the integration URL. "),(0,r.kt)("p",null,"All requests must specify which merchant account they are for, using the ",(0,r.kt)("inlineCode",{parentName:"p"},"merchantID")," request field. In addition to this, the following security measures can be used:"),(0,r.kt)("h3",{id:"password-authentication"},"Password authentication"),(0,r.kt)("p",null,"A password can be configured for each Merchant Account. This password must then be sent in the ",(0,r.kt)("inlineCode",{parentName:"p"},"merchantPwd")," field in each request. If an incorrect password is received by the Gateway, then the transaction will be aborted and an error response is returned."),(0,r.kt)("admonition",{type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"Use of a password is discouraged in any integration where the transaction is posted from a form in the client browser as the password may appear in plain text in code.")),(0,r.kt)("h3",{id:"message-signing"},"Message signing"),(0,r.kt)("p",null,"A signing secret phrase can be configured for each merchant account. When configured, each request will need to be \u2018signed\u2019 by providing a signature field containing a hash generated from the combination of the serialised request and this signing secret phrase. On receipt, the Gateway will then re-generate the hash and compare it with the one sent. If the two hashes are different then the request received must not be the same as that sent and so the contents must have been tampered with and the transaction will be aborted and an error response is returned."),(0,r.kt)("p",null,"The Gateway will also return the hash of the response message in the returned signature field, allowing you to create your own hash of the response (minus the signature field) and verify that the hashes match. The data POSTed to any callback URL will also be signed. See ",(0,r.kt)("a",{parentName:"p",href:"samplecode#signatureCalculation"},"signature calculation")," for information on how to create the hash."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Message signing maybe mandatory on some Merchant Accounts")),(0,r.kt)("h2",{id:"allowed-ip-addresses"},"Allowed IP addresses"),(0,r.kt)("p",null,"You can configure a list of allowed IP addresses. Two different address lists can be configured, one for standard requests, such as sales; and one for advanced requests, such as refunds and cancellations. If a request is received from an address other than those configured, then it will be aborted and an error response is returned."),(0,r.kt)("h2",{id:"http-requests"},"HTTP Requests"),(0,r.kt)("p",null,"A request can be sent to the Gateway by submitting a HTTP POST request to the integration URL provided."),(0,r.kt)("p",null,"The request should have a ",(0,r.kt)("inlineCode",{parentName:"p"},"Content-Type: application/x-www-form-urlencoded")," HTTP header and the request should be name, value pairs URL encoded as per RFC 1738.\nComplex fields consisting of single or multidimensional records or arrays must be formatted as per the ",(0,r.kt)("a",{parentName:"p",href:"https://www.php.net/manual/en/function.http-build-query.php"},"PHP http_build_query method")," using square brackets to represent multiple dimensions. The sub-field names must be numeric or alphanumeric only, alphanumeric fields must not start with a numeric. Any square brackets around the nested field names should be URL encoded, ","[ as %5B and ]"," as %5D."),(0,r.kt)("p",null,"The following example request contains a complex items field consisting of an array of records representing the following table of purchased items."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Quantity"),(0,r.kt)("th",{parentName:"tr",align:null},"Amount"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Newspaper"),(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"110")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Chocolate bar"),(0,r.kt)("td",{parentName:"tr",align:null},"3"),(0,r.kt)("td",{parentName:"tr",align:null},"249")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Carrier bag"),(0,r.kt)("td",{parentName:"tr",align:null},"1"),(0,r.kt)("td",{parentName:"tr",align:null},"10")))),(0,r.kt)("p",null,"For example, a request would be URL encoded as:\nmerchantID=100001&action=SALE&type=1&amount=1001","\xa4","cyCode=826&countryCode=826&transactionUnique=55f6db1c81d95&orderRef=Test+purchase&customerPostCode=NN17+8YG&responseCode=0&responseMessage=AUTHCODE%3A350333&state=captured&xref=15091702MG47WN32MM88LPK&cardNumber=4929+4212+3460+0821&cardExpiryDate=1215&items%5B0%5D%5Bdescription%5D=Newspaper&items%5B0%5D%5Bquantity%5D=1&items%5B0%5D%5Bamount%5D=110&items%5B1%5D%5Bdescription%5D=Chocolate+bar&items%5B1%5D%5Bquantity%5D=3&items%5B1%5D%5Bamount%5D=249&items%5B2%5D%5Bdescription%5D=Carrier+bag&items%5B2%5D%5Bquantity%5D=1&items%5B2%5D%5Bamount%5D=1"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Please note that the field and sub-field names must be alphanumeric only and are cAsE sEnSiTiVe. Root integration fields must be numeric only and alphanumeric fields must not start with a numeric.")," "),(0,r.kt)("p",null,"The response will use the same URL encoding and return the request fields in addition to any dedicated response field. If the request contains a field that is also intended as a response field, then any incoming request value will be overwritten by the correct response value."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"The Gateway may add new request and response fields at any time and so your integration must take care not to send request fields that may conflict with future Gateway fields and be able to ignore response fields which it doesn\u2019t yet understand.")),(0,r.kt)("h2",{id:"hosted-http-requests"},"Hosted HTTP Requests"),(0,r.kt)("p",null,"When using the Hosted Integration, the request must be sent from the Customer\u2019s web browser as the response will be a HTML Hosted Payment Page (HPP), used to collect the Customer\u2019s details. The format of the request is designed so that it can be sent using a standard HTML form with the data in hidden form fields. The browser will then automatically encode the request correctly according to ",(0,r.kt)("inlineCode",{parentName:"p"},"application/x-www-form-urlencoded")," format."),(0,r.kt)("p",null,"When the Hosted Payment Page has been completed and the payment processed, the Customer\u2019s browser will be automatically redirected to the URL provided via the ",(0,r.kt)("inlineCode",{parentName:"p"},"redirectURL")," field. The response will be returned to this page in ",(0,r.kt)("inlineCode",{parentName:"p"},"application/x-www-form-urlencoded")," format, using a HTTP POST request."),(0,r.kt)("p",null,"All request fields will be returned in the response and a merchant may add custom request fields. If the request contains a field that is also intended as a response field, then any incoming request value will be overwritten by the correct response value."),(0,r.kt)("h2",{id:"redirectUrl"},"Redirect URL"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"redirectURL")," request field is ",(0,r.kt)("strong",{parentName:"p"},"mandatory")," and used to provide the URL of a webpage on your server."),(0,r.kt)("p",null,"For the Hosted Integration, the Customers browser will load this URL when the Hosted Payment Page has completed and can be used to continue the payment journey on your website. The URL will be loaded using a HTTP POST request containing transaction response data allowing you to tailor the journey depending on the outcome of the transaction."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"redirectURL")," must be a fully qualified URL, containing at least the scheme and host components."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"It is strongly recommended that the response data sent to the ",(0,r.kt)("inlineCode",{parentName:"strong"},"redirectURL")," be used to display a payment confirmation page only and not used to update your backend systems. The Customer may close their browser before the redirection happens resulting in you never receiving this data. Please use the ",(0,r.kt)("inlineCode",{parentName:"strong"},"callbackURL")," if you need to update your backend systems.")),(0,r.kt)("h2",{id:"callbackUrl"},"Callback URL"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"callbackURL")," request field allows you optionally to request that the Gateway sends a copy of the response to an alternative URL. In this case, each response will then be POSTed to this URL in addition to the normal response. This allows you to specify a URL on a secure shopping cart or backend order processing system, which will then fulfil any order associated with the transaction.\nThe callbackURL must be a fully qualified URL, containing at least the scheme and host components."),(0,r.kt)("h2",{id:"fieldFormats"},"Field Formats"),(0,r.kt)("p",null,"Most integration field values are either numerical or textual, and either free format or from a range of predetermined values. Some field values are records or arrays of records."),(0,r.kt)("p",null,"Unless otherwise stated, numerical values are whole integer values with no decimal points. Textual values should use the UTF-8 character set and will be automatically truncated if too long, unless stated otherwise in the field\u2019s description. Textual values may be transliterated when sending to third parties such as Acquirers but the original value is stored by Gateway."),(0,r.kt)("p",null,"Field values should use the following formats unless otherwise stated in the field\u2019s description:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Field Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Value Format"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Monetary Amounts"),(0,r.kt)("td",{parentName:"tr",align:null},"Either major currency units by providing a value that includes a single decimal point such as \u201910.99\u2019; or in minor currency units by providing a value that contains no decimal points such as \u20181099\u2019.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Timestamps"),(0,r.kt)("td",{parentName:"tr",align:null},"Date in the format \u2018YYYY-MM-DD HH:MM:SS\u2019")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Dates"),(0,r.kt)("td",{parentName:"tr",align:null},"Date in the format \u2018YYYY-MM-DD\u2019")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Country Codes"),(0,r.kt)("td",{parentName:"tr",align:null},"Either the ISO-3166-1 2-letter, 3-letter or 3-digit code.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Currency Codes"),(0,r.kt)("td",{parentName:"tr",align:null},"Either the ISO-4217 3-letter or 3-digit code.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Records"),(0,r.kt)("td",{parentName:"tr",align:null},"Records can be provided using the ","[Y]"," notation, where Y is the record\u2019s sub-field name. Records can be nested to any depth, that is a sub-field\u2019s value can be another record. Arrays can be provided by using numeric sub-fields starting with the value 0 and incrementing by 1. For example: to send a value for the sub-field Z, of the sub-field Y in the integration field X, use the field name X","[Y][Z]","; however, to send a value for the sub-field Z in the fourth record for integration field X, then use the field name X","[4][Z]"," etc. Boolean values must be sent as the words \u2018true\u2019 or \u2018false\u2019.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"Serialised Records"),(0,r.kt)("td",{parentName:"tr",align:null},"Certain fields allow records to be sent as JSON or URL serialised strings. If the first character of the serialised string is \u2018{\u2018, then the string is assumed to be in JSON format with any boolean values sent as their JSON equivalents, all other strings will be assumed to be application/x-www-form-urlencoded format with any boolean values sent as the words \u2018true\u2019 or \u2018false\u2019.")))),(0,r.kt)("p",null,"Note: Record format is useful when posting sub-fields directly from individual field in a HTML FORM. However, unlike the main integration fields, a record\u2019s sub-fields are not sorted when constructing the signature and are processed in the order received. Serialised record format can overcome any problems caused by the sub-fields of a record being received in a different order to that used when generating the signature. Not all fields using the record format also support the serialised record format especially the ",(0,r.kt)("inlineCode",{parentName:"p"},"threeDSRequest"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"threeDSResponse"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutRequest"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"checkoutResponse")," and the purchase ",(0,r.kt)("inlineCode",{parentName:"p"},"items")," field."),(0,r.kt)("p",null,"Boolean values cannot be represented when using the record format or the ",(0,r.kt)("inlineCode",{parentName:"p"},"application/x-www-form-urlencoded")," serialised record format and the words \u2018true\u2019 and \u2018false\u2019 must be used. The JSON serialised record format does not have this restriction and a JSON boolean can be used."))}c.isMDXComponent=!0}}]);