"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[6477],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>h});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var o=n.createContext({}),d=function(e){var t=n.useContext(o),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},u=function(e){var t=d(e.components);return n.createElement(o.Provider,{value:t},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=d(a),m=r,h=c["".concat(o,".").concat(m)]||c[m]||p[m]||i;return a?n.createElement(h,l(l({ref:t},u),{},{components:a})):n.createElement(h,l({ref:t},u))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=m;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s[c]="string"==typeof e?e:r,l[1]=s;for(var d=2;d<i;d++)l[d]=a[d];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},7138:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var n=a(7462),r=(a(7294),a(3905));const i={sidebar_position:7},l="Advanced Gateway Functionalities",s={unversionedId:"advancedfunctionalities",id:"advancedfunctionalities",title:"Advanced Gateway Functionalities",description:"AVS/CV2 Checking",source:"@site/hostedpaymentfields/advancedfunctionalities.md",sourceDirName:".",slug:"/advancedfunctionalities",permalink:"/hostedpaymentfields/advancedfunctionalities",draft:!1,tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"Digital Wallets and Alternative Payment Methods",permalink:"/hostedpaymentfields/digitalwalletsandapms"},next:{title:"Extra Transaction Data",permalink:"/hostedpaymentfields/advanceddata"}},o={},d=[{value:"AVS/CV2 Checking",id:"avscv2-checking",level:2},{value:"AVS Checking",id:"avs-checking",level:4},{value:"CV2 Checking",id:"cv2-checking",level:4},{value:"AVS/CV2 Benefits",id:"avscv2-benefits",level:4},{value:"AVS/CV2 Limitations",id:"avscv2-limitations",level:4},{value:"Request Fields",id:"request-fields",level:3},{value:"Response Fields",id:"response-fields",level:3},{value:"Risk Checking",id:"risk-checking",level:2},{value:"Benefits",id:"benefits",level:4},{value:"Limitations",id:"limitations",level:4},{value:"Implementation",id:"implementation",level:3},{value:"Request Fields",id:"riskCheckRequestFields",level:3},{value:"Risk Check Options",id:"riskCheckOptions",level:4},{value:"Response Fields",id:"response-fields-1",level:3},{value:"Payment Facilitators",id:"payment-facilitators",level:2},{value:"Request Fields",id:"request-fields-1",level:3},{value:"Financial Institutions Merchants",id:"financial-institutions-merchants",level:2},{value:"Request Fields",id:"request-fields-2",level:3},{value:"Billing Descriptor",id:"billing-descriptor",level:2},{value:"Static Descriptor",id:"static-descriptor",level:3},{value:"Dynamic Descriptor",id:"dynamicDescriptor",level:3},{value:"Request Fields",id:"request-fields-3",level:4},{value:"Surcharges",id:"surcharges",level:2},{value:"Surcharge Rules",id:"surchargeRules",level:3},{value:"Surcharge Amounts",id:"surcharge-amounts",level:3},{value:"Request Fields",id:"surchargeRequestFields",level:3},{value:"Response Fields",id:"response-fields-2",level:3},{value:"Receipts and Notifications",id:"receipts-and-notifications",level:2},{value:"Customer Email Receipts",id:"customer-email-receipts",level:3},{value:"Merchant Email Notifications",id:"merchant-email-notifications",level:3},{value:"Request Fields",id:"request-fields-4",level:3},{value:"Response Fields",id:"response-fields-3",level:3},{value:"Dynamic Currency Conversion",id:"dynamic-currency-conversion",level:2},{value:"Benefits",id:"benefits-1",level:4},{value:"Limitations",id:"limitations-1",level:4},{value:"Implementation",id:"implementation-1",level:4},{value:"Initial Request (Fetch DCC Conversion details)",id:"initial-request-fetch-dcc-conversion-details",level:3},{value:"Request Fields",id:"dccInitialRequestFields",level:4},{value:"Response Fields",id:"dccInitialResponseFields",level:4},{value:"Continuation Request (Accept/Refuse DCC offer)",id:"continuation-request-acceptrefuse-dcc-offer",level:3},{value:"Request Fields",id:"request-fields-5",level:4},{value:"Response Fields",id:"response-fields-4",level:4},{value:"External Authentication Request",id:"external-authentication-request",level:3},{value:"Request Fields",id:"externalAuthenticationRequestFields",level:4},{value:"Response Fields",id:"response-fields-5",level:4}],u={toc:d},c="wrapper";function p(e){let{components:t,...a}=e;return(0,r.kt)(c,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"advanced-gateway-functionalities"},"Advanced Gateway Functionalities"),(0,r.kt)("h2",{id:"avscv2-checking"},"AVS/CV2 Checking"),(0,r.kt)("p",null,"AVS and CV2 fraud checking is available on all card transactions processed by the Gateway where supported by the Acquirer. ",(0,r.kt)("strong",{parentName:"p"},"AVS/CV2 Checking is enabled on all merchant accounts by default, it can be disabled on a case by case basis.")),(0,r.kt)("p",null,"These fraud prevention checks are performed by the Acquirer while authorising the transaction. You can choose how to act on the outcome of the check (or even to ignore them altogether)."),(0,r.kt)("h4",{id:"avs-checking"},"AVS Checking"),(0,r.kt)("p",null,"The Address Verification System (AVS) uses the address details that are provided by the Cardholder to verify that the address is registered to the card being used. The address and postcode are checked separately."),(0,r.kt)("h4",{id:"cv2-checking"},"CV2 Checking"),(0,r.kt)("p",null,"CV2, CVV, or Card Verification Value is a 3-digit or 4-digit security code. The check verifies that the code is the correct one for the card used."),(0,r.kt)("p",null,"For most cards, the CVV is a 3-digit number to the right of the signature strip. For American Express cards, this is a 4-digit number printed, not embossed, on the front right of the card."),(0,r.kt)("p",null,"The AVS/CV2 checking preferences can be configured per Merchant Account. These preferences can be overridden per transaction by sending one of the preference fields that hold a comma separated list of the check responses that should be allowed in order to continue to completion. Responses not in the list will result in the transaction being declined with a ",(0,r.kt)("inlineCode",{parentName:"p"},"responseCode")," of 5 (AVS/CV2 DECLINED)."),(0,r.kt)("h4",{id:"avscv2-benefits"},"AVS/CV2 Benefits"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Can be enabled with just a few extra integration fields."),(0,r.kt)("li",{parentName:"ul"},"The results are available immediately and returned as part of the transaction."),(0,r.kt)("li",{parentName:"ul"},"The checks can be managed independently, allowing you the utmost control over how the results are used."),(0,r.kt)("li",{parentName:"ul"},"The checks can be configured to decline a transaction automatically, where required."),(0,r.kt)("li",{parentName:"ul"},"There are no extra costs for using AVS/CV2 checking with your transactions."),(0,r.kt)("li",{parentName:"ul"},"Fully configurable per merchant account.")),(0,r.kt)("h4",{id:"avscv2-limitations"},"AVS/CV2 Limitations"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The AVS checks are mainly supported by Visa, MasterCard and American Express in the USA, Canada and United Kingdom. Cardholders with a bank that does not support the checks might receive declines due to the lack of data."),(0,r.kt)("li",{parentName:"ul"},"Because AVS only verifies the numeric portion of the address and postcode, certain anomalies such as apartment numbers and house names can cause false declines."),(0,r.kt)("li",{parentName:"ul"},"The checks are meant for consumer cards. Company cards are not fully supported due to the Acquirers\u2019 not having access to this information.")),(0,r.kt)("h3",{id:"request-fields"},"Request Fields"),(0,r.kt)("p",null,"These fields should be sent in addition to basic request fields detailed in the ",(0,r.kt)("a",{parentName:"p",href:"/hostedpaymentfields/transactiontypes/#transactionRequest"},"transaction types")," section : "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"customerAddress"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"For AVS checking, this must be a registered billing address for the card.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"customerPostCode"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"For AVS checking, this must be a registered postcode for the card.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"cardCVV"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"For CVV checking, this must be the Card Verification Value printed on the card. ",(0,r.kt)("strong",{parentName:"td"},"For hosted payment fields integrations, this value is contained in the token representing sensitive card data."))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"avscv2CheckRequired"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Is AVS/CV2 checking required for this transaction? ",(0,r.kt)("br",null),"Possible values are: ",(0,r.kt)("br",null),"N \u2013 Checking is not required. ",(0,r.kt)("br",null),"Y \u2013 Abort if checking is not enabled.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Overrides any Merchant Account setting configured in the backend.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"cv2CheckPref"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"List of ",(0,r.kt)("inlineCode",{parentName:"td"},"cv2Check")," response values that are to be accepted; any other value will cause the transaction to be declined. Refer to ",(0,r.kt)("a",{parentName:"td",href:"annexes#AvsResponseCodes"},"AVS response codes")," for more information. Value is a comma separated list containing one or more of the following: not known, not checked, matched, not matched, partially matched.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Overrides any Merchant Account setting configured in the backend.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"addressCheckPref"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"List of ",(0,r.kt)("inlineCode",{parentName:"td"},"addressCheck")," response values that are to be accepted; any other value will cause the transaction to be declined. Refer to ",(0,r.kt)("a",{parentName:"td",href:"annexes#AvsResponseCodes"},"AVS response codes")," for more information. Value is a comma separated list containing one or more of the following: not known, not checked, matched, not matched, partially matched.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Overrides any Merchant Account setting configured in the backend.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"postcodeCheckPref"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"List of ",(0,r.kt)("inlineCode",{parentName:"td"},"postcodeCheck")," response values that are to be accepted; any other value will cause the transaction to be declined. Refer to ",(0,r.kt)("a",{parentName:"td",href:"annexes#AvsResponseCodes"},"AVS response codes")," for more information. Value is a comma separated list containing one or more of the following: not known, not checked, matched, not matched, partially matched.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Overrides any Merchant Account setting configured in the backend.")))),(0,r.kt)("h3",{id:"response-fields"},"Response Fields"),(0,r.kt)("p",null,"These fields will be returned in addition to the AVS request fields above and the basic response fields detailed in the ",(0,r.kt)("a",{parentName:"p",href:"/hostedpaymentfields/transactiontypes/#transactionResponse"},"transaction types")," section : "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Returned"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"avscv2CheckEnabled"),(0,r.kt)("td",{parentName:"tr",align:null},"Always"),(0,r.kt)("td",{parentName:"tr",align:null},"Is AVS/CV2 checking enabled for this Merchant Account? ",(0,r.kt)("br",null),"Possible values are: ",(0,r.kt)("br",null),"N \u2013 Merchant account is not enabled. ",(0,r.kt)("br",null),"Y \u2013 Merchant account is enabled.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"avscv2ResponseCode"),(0,r.kt)("td",{parentName:"tr",align:null},"If checks performed"),(0,r.kt)("td",{parentName:"tr",align:null},"The result of the AVS/CV2 check. Refer to ",(0,r.kt)("a",{parentName:"td",href:"annexes#AvsResponseCodes"},"AVS response codes")," for more information.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"avscv2ResponseMessage"),(0,r.kt)("td",{parentName:"tr",align:null},"If checks performed"),(0,r.kt)("td",{parentName:"tr",align:null},"The message received from the Acquiring bank, or any error message with regards to the AVS/CV2 check. Refer to ",(0,r.kt)("a",{parentName:"td",href:"annexes#AvsResponseCodes"},"AVS response codes")," for more information.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"avscv2AuthEntity"),(0,r.kt)("td",{parentName:"tr",align:null},"If checks performed"),(0,r.kt)("td",{parentName:"tr",align:null},"Textual description of the AVS/CV2 authorising entity as described in ",(0,r.kt)("a",{parentName:"td",href:"annexes#AvsResponseCodes"},"AVS response codes"),". Possible values are: not known, merchant host, acquirer host, card scheme, issuer.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"cv2Check"),(0,r.kt)("td",{parentName:"tr",align:null},"If checks performed"),(0,r.kt)("td",{parentName:"tr",align:null},"Description of the AVS/CV2 check as described in ",(0,r.kt)("a",{parentName:"td",href:"annexes#AvsResponseCodes"},"AVS response codes"),". Possible values are: not known, not checked, matched, not matched, partially matched.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"addressCheck"),(0,r.kt)("td",{parentName:"tr",align:null},"If checks performed"),(0,r.kt)("td",{parentName:"tr",align:null},"Description of the AVS/CV2 address check as described in ",(0,r.kt)("a",{parentName:"td",href:"annexes#AvsResponseCodes"},"AVS response codes"),". Possible values are: not known, not checked, matched, not matched, partially matched.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"postcodeCheck"),(0,r.kt)("td",{parentName:"tr",align:null},"If checks performed"),(0,r.kt)("td",{parentName:"tr",align:null},"Description of the AVS/CV2 postcode check as described in ",(0,r.kt)("a",{parentName:"td",href:"annexes#AvsResponseCodes"},"AVS response codes"),". Possible values are: not known, not checked, matched, not matched, partially matched.")))),(0,r.kt)("h2",{id:"risk-checking"},"Risk Checking"),(0,r.kt)("p",null,"The Gateway is integrated with Kount, the leading solution for digital fraud prevention."),(0,r.kt)("p",null,"If you have an existing account with Kount, or sign up for one, you can request that the Gateway pass your transactions to them for risk checking before they are sent to the Acquirer for authorisation."),(0,r.kt)("p",null,"Kount\u2019s patented fraud prevention technology combines device fingerprinting; supervised and unsupervised machine learning; a robust policy and rules engine; business intelligence tools; and a web-based case-management and investigation system."),(0,r.kt)("p",null,"Their team of experts can help you understand and identify the rules necessary to optimise your protection, as well as provide ongoing support. To get the most out of your investment, you may want to dedicate an individual or a team to monitor your rules and ensure they continue to work as intended."),(0,r.kt)("p",null,"The risk checking preferences can be configured per Merchant Account within the Merchant Management System (MMS). These preferences can be overridden per transaction by sending new preferences. You must use the Kount management portal to configure your risk parameters and thresholds."),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Risk checking is an advanced feature and must be enabled on your Merchant Account before it can be used. Please contact support if you wish to have it enabled.")),(0,r.kt)("h4",{id:"benefits"},"Benefits"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The results are available immediately and returned as part of the transaction."),(0,r.kt)("li",{parentName:"ul"},"The checks can be managed independently, allowing you the utmost control over how the results are used."),(0,r.kt)("li",{parentName:"ul"},"The checks can be configured to decline the transaction automatically where required."),(0,r.kt)("li",{parentName:"ul"},"Leverage the ability to review transactions and decide what course of action to take."),(0,r.kt)("li",{parentName:"ul"},"The checks can reduce chargebacks by blocking transactions made without the Cardholder\u2019s consent that would have resulted in the Cardholder raising a chargeback to recover the fraudulent transaction amount."),(0,r.kt)("li",{parentName:"ul"},"Providing enhanced risk checking increases Customer confidence and thus increases the likelihood of their making a purchase."),(0,r.kt)("li",{parentName:"ul"},"Fully configurable within the Merchant Management System (MMS).")),(0,r.kt)("h4",{id:"limitations"},"Limitations"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Checking cannot prevent all fraudulent transactions and could even prevent some non-fraudulent transactions."),(0,r.kt)("li",{parentName:"ul"},"There are additional fees associated with having a Kount account."),(0,r.kt)("li",{parentName:"ul"},"You will have to spent time analysing your transactions and establishing fraud rules.")),(0,r.kt)("h3",{id:"implementation"},"Implementation"),(0,r.kt)("p",null,"When risk checking is required, each transaction will be sent to Kount for checking and the result of the check will be returned in the ",(0,r.kt)("inlineCode",{parentName:"p"},"riskCheck")," response field with one of the following values:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"not known - the checks could not be performed due to our error"),(0,r.kt)("li",{parentName:"ul"},"not checked - the checks could not be performed by Kount"),(0,r.kt)("li",{parentName:"ul"},"approve - the transaction is not risky and should proceed"),(0,r.kt)("li",{parentName:"ul"},"decline - the transaction is risky and should be declined"),(0,r.kt)("li",{parentName:"ul"},"review - the transaction is risky but proceed with caution"),(0,r.kt)("li",{parentName:"ul"},"escalate - the transaction is risky but proceed with caution")),(0,r.kt)("p",null,"The actions to take for each riskCheck response can be configured for the Merchant Account, using the Merchant Management System. Alternatively, the preferred actions can be passed with the transaction request in the ",(0,r.kt)("inlineCode",{parentName:"p"},"riskCheckPref")," field. The possible actions are as follows:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"continue - continue processing as normal"),(0,r.kt)("li",{parentName:"ul"},"authonly - authorise only, don't capture"),(0,r.kt)("li",{parentName:"ul"},"decline1 - decline without reason"),(0,r.kt)("li",{parentName:"ul"},"decline2 - decline with reason"),(0,r.kt)("li",{parentName:"ul"},"finished - abort with reason")),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"continue")," action allows the transaction to continue as normal and be sent to the Acquirer for authorisation. A ",(0,r.kt)("inlineCode",{parentName:"p"},"riskCheck")," value of ",(0,r.kt)("strong",{parentName:"p"},"approve")," will always be treated as if the action was ",(0,r.kt)("strong",{parentName:"p"},"continue"),", regardless of whether the preferences say otherwise."),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"authonly")," action allows the transaction to be authorised but not automatically captured giving you time to review it and decide whether you want to take the risk and capture the transaction or assume it to be fraudulent and cancel it."),(0,r.kt)("p",null,"The ",(0,r.kt)("strong",{parentName:"p"},"decline1")," and ",(0,r.kt)("strong",{parentName:"p"},"decline2")," actions will cause the transaction to be declined. Both decline the transaction and return with a ",(0,r.kt)("inlineCode",{parentName:"p"},"responseCode")," of ",(0,r.kt)("strong",{parentName:"p"},"5 (DECLINED)")," and a ",(0,r.kt)("inlineCode",{parentName:"p"},"responseMessage")," of \u2018DECLINED\u2019 or \u2018RISK DECLINED\u2019 respectively. The first action should be used if you don\u2019t wish to alert the Customer to the fact that you suspected that their transaction was fraudulent and declined it for that reason."),(0,r.kt)("p",null,"The finished action will abort the transaction, causing it to return with a ",(0,r.kt)("inlineCode",{parentName:"p"},"responseCode")," of either ",(0,r.kt)("strong",{parentName:"p"},"65857 (RISK_CHECK_ERROR)")," or ",(0,r.kt)("strong",{parentName:"p"},"65862 (RISK_CHECK_DECLINED)")," depending on whether an error prevented the transaction from being checked by Kount, resulting in a ",(0,r.kt)("inlineCode",{parentName:"p"},"riskCheck")," value of \u2018not known\u2019 or \u2018not checked\u2019."),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"riskCheckPref")," field can be provided in the request to override any settings configured in the Merchant Management System (MMS) for this Merchant Account. The value should be a comma separated list of result=actions pairs. If a result is not specified in the list, then an action of ",(0,r.kt)("strong",{parentName:"p"},"decline1")," is assumed. For example: ",(0,r.kt)("strong",{parentName:"p"},"\u201ddecline=decline1,review=authonly,escalate=authonly\u201d"),"."),(0,r.kt)("h3",{id:"riskCheckRequestFields"},"Request Fields"),(0,r.kt)("p",null,"These fields should be sent in addition to basic request fields detailed in the ",(0,r.kt)("a",{parentName:"p",href:"/hostedpaymentfields/transactiontypes/#transactionRequest"},"transaction types")," section: "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"riskCheckRequired"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Is risk checking required for this transaction?",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," N \u2013 risk checking is not required.",(0,r.kt)("br",null)," Y \u2013 risk checking is required.",(0,r.kt)("br",null),(0,r.kt)("br",null)," This parameter overrides any Merchant Account setting configured via the Merchant Management System (MMS).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"riskCheckPref"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"List of riskCheck response values and the action to be taken for those responses.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Value is a comma separated list containing one or more of the following risk check results and associated actions:",(0,r.kt)("br",null)," Results: not known, not checked, approve, decline, review, escalate. ",(0,r.kt)("br",null),"Actions: continue, decline1, decline2, authonly, finished.",(0,r.kt)("br",null),(0,r.kt)("br",null)," This parameter overrides any Merchant Account setting configured via the Merchant Management System (MMS).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"riskCheckOptions"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Record containing options used to customise the risk checking. Refer to the ",(0,r.kt)("a",{parentName:"td",href:"#riskCheckOptions"},"Risk Check Options")," section for more details.")))),(0,r.kt)("h4",{id:"riskCheckOptions"},"Risk Check Options"),(0,r.kt)("p",null,"The following options may be sent in the ",(0,r.kt)("inlineCode",{parentName:"p"},"riskCheckOptions")," field to customise the risk checking. Where possible, the options will be initialised from standard integration fields as shown in brackets below the option name. The options must be formatted using the  ",(0,r.kt)("a",{parentName:"p",href:"overview#fieldFormats"},"record or serialised record formats"),". "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"IPAD (remoteAddress)"),(0,r.kt)("td",{parentName:"tr",align:null},"Customer\u2019s IPv4 address (X.X.X.X).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"MACK"),(0,r.kt)("td",{parentName:"tr",align:null},"Merchant\u2019s acknowledgement to ship/process the order (Y or N).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"SESS"),(0,r.kt)("td",{parentName:"tr",align:null},"Unique Session ID. Used to link to Kount\u2019s browser device data collector.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ANID"),(0,r.kt)("td",{parentName:"tr",align:null},"Automatic Number Identification (ANI) submitted with order.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"CASH"),(0,r.kt)("td",{parentName:"tr",align:null},"Total cash amount in currency submitted.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ORDR (merchantOrderRef)"),(0,r.kt)("td",{parentName:"tr",align:null},"Merchant\u2019s Order Number.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"UNIQ (merchantCustomerRef)"),(0,r.kt)("td",{parentName:"tr",align:null},"Merchant assigned account number for Customer.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"EPOC"),(0,r.kt)("td",{parentName:"tr",align:null},"Date Customer account was created by merchant.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"NAME (customerName)"),(0,r.kt)("td",{parentName:"tr",align:null},"Customer\u2019s name (or name submitted with the order).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"GENDER (customerGender)"),(0,r.kt)("td",{parentName:"tr",align:null},"Customer\u2019s gender (M or F)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"BPREMISE (customerCompany)"),(0,r.kt)("td",{parentName:"tr",align:null},"Customer\u2019s billing address premises name (UK only).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"BSTREET (customerStreet, customerAddress)"),(0,r.kt)("td",{parentName:"tr",align:null},"Customer\u2019s billing address street (UK only).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"B2A1 (customerAddress)"),(0,r.kt)("td",{parentName:"tr",align:null},"Customer\u2019s billing address county/state.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"B2A2 (customerAddress2)"),(0,r.kt)("td",{parentName:"tr",align:null},"Customer\u2019s billing address county/state.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"B2CI (customerTown)"),(0,r.kt)("td",{parentName:"tr",align:null},"Customer\u2019s billing address county/state.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"B2ST (customerCounty)"),(0,r.kt)("td",{parentName:"tr",align:null},"Customer\u2019s billing address county/state.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"B2PC (customerPostcode)"),(0,r.kt)("td",{parentName:"tr",align:null},"Customer\u2019s billing address postcode.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"B2CC (customerCountryCode)"),(0,r.kt)("td",{parentName:"tr",align:null},"Customer\u2019s billing address country code.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"EMAL (customerEmail)"),(0,r.kt)("td",{parentName:"tr",align:null},"Cardholder\u2019s email address.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"B2PN (customerPhone)"),(0,r.kt)("td",{parentName:"tr",align:null},"Cardholder\u2019s phone number.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"DOB (customerDateOfBirth, recipientDateOfBirth)"),(0,r.kt)("td",{parentName:"tr",align:null},"Cardholder\u2019s date of birth.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"S2NM (deliveryName)"),(0,r.kt)("td",{parentName:"tr",align:null},"Name of person receiving the delivery.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"SPREMISE (deliveryCompany)"),(0,r.kt)("td",{parentName:"tr",align:null},"Delivery premises name (UK only).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"SSTREET (deliveryStreet, deliveryAddress)"),(0,r.kt)("td",{parentName:"tr",align:null},"Delivery street address (UK only).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"S2A1 (deliveryAddress)"),(0,r.kt)("td",{parentName:"tr",align:null},"Delivery address line 1.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"S2A2 (deliveryAddress2)"),(0,r.kt)("td",{parentName:"tr",align:null},"Deliver address line 2.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"S2CI (deliveryTown)"),(0,r.kt)("td",{parentName:"tr",align:null},"Delivery town/city.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"S2ST (deliveryCounty)"),(0,r.kt)("td",{parentName:"tr",align:null},"Delivery county/state.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"S2PC (deliveryPostcode)"),(0,r.kt)("td",{parentName:"tr",align:null},"Delivery postcode.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"S2CC (deliveryCountryCode)"),(0,r.kt)("td",{parentName:"tr",align:null},"Delivery country code.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"S2EM (deliveryEmail)"),(0,r.kt)("td",{parentName:"tr",align:null},"Delivery email address.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"S2PN (deliveryPhone)"),(0,r.kt)("td",{parentName:"tr",align:null},"Phone number of delivery location.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"SHTP (shippingType, shippingMethod)"),(0,r.kt)("td",{parentName:"tr",align:null},"Shipping type.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"PROD_TYPE","[XX]"," (items.XX.description)"),(0,r.kt)("td",{parentName:"tr",align:null},"Type for the XXth item purchased.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"PROD_ITEM","[XX]"," (items.XX.productCode)"),(0,r.kt)("td",{parentName:"tr",align:null},"SKU for the XXth item purchased.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"PROD_DESC","[XX]"," (items.XX.description)"),(0,r.kt)("td",{parentName:"tr",align:null},"Description XXth item purchased.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"PROD_QUANT","[XX]"," (items.XX.quantity)"),(0,r.kt)("td",{parentName:"tr",align:null},"Quantity of XXth item purchased.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"PROD_PRICE","[XX]"," (items.XX.amount)"),(0,r.kt)("td",{parentName:"tr",align:null},"Unit amount for XXth item purchased.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"UDF","[XXXX]"),(0,r.kt)("td",{parentName:"tr",align:null},"User defined field XXXX.")))),(0,r.kt)("p",null,"For further information on the options, refer to the Kount Integration documentation: ",(0,r.kt)("a",{parentName:"p",href:"https://kount.github.io/docs/ris-data-submission/"},"https://kount.github.io/docs/ris-data-submission/"),"."),(0,r.kt)("h3",{id:"response-fields-1"},"Response Fields"),(0,r.kt)("p",null,"These fields should be sent in addition to the ",(0,r.kt)("a",{parentName:"p",href:"#riskCheckRequestFields"},"risk check request fields"),"and the basic response fields detailed in the ",(0,r.kt)("a",{parentName:"p",href:"/hostedpaymentfields/transactiontypes/#transactionResponse"},"transaction types")," section: "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Returned"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"riskCheckEnabled"),(0,r.kt)("td",{parentName:"tr",align:null},"Always"),(0,r.kt)("td",{parentName:"tr",align:null},"Is risk checking enabled for this Merchant Account?",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," N \u2013 Merchant account is not enabled.",(0,r.kt)("br",null)," Y \u2013 Merchant account is enabled.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"riskCheck"),(0,r.kt)("td",{parentName:"tr",align:null},"If checked"),(0,r.kt)("td",{parentName:"tr",align:null},"The result of the risk check.",(0,r.kt)("br",null),(0,r.kt)("br",null),"Possible values are:",(0,r.kt)("br",null)," approve \u2013 ok, recommend proceed to authorisation. ",(0,r.kt)("br",null)," decline \u2013 probably fraudulent, recommend decline. ",(0,r.kt)("br",null)," review \u2013 possibly fraudulent, recommend review. ",(0,r.kt)("br",null)," escalate \u2013 possibly fraudulent, recommend review.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"riskCheckDetails"),(0,r.kt)("td",{parentName:"tr",align:null},"If checked"),(0,r.kt)("td",{parentName:"tr",align:null},"Record containing the raw response received from Kount minus any sensitive data.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"riskCheckResponseCode"),(0,r.kt)("td",{parentName:"tr",align:null},"If checked"),(0,r.kt)("td",{parentName:"tr",align:null},"Response code for the risk processing stage.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"riskCheckResponseMessage"),(0,r.kt)("td",{parentName:"tr",align:null},"If checked"),(0,r.kt)("td",{parentName:"tr",align:null},"Response message for the risk processing stage.")))),(0,r.kt)("h2",{id:"payment-facilitators"},"Payment Facilitators"),(0,r.kt)("p",null,"If you are a Payment Facilitator (PayFac/PF) or Independent Sales Organisation (ISO), then you must send additional fields to identify yourself and your sub-merchants."),(0,r.kt)("p",null,"These fields must be sent with every new transaction; however, they can be cloned from an existing transaction if using an xref as described in ",(0,r.kt)("a",{parentName:"p",href:"annexes#transactionCloning"},"transaction cloning"),"."),(0,r.kt)("h3",{id:"request-fields-1"},"Request Fields"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"facilitatorID"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Your facilitator identifier as assigned by the Scheme.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"facilitatorName"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Your trading name as registered with the Scheme.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"isoID"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Your ISO identifier as assigned by the Scheme.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"subMerchantID"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Unique identifier assigned to this Sub Merchant.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"merchantXXXX"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Sub Merchant details as documented in the ",(0,r.kt)("a",{parentName:"td",href:"advanceddata#merchantRequestFields"},"merchant request fields"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"statementNarrativeX"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Statement details as documented in ",(0,r.kt)("a",{parentName:"td",href:"#dynamicDescriptor"},"dynamic descriptor"),".")))),(0,r.kt)("p",null,"Some of the above fields marked as optional might be mandatory depending on the acquirer you are working with. "),(0,r.kt)("h2",{id:"financial-institutions-merchants"},"Financial Institutions Merchants"),(0,r.kt)("p",null,"Every Merchant Account has a category code, also known as the MCC code, attached to it. This category code identifies the market that the payment is related to, allowing issuing banks to identify what product or service is, or was, being provided."),(0,r.kt)("p",null,"The merchant category code 6012 is related to payments taken for financial institutions, primarily those merchants that deal with loan payments or other credit-related activities. According to Visa, this is the most fraudulent merchant category in the UK market due to compromised debit card details\u2019 being used to pay or transfer balances to other cards. Acquirers are therefore unable to confirm whether a payment is genuine, despite matching the full CVV2 with AVS."),(0,r.kt)("p",null,"To address this situation, issuing banks have requested additional payment information to be provided with payment requests in order to verify that the cardholder is knowingly entering into a credit-related contractual agreement with the merchant."),(0,r.kt)("p",null,"If you are a Merchant who has been assigned the MCC 6012 you must collect the following data for the primary recipient for each UK domestic Visa or Mastercard transaction. The additional details are currently only required by Visa and Mastercard however we recommend sending for all card types in order to be prepared for when other card Schemes follow suite."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Unique account identifier for the loan or outstanding balance funded. For example, the loan account number or the PAN (Primary Account Number) if it is a credit card balance."),(0,r.kt)("li",{parentName:"ul"},"Last name (family name)"),(0,r.kt)("li",{parentName:"ul"},"Date of Birth (D.O.B)"),(0,r.kt)("li",{parentName:"ul"},"Postcode")),(0,r.kt)("p",null,"Primary recipients are the entities (people or organisations) that have a direct relationship with the financial institution. Also, these primary recipients have agreed to the terms and conditions of the financial institution."),(0,r.kt)("p",null,"The new fields are not currently mandatory. However, some Acquirers are now declining transactions that are missing this information and so we recommend the information is always provided, even if your Acquirer doesn\u2019t currently mandate them."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"If you are not a UK MCC 6012 Merchant or the payment is not a UK domestic one, then you need not provide these additional authentication details though the Gateway will accept them if you do.")),(0,r.kt)("h3",{id:"request-fields-2"},"Request Fields"),(0,r.kt)("p",null,"To comply with the card brand rules, an MCC6012 Merchant must send these additional fields:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"merchantCategoryCode"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Merchant\u2019s VISA MCC (should be 6012).",(0,r.kt)("br",null),(0,r.kt)("br",null),"Only required if the Merchants Category Code is not configured on your Gateway account.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"receiverName"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Surname only - up to 6 letters allowed.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"receiverAccountNo"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Account number. If a PAN is supplied only the first 6 and last 4 digits will be used.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"receiverDateOfBirth"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Primary recipient\u2019s date of birth.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"receiverPostcode"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Primary recipient\u2019s postcode. (Only the district is required but full postcodes are accepted, therefore \u2018W12 8QT\u2019 or just \u2018W12\u2019 are acceptable values).")))),(0,r.kt)("h2",{id:"billing-descriptor"},"Billing Descriptor"),(0,r.kt)("p",null,"The Billing Descriptor is how your details appear on the Cardholder\u2019s statement. It is set up with the Acquirer when the Merchant Account is opened. It is used by the Cardholder to identify who a payment was made to on a particular transaction."),(0,r.kt)("p",null,"Selecting a clear Billing Descriptor is important for you to avoid a chargeback when the Cardholder does not recognise the name on the transaction."),(0,r.kt)("h3",{id:"static-descriptor"},"Static Descriptor"),(0,r.kt)("p",null,"The Static Descriptor is the descriptor agreed between yourself and your Acquirer when the Merchant Account is opened. The descriptor used is typically your trading name, location and contact phone number."),(0,r.kt)("h3",{id:"dynamicDescriptor"},"Dynamic Descriptor"),(0,r.kt)("p",null,"The Dynamic Descriptor is a descriptor sent with the transaction that includes details on the goods purchased or service provided, this is often used by large companies that provide many services and where the brand of the service is more familiar than the company name. The Dynamic Descriptor usually replaces any Static Descriptor on a per transaction basis."),(0,r.kt)("p",null,"Not all Acquirers accept Dynamic Descriptors and, for those that do, the required format varies. Often, your Merchant name is shortened to three (3) letters, followed by an asterisk (*), followed by a short description of the service or product that the business provides. This field typically has a limit of twenty-five (25) characters including the phone number."),(0,r.kt)("p",null,"For more information on whether your Acquirer allows Dynamic Descriptor and the format in which they should be sent, please contact customer support."),(0,r.kt)("h4",{id:"request-fields-3"},"Request Fields"),(0,r.kt)("p",null,"The Dynamic Descriptor is built using one or more of the following narrative fields."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"statementNarrative1"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Merchant\u2019s name.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"statementNarrative2"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Product, service or other descriptive info.")))),(0,r.kt)("h2",{id:"surcharges"},"Surcharges"),(0,r.kt)("p",null,"Surcharges are an additional charge that you can apply to the transactions that are processed through your Merchant Account."),(0,r.kt)("p",null,"Transactions that are sent for authorisation are subject to processing charges from your Acquirer and surcharges enable you to pass the processing charges that you incur on to your Customers."),(0,r.kt)("p",null,"You may, for example, be charged a fixed amount for debit card transactions and a percentage amount for credit card transactions. Consequently, the Gateway gives you the option to add both a fixed amount and percentage amount when applying a surcharge."),(0,r.kt)("p",null,"Surcharges should only be added to cover the processing charges that are incurred by your business. There is no Gateway imposed limit to the value of the surcharges that can be added to your transaction, although there are legal requirements. As a rule, the surcharge must not exceed the processing costs that you pay."),(0,r.kt)("p",null,"Some businesses apply surcharges to cover all the costs that they incur; while others use the surcharges to subsidise the charges."),(0,r.kt)("admonition",{type:"warning"},(0,r.kt)("p",{parentName:"admonition"},"Surcharge amounts may be limited or illegal in your jurisdiction. For example, surcharging is illegal in the European Union but allowed in most US states. It is up to you to check with your Acquirer and comply with any laws.")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"Surcharges is an advanced feature and must be enabled on the merchant accounts before it can be used. Please contact support if you wish to have it enabled.")),(0,r.kt)("h3",{id:"surchargeRules"},"Surcharge Rules"),(0,r.kt)("p",null,"The ",(0,r.kt)("inlineCode",{parentName:"p"},"surchargeRules")," field allows you to provide multiple rules specifying what surcharges should be applied to a transaction. If a transaction matches multiple rules, then the most specific rule will be used; or the first in the list."),(0,r.kt)("p",null,"Each surcharge rule contains the following fields:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"cardType"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"One or more 2-letter card type codes for which this rule applies. The following two card type codes are also supported, in addition to the codes listed in the ",(0,r.kt)("a",{parentName:"td",href:"annexes/#cardIdentification"},"card identification")," section.",(0,r.kt)("br",null),(0,r.kt)("br",null)," CC \u2013 matches any credit card.",(0,r.kt)("br",null)," DD \u2013 matches any debit card.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"currency"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Zero or more 3-letter ISO-4217 currency codes.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"surcharge"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Surcharge amount in minor (N) or major (N.N) units or a percentage (N%).")))),(0,r.kt)("p",null,"The surcharge rules should be passed in a sequential array of records, either as nested records or serialised records as described in the ",(0,r.kt)("a",{parentName:"p",href:"overview#fieldFormats"},"format guide"),". The record field names are case sensitive."),(0,r.kt)("h3",{id:"surcharge-amounts"},"Surcharge Amounts"),(0,r.kt)("p",null,"The Gateway doesn't usually validate that any ",(0,r.kt)("inlineCode",{parentName:"p"},"amount")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"grossAmount")," fields are the same and that any ",(0,r.kt)("inlineCode",{parentName:"p"},"netAmount"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"taxAmount")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"taxRate")," tally. However, in order to update them when a surcharge is applied, the ",(0,r.kt)("inlineCode",{parentName:"p"},"amount")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"grossAmount")," must match and the correct ",(0,r.kt)("inlineCode",{parentName:"p"},"taxRate")," must be provided or be able to be calculated from one or more of the other fields. Failure in this respect can cause the Gateway to return one of the following ",(0,r.kt)("inlineCode",{parentName:"p"},"responseCode")," values; 66360 (INVALID_GROSSAMOUNT), 66361 (INVALID_NETAMOUNT), 66338 (INVALID_TAXAMOUNT), 66362 (INVALID_TAX_RATE)."),(0,r.kt)("p",null,"If the request contains a ",(0,r.kt)("inlineCode",{parentName:"p"},"surchargeAmount")," field, then the Gateway will assume that surcharging has already been performed externally and will not attempt to apply any further surcharges."),(0,r.kt)("h3",{id:"surchargeRequestFields"},"Request Fields"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"surchargeRequired"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Is surcharging required for this transaction?",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," N \u2013 Surcharging is not required.",(0,r.kt)("br",null)," Y \u2013 Surcharging is required.",(0,r.kt)("br",null),(0,r.kt)("br",null),"Overrides any Merchant Account setting configured via the Merchant Management System (MMS).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"surchargeRules"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Surcharge rules as documented in ",(0,r.kt)("a",{parentName:"td",href:"#surchargeRules"},"surcharge rules"),".",(0,r.kt)("br",null),(0,r.kt)("br",null),"Overrides any Merchant Account setting configured via the Merchant Management System (MMS).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"surchargeAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Surcharge amount already added. A further surcharge will not be added.")))),(0,r.kt)("h3",{id:"response-fields-2"},"Response Fields"),(0,r.kt)("p",null,"These fields will be returned in addition to the ",(0,r.kt)("a",{parentName:"p",href:"#surchargeRequestFields"},"surcharge request fields")," and the ",(0,r.kt)("a",{parentName:"p",href:"transactiontypes#transactionResponse"},"basic response fields"),"."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Returned"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"surchargeEnabled"),(0,r.kt)("td",{parentName:"tr",align:null},"Always"),(0,r.kt)("td",{parentName:"tr",align:null},"Is surcharging enabled on this Merchant Account?")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"surchargeAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"Always"),(0,r.kt)("td",{parentName:"tr",align:null},"Surcharge amount added.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"amount"),(0,r.kt)("td",{parentName:"tr",align:null},"Always"),(0,r.kt)("td",{parentName:"tr",align:null},"Original request value with additional surcharge.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"grossAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"Conditional"),(0,r.kt)("td",{parentName:"tr",align:null},"Original request value adjusted for new ",(0,r.kt)("inlineCode",{parentName:"td"},"amount"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"netAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"Conditional"),(0,r.kt)("td",{parentName:"tr",align:null},"Original request value adjusted for new ",(0,r.kt)("inlineCode",{parentName:"td"},"amount"),".")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"taxAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"Conditional"),(0,r.kt)("td",{parentName:"tr",align:null},"Original request value adjusted for new ",(0,r.kt)("inlineCode",{parentName:"td"},"amount"),".")))),(0,r.kt)("h2",{id:"receipts-and-notifications"},"Receipts and Notifications"),(0,r.kt)("p",null,"The Gateway can be configured to email transaction receipts automatically to the Customer and notifications to the Merchant."),(0,r.kt)("h3",{id:"customer-email-receipts"},"Customer Email Receipts"),(0,r.kt)("p",null,"The Customer can be emailed a transaction receipt automatically each time a transaction is processed by the Gateway. Receipts are sent at the time the transaction is authorised and only for transactions where the Acquirer has approved the authorisation. Receipts are not sent for declined or referred authorisations or aborted transactions."),(0,r.kt)("p",null,"This functionality is enabled globally on a per Merchant Account basis using the Merchant Management System (MMS). This global setting can also be overridden per transaction if required, using the ",(0,r.kt)("inlineCode",{parentName:"p"},"customerReceiptsRequired")," field."),(0,r.kt)("p",null,"Customer receipts require the Customer to provide an email address; if no email address is provided then no receipt will be sent."),(0,r.kt)("h3",{id:"merchant-email-notifications"},"Merchant Email Notifications"),(0,r.kt)("p",null,"You can be automatically emailed a transaction notification each time a transaction is processed by the Gateway. Notifications are sent at the time the transaction is authorised and only for transactions where the Acquirer approved, declined or referred the authorisation. Notifications are not sent for aborted transactions."),(0,r.kt)("p",null,"This functionality is enabled globally on a per Merchant Account basis, using the Merchant Management System (MMS). This global setting can also be overridden per transaction if required, using the ",(0,r.kt)("inlineCode",{parentName:"p"},"notifyEmailRequired")," field."),(0,r.kt)("p",null,"Merchant notifications require you to provide an email address; if no email address is provided, using the Merchant Management System (MMS) or the ",(0,r.kt)("inlineCode",{parentName:"p"},"notifyEmail")," field, then no notification will be sent."),(0,r.kt)("h3",{id:"request-fields-4"},"Request Fields"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"customerReceiptsRequired"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Send a Customer receipt if possible.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," N \u2013 Don\u2019t send a receipt.",(0,r.kt)("br",null)," Y \u2013 Send if Customer\u2019s email provided.",(0,r.kt)("br",null),(0,r.kt)("br",null),"Overrides any Merchant Account setting configured via the Merchant Management System (MMS).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"customerEmail"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Customer\u2019s email address.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"notifyEmailRequired"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Send a notification email if possible.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," N \u2013 Don\u2019t send a notification.",(0,r.kt)("br",null)," Y \u2013 Send if notification email provided.",(0,r.kt)("br",null),(0,r.kt)("br",null),"Overrides any Merchant Account setting configured via the Merchant Management System (MMS).")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"notifyEmail"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Merchant\u2019s notification email address.",(0,r.kt)("br",null),(0,r.kt)("br",null),"Overrides any Merchant Account setting configured via the Merchant Management System (MMS).")))),(0,r.kt)("h3",{id:"response-fields-3"},"Response Fields"),(0,r.kt)("p",null,"The request fields for the required receipts and notifications are returned together with the appropriate fields from the following:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Returned"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"customerReceiptsResponseCode"),(0,r.kt)("td",{parentName:"tr",align:null},"If required"),(0,r.kt)("td",{parentName:"tr",align:null},"Result of sending email to Customer. Refer to ",(0,r.kt)("a",{parentName:"td",href:"annexes#responseCodes"},"Response Codes")," for more details.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"customerReceiptsResponseMessage"),(0,r.kt)("td",{parentName:"tr",align:null},"If required"),(0,r.kt)("td",{parentName:"tr",align:null},"Description of above response code.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"notifyEmailResponseCode"),(0,r.kt)("td",{parentName:"tr",align:null},"If required"),(0,r.kt)("td",{parentName:"tr",align:null},"Result of sending email to Merchant. Refer to ",(0,r.kt)("a",{parentName:"td",href:"annexes#responseCodes"},"Response Codes")," for more details.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"notifyEmailResponseMessage"),(0,r.kt)("td",{parentName:"tr",align:null},"If required"),(0,r.kt)("td",{parentName:"tr",align:null},"Description of above response code.")))),(0,r.kt)("h2",{id:"dynamic-currency-conversion"},"Dynamic Currency Conversion"),(0,r.kt)("p",null,"Dynamic Currency Conversion is a process where the amount of a credit card transaction is converted by the Gateway into the Cardholder\u2019s local currency as determined by the card\u2019s country of issue."),(0,r.kt)("p",null,"It allows your Customer to pay in their currency, but you will receive the funds in the original transaction currency. You can profit from a mark-up on the exchange rate used, as negotiated with your Acquirer and DCC Provider."),(0,r.kt)("p",null,"Dynamic Currency Conversion is not available with all Acquirers and must be enabled on your Merchant Account before it can be used. Please contact support to find out whether your Acquirer supports it and if it can be enabled on your Merchant Account."),(0,r.kt)("h4",{id:"benefits-1"},"Benefits"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"You may see fewer abandoned transactions because the Cardholder can choose to pay in a familiar currency and need not carry out any mental conversions."),(0,r.kt)("li",{parentName:"ul"},"You can gain income from an exchange rate mark-up."),(0,r.kt)("li",{parentName:"ul"},"Currency conversion can be viewed in your transaction reports."),(0,r.kt)("li",{parentName:"ul"},"Fully configurable within the Merchant Management System (MMS).")),(0,r.kt)("h4",{id:"limitations-1"},"Limitations"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Cardholders can be sceptical of use due to previously unfavourable exchange rates\u2019 being offered."),(0,r.kt)("li",{parentName:"ul"},"There may be extra costs involved, though you may also find that you can recover this from your conversion mark-up."),(0,r.kt)("li",{parentName:"ul"},"Not all card types are supported.")),(0,r.kt)("h4",{id:"implementation-1"},"Implementation"),(0,r.kt)("p",null,"If your Merchant Account is set up for Dynamic Currency Conversions, then the Gateway will need you to present the conversion offer to the Cardholder and ask whether they wish to accept or refuse the offer."),(0,r.kt)("h3",{id:"initial-request-fetch-dcc-conversion-details"},"Initial Request (Fetch DCC Conversion details)"),(0,r.kt)("p",null,"If no DCC conversion details are provided in the initial request, the Gateway will determine whether the transaction is eligible for DCC and whether any suitable conversion rate is available."),(0,r.kt)("p",null,"If the Gateway determines that the transaction is not eligible for DCC or no conversion rate is available, then it will continue and process it as a normal transaction without DCC."),(0,r.kt)("p",null,"If a rate was checked for but none was available, then the transaction response will contain DCC conversion details but the ",(0,r.kt)("inlineCode",{parentName:"p"},"dccRate")," field will be zero."),(0,r.kt)("p",null,"If the Gateway determines that the transaction is eligible, it will respond with a ",(0,r.kt)("inlineCode",{parentName:"p"},"responseCode")," of 65890 (DCC REQUIRED) and the response will include details of the DCC offer to ask the Cardholder whether they wish to accept, together with a ",(0,r.kt)("inlineCode",{parentName:"p"},"dccRef")," transaction continuation reference."),(0,r.kt)("h4",{id:"dccInitialRequestFields"},"Request Fields"),(0,r.kt)("p",null,"These fields should be sent in addition to basic request fields detailed in the ",(0,r.kt)("a",{parentName:"p",href:"/hostedpaymentfields/transactiontypes/#transactionRequest"},"transaction types")," section: "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccRequired"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"Is 3DS required for this transaction?",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null),"  N \u2013 DCC is not required. ",(0,r.kt)("br",null)," Y \u2013 DCC is not required. ",(0,r.kt)("br",null),(0,r.kt)("br",null)," Any other value will use the preference set in the Merchant Management System (MMS).")))),(0,r.kt)("h4",{id:"dccInitialResponseFields"},"Response Fields"),(0,r.kt)("p",null,"These fields will be returned in addition to the ",(0,r.kt)("a",{parentName:"p",href:"transactiontypes#transactionResponse"},"basic response fields"),"."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Returned"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccEnabled"),(0,r.kt)("td",{parentName:"tr",align:null},"Always"),(0,r.kt)("td",{parentName:"tr",align:null},"Is DCC enabled for this Merchant Account?",(0,r.kt)("br",null)," ",(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null),"  N \u2013 Merchant Account is not enabled.",(0,r.kt)("br",null),"  Y \u2013 Merchant Account is enabled.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccRequired"),(0,r.kt)("td",{parentName:"tr",align:null},"Always"),(0,r.kt)("td",{parentName:"tr",align:null},"Is DCC required for this transaction?",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," N \u2013 DCC is not required.",(0,r.kt)("br",null)," Y \u2013 DCC is required.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccProvider"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"DCC provider code name.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccRate"),(0,r.kt)("td",{parentName:"tr",align:null},"Always"),(0,r.kt)("td",{parentName:"tr",align:null},"Conversion rate (0-999.999999)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccMargin"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"Percentage markup (0-9999.999999)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccCommission"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"Percentage commission (0-9999.999999)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccSource"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"Source of exchange rate")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccCreated"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"Time rate sourced (YYYY-MM-DD HH:MM:SS)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccExpires"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"Time rate expires (YYYY-MM-DD HH:MM:SS)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccCurrencyCode"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"Cardholder\u2019s currency")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"The amount of the transaction in the Cardholder\u2019s minor currency converted at the rate provided.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccResponseCode"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"Any response code generated while performing the DCC processing.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccResponseMessage"),(0,r.kt)("td",{parentName:"tr",align:null},"Yes"),(0,r.kt)("td",{parentName:"tr",align:null},"Any response description corresponding to the above ",(0,r.kt)("inlineCode",{parentName:"td"},"dccResponseCode"),".")))),(0,r.kt)("h3",{id:"continuation-request-acceptrefuse-dcc-offer"},"Continuation Request (Accept/Refuse DCC offer)"),(0,r.kt)("p",null,"When the DCC offer has been presented to the Cardholder and their acceptance or refusal obtained, then a new request should be sent to the Gateway containing their decision in the ",(0,r.kt)("inlineCode",{parentName:"p"},"dccAccepted")," and the original ",(0,r.kt)("inlineCode",{parentName:"p"},"dccRef")," field received above."),(0,r.kt)("h4",{id:"request-fields-5"},"Request Fields"),(0,r.kt)("p",null,"These fields may be sent alone:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccRef"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"The value of the ",(0,r.kt)("inlineCode",{parentName:"td"},"dccRef")," field in the initial Gateway response.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccAccepted"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"The Cardholder\u2019s acceptance to pay using the DCC conversion offered. If they don\u2019t accept then the original transaction currency is used.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," N \u2013 Cardholder refused the DCC offer.",(0,r.kt)("br",null)," Y \u2013 Cardholder accepted the DCC offer.")))),(0,r.kt)("p",null,"It is only necessary to send the ",(0,r.kt)("inlineCode",{parentName:"p"},"dccRef")," and the ",(0,r.kt)("inlineCode",{parentName:"p"},"dccAccepted")," in the continuation request, because the ",(0,r.kt)("inlineCode",{parentName:"p"},"dccRef")," will identify the Merchant Account and initial request. However, you can send any of the normal request fields to modify or supplement the initial request. Any card details and transaction amount sent in the second request must match those used in the first request, else the second request will fail with a responseCode of 64442 (REQUEST MISMATCH)."),(0,r.kt)("h4",{id:"response-fields-4"},"Response Fields"),(0,r.kt)("p",null,"No further fields will be returned in addition to the ",(0,r.kt)("a",{parentName:"p",href:"#dccInitialRequestFields"},"dcc initial request fields"),", the ",(0,r.kt)("a",{parentName:"p",href:"#dccInitialResponseFields"},"dcc initial response fields"),", and the ",(0,r.kt)("a",{parentName:"p",href:"transactiontypes#transactionResponse"},"basic response fields"),"."),(0,r.kt)("h3",{id:"external-authentication-request"},"External Authentication Request"),(0,r.kt)("p",null,"You can choose to obtain the DCC details from a third party, in which case you should provide their details as part of a standard request. If the Gateway receives valid third-party DCC details, then it will use those and not attempt to fetch rates from its own DCC Provider."),(0,r.kt)("h4",{id:"externalAuthenticationRequestFields"},"Request Fields"),(0,r.kt)("p",null,"These fields should be sent in addition to basic request fields detailed in the ",(0,r.kt)("a",{parentName:"p",href:"/hostedpaymentfields/transactiontypes/#transactionRequest"},"transaction types")," section: "),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Name"),(0,r.kt)("th",{parentName:"tr",align:null},"Mandatory"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccAccepted"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The Cardholder\u2019s acceptance to pay using the DCC conversion offered. If they don\u2019t accept then the original transaction currency is used.",(0,r.kt)("br",null),(0,r.kt)("br",null)," Possible values are:",(0,r.kt)("br",null)," N \u2013 Cardholder refused the DCC offer.",(0,r.kt)("br",null)," Y \u2013 Cardholder accepted the DCC offer.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccProvider"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"DCC provider code name.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccMargin"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Percentage markup (0-9999.999999)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccCommission"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Percentage commission (0-9999.999999)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccSource"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Source of exchange rate")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccCreated"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Time rate sourced (YYYY-MM-DD HH:MM:SS)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccExpires"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Time rate expires (YYYY-MM-DD HH:MM:SS)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccCurrencyCode"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("span",{class:"badge badge--primary"},"Yes")),(0,r.kt)("td",{parentName:"tr",align:null},"Cardholder\u2019s currency")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"dccAmount"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},"The amount of the transaction in the Cardholder\u2019s minor currency converted at the rate provided.")))),(0,r.kt)("p",null,"Note: If DCC is not enabled for the Merchant Account then any DCC conversion fields sent in the request are ignored and the transaction is processed as normal without DCC. If DCC is enabled but the transaction is otherwise not eligible for DCC conversion, then any DCC field sent in the request will result in an error response."),(0,r.kt)("h4",{id:"response-fields-5"},"Response Fields"),(0,r.kt)("p",null,"No further fields will be returned in addition to the ",(0,r.kt)("a",{parentName:"p",href:"#externalAuthenticationRequestFields"},"external authentication request fields"),"  and the ",(0,r.kt)("a",{parentName:"p",href:"transactiontypes#transactionResponse"},"basic response fields"),"."))}p.isMDXComponent=!0}}]);